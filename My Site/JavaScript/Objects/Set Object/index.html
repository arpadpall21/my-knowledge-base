<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title> Set Object </title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="../../../Assets/stylesPages.css">
    <script src="../../../Assets/scriptPages.js"></script>
  </head>
  <body>
    <h1> Set and WeakSet </h1>
    <p> Updated ( 2018-07-21 / 2019-12-14 )</p>
    <nav class="sitenav">
      <a href="../../../index.html">MySite > </a>
      <a href="../../index.html">JavaScript > </a>
      <a href="../index.html"> Objects > </a> Set and WeakSet
    </nav>
    <table class="table">
      <caption>
        Set Object
        <span id="browserSupport" title="updated : 2025-03-07">
          <span><i class="fab fa-chrome"></i> 38 </span>
          <span><i class="fab fa-firefox"></i> 13 </span>
          <span><i class="fab fa-opera"></i> 25 </span>
          <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 11 </span>
          <span><i class="fab fa-safari"></i> 8 </span>
          <span><i class="fab fa-node-js"></i> 0.12 </span>
        </span>
      </caption>
      <tr>
        <th style="width:30%;"> Method / Property </th>
        <th> Descriptions </th>
      </tr>
      <tr>
        <td> new Set(<i>iterableObj</i>) </td>
        <td> - creates a new Set object from the passed iterable object <br>
        </td>
      </tr>
      <tr>
        <td>|</td>
        <td></td>
      </tr>
      <tr>
        <td> <strong>setObj</strong>.size </td>
        <td> - returns the number of items held
        </td>
      </tr>
      <tr>
        <td>|</td>
        <td></td>
      </tr>
      <tr>
        <td> <strong>setObj</strong>.add(<strong>value</strong>) </td>
        <td> - adds the passed value at the end of the Set object and returns the Set object itself (with the newly added item)
        </td>
      </tr>
      <tr>
        <td> <strong>setObj</strong>.has(<strong>value</strong>) </td>
        <td> - returns <mark>true</mark> if the Set object contains the specified item, otherwise returns <mark>false</mark>
        </td>
      </tr>
      <tr>
        <td>|</td>
        <td></td>
      </tr>
      <tr>
        <td> <strong>setObj</strong>.delete(<strong>value</strong>) </td>
        <td> - removes the specified item from the set object and returns a boolean value indicating the success or failure of the operation <br>
          - this does not leave a hole in Set object, items will shift in order to fill the gap
        </td>
      </tr>
      <tr>
        <td> <strong>setObj</strong>.clear() </td>
        <td> - removes all items from the Set object (no return value)
        </td>
      </tr>
      <tr>
        <td>|</td>
        <td></td>
      </tr>
      <tr>
        <td> <strong>setObj</strong>.values() </td>
        <td> - returns an iterator object containing the Set object items (same as the <mark>keys()</mark> method)
        </td>
      </tr>
      <tr>
        <td> <strong>setObj</strong>.keys() </td>
        <td> - returns an iterator object containing the Set object items (same as the <mark>values()</mark> method)
        </td>
      </tr>
      <tr>
        <td> <strong>setObj</strong>.entries() </td>
        <td> - returns an iterator object containing the Set object items in format <mark>SetIterator{[sameVal, sameVal], ...}</mark>
        </td>
      </tr>
      <tr>
        <td>|</td>
        <td></td>
      </tr>
      <tr>
        <td> <strong>setObj</strong>.forEach(<strong>fn(val, val, setObj)</strong>, <i>thisValue</i>) </td>
        <td> - runs the callback function for each item in the set object in the insertion order (items are returned as 1st and 2nd argument (same item))
        </td>
      </tr>
    </table>
    <br>
    <table class="table">
      <caption>
        WeakSet Object
        <span id="browserSupport" title="updated : 2025-03-07">
          <span><i class="fab fa-chrome"></i> 36 </span>
          <span><i class="fab fa-firefox"></i> 34 </span>
          <span><i class="fab fa-opera"></i> 23 </span>
          <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 12 </span>
          <span><i class="fab fa-safari"></i> 9 </span>
          <span><i class="fab fa-node-js"></i> 0.12 </span>
        </span>
      </caption>
      <tr>
        <th style="width:30%;"> Method / Property </th>
        <th> Descriptions </th>
      </tr>
      <tr>
        <td> new WeakSet(<i>iterableObj</i>) </td>
        <td>
          - creates and returns a new WeakSet object from the passed iterable object <br>
        </td>
      </tr>
      <tr>
        <td>|</td>
        <td></td>
      </tr>
      <tr>
        <td> <strong>weakSetObj</strong>.add(<strong>objRef</strong>) </td>
        <td> - adds an object references at the end of the WeakSet object and returns the WeakSet object itself (added object reference included)
        </td>
      </tr>
      <tr>
        <td>|</td>
        <td></td>
      </tr>
      <tr>
        <td> <strong>weakSetObj</strong>.has(<strong>objRef</strong>) </td>
        <td> - retruns <mark>true</mark> if the passed object reference exist in the WeakSet object, otherwiser returns <mark>false</mark>
        </td>
      </tr>
      <tr>
        <td>|</td>
        <td></td>
      </tr>
      <tr>
        <td> <strong>weakSetObj</strong>.delete(<strong>objRef</strong>) </td>
        <td> - removes the specified object reference from the weakSet object and returns a boolean value indicating the success or failure of the operation
        </td>
      </tr>
    </table>
    <h2 style="color:green;"><u> Notes : </u></h2>
    <details class="example" id="notes">
      <summary> Notes :</summary>
      <!-- <p> - paragraph removes the 'empty' message from the detail TAG -->
    </details>
    <h2 style="color:green;"><u> Useful Links : </u></h2>
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set" target="blank">MDN Set Object</a></p>
    <h2 style="color:green;"><u> Remember This : </u></h2>
    <p> - Set object items accessible by the <mark>forEach()</mark> method or by the <mark>for... of</mark> loop <u>because it is an iterator object</u> (we cannot access Set items like Array items (ex: <mark>Set[0]</mark> this always returns undefined)) </p>
    <h2 style="color:green;"><u> Description and Demonstration : </u></h2>
    <p> <mark class="mark">Set</mark> object: </p>
    <p class="indent-lv1"> - iterable collection that holds unique values of any type </p>
    <p class="indent-lv1"> - refeneced objects when deleted are not removed from the Set (not garbage collected) </p>
    <p class="indent-lv1"><u> Usage: </u></p>
    <p class="indent-lv2"> - a collection where no duplicate members are allowed </p>
    
    
    
    
    
    <br><br><br><br><br><br><br><br><br><br><br>
    <br><br><br><br><br><br><br><br><br><br><br>
    
    
    <p class="indent-lv1"> - if the object that is refeneced by a Map key is deleted the Map will keep the original object (not garbage collected) </p>
    <p class="indent-lv1"><u> Usage: </u></p>
    <p class="indent-lv2"> - normal iterable key-value pair data structure </p>
    <p class="indent-lv2"> - holding some metadata for objects (key = object reference, value = some meta data) </p>
    <p> <mark class="mark">WeakMap</mark> object: </p>
    <p class="indent-lv1"> - holds key-value pairs <u>(not iterable)</u> </p>
    <p class="indent-lv1"> - keys can be only be object references </p>
    <p class="indent-lv1"> - if the object that is refeneced by a WeakMap key is deleted the WeakMap will not keep the original object (garbage collected) </p>
    <p class="indent-lv1"><u> Usage: </u></p>
    <p class="indent-lv2"> - holding some metadata for objects (key = object reference, value = some meta data) </p>
    
    
    
    
    
    
    <h2 class="headerExtra"><u> The <mark>Set</mark> Object </u></h2>
    <p> - the <mark>Set</mark> object is an <u>iteror</u> object which holds <u>unique primitives</u> or objects </p>
    <p> - the Set object uses the <mark>===</mark> (same value equality operator) to check for equal primitives or equal object references, <u>the latest equal value overwrites the previous one!</u> </p>
    <p style="color:yellow;"> - Set object items accessible by the <mark>forEach()</mark> method or by the <mark>for... of</mark> loop <u>because it is an iterator object</u> (we cannot access Set items like Array items (ex: <mark>Set[0]</mark> this always returns undefined)) </p>
    <details class="example">
      <summary> DEMO </summary>
      <pre>
    var myObj = {p1:'val'};
    
    var mySet = new Set(['str', 32, 32, myObj, myObj, {x1:74}, {x1:74}]);              // only the first 32 and 'myObj' object reference is held   
                                                                                       // -! both the same unreferenced objects ({x1:74}) are held because the Set object doesn't do object comparison     
// accessing items --------------------------------------------------------------------
    mySet.forEach((val) => {
        val;                                                                           // -> 'str' | 32 | {p1:'val'} | {x1:74} | {x1:74}
    });
    
    for(i of mySet) {                                                                  // we can use the for... of loop for iterating through iterator object items  
        i;                                                                             // -> 'str' | 32 | {p1:'val'} | {x1:74} | {x1:74} 
    }   
    
    mySet[0];                                                                          // -> undefined     // -! Set object items cannot be accessed as Array items (because the Set is an iterator object)    
    mySet[0];                                                                          // -> undefined   
    </pre>
    </details>
    <!---------------------------------------------------------------------------------------------------------------------------->
    <hr>
    <h3 class="header"> The <mark>size</mark> / <mark>add()</mark> / <mark>has()</mark> property and methods </h3>
    <details class="example">
      <summary> DEMO </summary>
      <pre>
    var mySet = new Set(['book', 'booklet']);
    
// size -------------------------------------------------------------------------------
    mySet.size;                                                                        // -> 2
    
// add() / has() ----------------------------------------------------------------------
    mySet.has('frame');                                                                // -> false
    
    mySet.add('frame');                                                                // -> Set{'book', 'booklet', 'frame'}        // adds the 'frame' item at the end of the Set object and returns the Set object itself with the added item     
    mySet.has('frame');                                                                // -> true
    </pre>
    </details>
    <!---------------------------------------------------------------------------------------------------------------------------->
    <hr>
    <h3 class="header"> The <mark>delete()</mark> / <mark>clear()</mark> methods </h3>
    <details class="example">
      <summary> DEMO </summary>
      <pre>
    var mySet = new Set(["uno", "due", "tree"]);
    
// delete() ---------------------------------------------------------------------------
    mySet.delete("due");                                                               // -> true               // item successfully removed 
    mySet.delete("gold");                                                              // -> false              // delete failed   
    
    mySet;                                                                             // -> Set{'uno', 'tree'} // -! removing an item does not leave a empty item slot    
    
// clear() ----------------------------------------------------------------------------
    mySet.clear();                                                                     // removes all Set items (no return value) 
    
    mySet;                                                                             // -> Set{}
    </pre>
    </details>
    <!---------------------------------------------------------------------------------------------------------------------------->
    <hr>
    <h3 class="header"> The <mark>values()</mark> / <mark>keys()</mark> / <mark>entries()</mark> methods </h3>
    <details class="example">
      <summary> DEMO </summary>
      <pre>
    var mySet = new Set([4, 47, "ksdf", false]);
    
    var valIterator = mySet.values();                                                  // -> SetIterator{4, 47, 'ksdf', false}
        valIterator.next();                                                            // -> {value:4, done:false}
        
    var keyIterator = mySet.keys();                                                    // -> SetIterator{4, 47, 'ksdf', false}
        valIterator.next();                                                            // -> {value:4, done:false}
        
    var entriesIterator = mySet.entries();                                             // -> SetIterator{[4, 4], [47, 47], ['ksdf', 'ksdf'], [false, false]}   
        valIterator.next();                                                            // -> {value:[4, 4], done:false}
    </pre>
    </details>
    <!---------------------------------------------------------------------------------------------------------------------------->
    <hr>
    <h3 class="header"> The <mark>forEach()</mark> method </h3>
    <details class="example">
      <summary> DEMO </summary>
      <pre>
    var laptop = new Set(["Acer", "Lenovo", "IBM", "Apple"]);
    var thisObject = {p1:'val'};
    
    laptop.forEach(function(val1, val2, setObj){
        val1;                                                                          // -> 'Acer' | 'Lenovo' | 'IBM' | 'Apple'
        val2;                                                                          // -> 'Acer' | 'Lenovo' | 'IBM' | 'Apple'
        setObj;                                                                        // -> Set{"Acer", "Lenovo", "IBM", "Apple"} | ...        // the set object itself 
        this;                                                                          // -> {p1:'val'} | ...                                   // the this keyword references the passed 2nd argument    
    }, thisObject);   
    </pre>
    </details>
    <!---------------------------------------------------------------------------------------------------------------------------->
    <hr>
    <h2 class="headerExtra"> The <mark>WeakSet</mark> Object </h2>
    <p> - the WeakSet object is basically an object garbage collection tool, marks unreferenced objects for garbage collection </p>
    <p> - it "weakly" holds <u>unique object references only</u> if the held object reference is not referenced than it will be garbage collected </p>
    <p> - because objects are weakly held there is no iterator list to keep track of them, so the <u>WeakSet object is not iterable</u> </p>
    <details class="example">
      <summary> DEMO </summary>
      <pre>
// !! the WeakSet object marks unreferenced object references for gargabe collection, BUT the garbage collection is platform specific, so this code might result different outcomes depending on platform garbage collection speed    
    var myObj = {p1:'val'};
    var myObj = {p1:'val'};
    var myObj2 = {p1:'val'};
    
    var myWeakSet = new WeakSet([myObj, myObj, myObj2, {x1:'val'}, {x2:'val'}]);       // unreferenced objects will be automatically garbage collected ({x1:'val'}, {x2:'val'})    
    
    myWeakSet:                                                                         // -> WeakSet({p1:'val'}, {p2:'val2'})
    
    var myObj = 'new value';                                                           // the 'myObj' variable does not reference the {p1:'val'} object any more   
    
    myWeakSet;                                                                         // -> WeakSet{p2:'val2'}             // the {p1:'val1'} object is garbage collected
    </pre>
    </details>
    <!---------------------------------------------------------------------------------------------------------------------------->
    <hr>
    <h3 class="header"> The <mark>add()</mark> / <mark>has()</mark> / <mark>delete()</mark> methods </h3>
    <details class="example">
      <summary> DEMO </summary>
      <pre>
    var myObj1 = {p1:'val1'}
    var myObj2 = {p2:'val2'}
    
    var myWeakSet = new WeakSet();
    
// add() ------------------------------------------------------------------------------
    myWeakSet.add(myObj1);                                                             // -> WeakSet({p1:'val1'})                   // adds new object references    
    myWeakSet.add(myObj2);                                                             // -> WeakSet({p1:'val1'}, {p2:'val2'})
        
// delete() ---------------------------------------------------------------------------
    myWeakSet.delete(myObj2);                                                          // -> true                                   // object reference successfully deleted   
    myWeakSet.delete(noObj);                                                           // -> false                                  // delete objeration failed (no such object reference)    
    
// has() ------------------------------------------------------------------------------
    myWeakSet.has(myObj1);                                                             // -> true                                   // the WeakSet has this object reference    
    myWeakSet.has(myObj2);                                                             // -> false                                  // the WeakSet does not have this object reference (because it was deleted)    
    
    myObj1 = 'new value';                                                              // variable has a new value assigned to (so it does not references the {p1:'val1'} object any more = WeakSet marks it for garbage collection)    
    myWeakSet.has(myObj1);                                                             // -> false                                  // the WeakSet does not have this object reference (because its object value was garbage collected)    
    </pre>
    </details>

    <br><br>
  </body>
</html>