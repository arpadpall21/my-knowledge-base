<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title> Query String </title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="../../Assets/stylesPages.css">
    <script src="../../Assets/scriptPages.js"></script>
  </head>
  <body>
    <h1> Query String (ver 4.0.0) </h1>
    <p> Updated ( 2019-09-09 / 2019-10-13 / 2020-11-21 / 2022-01-31)</p>
    <nav class="sitenav">
      <a href="../../index.html">MySite > </a>
      <a href="../index.html">Node.js > </a> Query String
    </nav>
    <pre class="syntax">
        <span style="color:deepskyblue;">┌────────────────────────────────────────────────────────────────────────────────────────────────┐</span>
        <span style="color:deepskyblue;">│                                              href                                              │</span>
        <span style="color:deepskyblue;">├──────────┬──┬─────────────────────┬────────────────────────┬───────────────────────────┬───────┤</span>
        <span style="color:deepskyblue;">│ protocol │  │        auth         │          host          │           path            │ hash  │</span>
        <span style="color:deepskyblue;">│          │  │                     ├─────────────────┬──────┼──────────┬────────────────┤       │</span>
        <span style="color:deepskyblue;">│          │  │                     │    hostname     │ port │ pathname │     search     │       │</span>
        <span style="color:deepskyblue;">│          │  │                     │                 │      │          ├─┬──────────────┤       │</span>
        <span style="color:deepskyblue;">│          │  │                     │                 │      │          │ │    query     │       │</span>
        "  https:   //    user   :   pass   @ sub.example.com : 8080   /p/a/t/h  ?  query=string   #hash "
        <span style="color:deepskyblue;">│          │  │          │          │    hostname     │ port │          │                │       │</span>
        <span style="color:deepskyblue;">│          │  │          │          ├─────────────────┴──────┤          │                │       │</span>
        <span style="color:deepskyblue;">│ protocol │  │ username │ password │          host          │          │                │       │</span>
        <span style="color:deepskyblue;">├──────────┴──┼──────────┴──────────┼────────────────────────┤          │                │       │</span>
        <span style="color:deepskyblue;">│  origin     .                     .         origin         │ pathname │     search     │ hash  │</span>
        <span style="color:deepskyblue;">└─────────────┴─────────────────────┴────────────────────────┴──────────┴────────────────┴───────┘</span>
    </pre>
    <br>
    <table class="table">
      <caption>
        <span class="changeListOrder">[Ordered: <span>Alphabetically</span>]</span>
      </caption>
      <tr>
        <th> Method </th>
        <th> Description </th>
      </tr>
      <tr>
        <td>
          <strong>querystring</strong>.decode(<strong>querystring:str</strong>, <i class="openable">pairSep:str<div>
              <p> - separator between key/value pairs (Default: <mark>&</mark>) (ex: <mark>key1=val1&key2=val2</mark>) </p>
            </div></i>, <i class="openable">keyValSep:str<div>
              <p> - separator between key and value (Default: <mark>=</mark>) (ex: <mark>key=val</mark>) </p>
            </div></i>, <i class="openable">option:obj<div>
              <p> decodeURIComponent: <strong>fn</strong> - function used to decode precend-encoded characters (Default: <mark>querystring.unescape()</mark>) </p>
              <p> maxKeys: <strong>nr</strong> - maximum number of keys to parse (<mark>0</mark> = unlimited) (Default: <mark>1000</mark>) </p>
            </div></i>)
        </td>
        <td>
          - decodes a querystring URL-safe characters and returns a prototypeless object which represents the decoded query string <br>
          - internally uses the <mark>unescape()</mark> method by default (does the same as <mark>querystring.parse()</mark>)
          <span id="browserSupport" title="updated : 2019-09-09">
            <span><i class="fab fa-node-js"></i> 0.1.99 </span>
          </span>
        </td>
      </tr>
      <tr>
        <td>
          <strong>querystring</strong>.encode(<strong>querystring:obj</strong>, <i class="openable">pairSep:str<div>
              <p> - separator between key/value pairs (Default: <mark>&</mark>) (ex: <mark>key1=val1&key2=val2</mark>) </p>
            </div></i>, <i class="openable">keyValSep:str<div>
              <p> - separator between key and value (Default: <mark>=</mark>) (ex: <mark>key=val</mark>) </p>
            </div></i>, <i class="openable">option:obj<div>
              <p> encodeURIComponent: <strong>fn</strong> - function used to convert URL-unsafe characterst to percent-encoded characters (Default: <mark>querystring.escape()</mark>) </p>
            </div></i>)
        </td>
        <td>
          - encodes the passed object's key/values into URL-safe characters and returns the result as a query string <br>
          - internally uses the <mark>querystring.escape()</mark> method by default (does the same as <mark>stringify()</mark>)
          <span id="browserSupport" title="updated : 2019-09-09">
            <span><i class="fab fa-node-js"></i> 0.1.99 </span>
          </span>
        </td>
      </tr>
      <tr>
        <td> <strong>querystring</strong>.escape(<strong>str</strong>) </td>
        <td>
          - converts characters to URL-safe (percent-encoded) characters <br>
          - attempts to use <a href="../../01 HTML/Encoded Data in HTML/index.html#url" target="_blanc">JavaScript's <mark>encodeURIComponent()</mark> method [link]</a> <br>
          - internally used by the <mark>querystring.stringify()</mark> and <mark>querystring.encode()</mark> methods
          <span id="browserSupport" title="updated : 2019-09-09">
            <span><i class="fab fa-node-js"></i> 0.1.25 </span>
          </span>
        </td>
      </tr>
      <tr class="05.01">
        <td>
          <strong>querystring</strong>.parse(<strong>querystring:str</strong>, <i class="openable">pairSep:str<div>
              <p> - separator between key/value pairs (Default: <mark>&</mark>) (ex: <mark>key1=val1&key2=val2</mark>) </p>
            </div></i>, <i class="openable">keyValSep:str<div>
              <p> - separator between key and value (Default: <mark>=</mark>) (ex: <mark>key=val</mark>) </p>
            </div></i>, <i class="openable">option:obj<div>
              <p> decodeURIComponent: <strong>fn</strong> - function used to decode precend-encoded characters (Default: <mark>querystring.unescape()</mark>) </p>
              <p> maxKeys: <strong>nr</strong> - maximum number of keys to parse (<mark>0</mark> = unlimited) (Default: <mark>1000</mark>) </p>
            </div></i>)
        </td>
        <td>
          - decodes a querystring URL-safe characters and returns a prototypeless object which represents the decoded query string <br>
          - internally uses the <mark>unescape()</mark> method by default (does the same as <mark>querystring.decode()</mark>)
          <span id="browserSupport" title="updated : 2019-09-09">
            <span><i class="fab fa-node-js"></i> 0.1.25 </span>
            <span><i class="fab fa-node-js"></i> 6.0.0 returned object has no prototype </span>
          </span>
        </td>
      </tr>
      <tr>
        <td>
          <strong>querystring</strong>.stringify(<strong>querystring:obj</strong>, <i class="openable">pairSep:str<div>
              <p> - separator between key/value pairs (Default: <mark>&</mark>) (ex: <mark>key1=val1&key2=val2</mark>) </p>
            </div></i>, <i class="openable">keyValSep:str<div>
              <p> - separator between key and value (Default: <mark>=</mark>) (ex: <mark>key=val</mark>) </p>
            </div></i>, <i class="openable">option:obj<div>
              <p> encodeURIComponent: <strong>fn</strong> - function used to convert URL-unsafe characterst to percent-encoded characters (Default: <mark>querystring.escape()</mark>) </p>
            </div></i>) </td>
        <td>
          - encodes the passed object's key/values into URL-safe characters and returns the result as a query string <br>
          - internally uses the <mark>querystring.escape()</mark> method by default (does the same as <mark>encode()</mark>)
          <span id="browserSupport" title="updated : 2019-09-09">
            <span><i class="fab fa-node-js"></i> 0.1.25 </span>
          </span>
        </td>
      </tr>
      <tr>
        <td> <strong>querystring</strong>.unescape(<strong>str</strong>) </td>
        <td>
          - converts URL-safe (percent-encoded) characters to normal characters <br>
          - attempts to use <a href="../../01 HTML/Encoded Data in HTML/index.html#url" target="_blanc">JavaScript's <mark>decodeURIComponent()</mark> method [link]</a> <br>
          - internally used by the <mark>querystring.parse()</mark> and <mark>querystring.decode()</mark> methods
          <span id="browserSupport" title="updated : 2019-09-09">
            <span><i class="fab fa-node-js"></i> 0.1.25 </span>
          </span>
        </td>
      </tr>
    </table>
    <h2 style="color:green;"><u> Notes : </u></h2>
    <details class="example" id="notes">
      <summary> Notes :</summary>
      <!-- <p> - paragraph removes the 'empty' message from the detail TAG -->
    </details>
    <h2 style="color:green;"><u> Useful Links : </u></h2>
    <p><a href="https://nodejs.org/dist/latest-v15.x/docs/api/querystring.html" target="_blanc">Query String (node.js.org)</a></p>
    <h2 style="color:green;"><u> Remember This : </u></h2>

    <h2 style="color:green;"><u> Description and Demonstration : </u></h2>
    <p> - the querystring module provides methods to work with URL querystrings </p>
    <h2 style="color:darkblue;"><u> The <mark>parse()</mark> / <mark>decode()</mark> / <mark>stringify()</mark> / <mark>encode()</mark> / <mark>unescape()</mark> / <mark>escape()</mark> methods </u></h2>
    <pre class="syntax">
SYNTAX :    <strong>querystring</strong>.parse(<strong>querystring:str</strong>, <i class="openable">pairSep:str<div>
                <p> - separator between key/value pairs (Default: <mark>&</mark>) (ex: <mark>key1=val1&key2=val2</mark>) </p>
            </div></i>, <i class="openable">keyValSep:str<div>
                <p> - separator between key and value (Default: <mark>=</mark>) (ex: <mark>key=val</mark>) </p>
            </div></i>, <i class="openable">option:obj<div>
                <p> decodeURIComponent: <strong>fn</strong> - function used to decode precend-encoded characters (Default: <mark>querystring.unescape()</mark>) </p>
                <p> maxKeys: <strong>nr</strong> - maximum number of keys to parse (<mark>0</mark> = unlimited) (Default: <mark>1000</mark>) </p>  
            </div></i>)      // decodes a querystring URL-safe characters and returns a prototypeless object which represents the decoded query string    
                                                                                                   internally uses the <mark>unescape()</mark> method by default (does the same as <mark>querystring.decode()</mark>)    
            <strong>querystring</strong>.decode(<strong>querystring:str</strong>, <i class="openable">pairSep:str<div>
                <p> - separator between key/value pairs (Default: <mark>&</mark>) (ex: <mark>key1=val1&key2=val2</mark>) </p>
            </div></i>, <i class="openable">keyValSep:str<div>
                <p> - separator between key and value (Default: <mark>=</mark>) (ex: <mark>key=val</mark>) </p>
            </div></i>, <i class="openable">option:obj<div>
                <p> decodeURIComponent: <strong>fn</strong> - function used to decode precend-encoded characters (Default: <mark>querystring.unescape()</mark>) </p>
                <p> maxKeys: <strong>nr</strong> - maximum number of keys to parse (<mark>0</mark> = unlimited) (Default: <mark>1000</mark>) </p>  
            </div></i>)     // decodes a querystring URL-safe characters and returns a prototypeless object which represents the decoded query string    
                                                                                                   internally uses the <mark>unescape()</mark> method by default (does the same as <mark>querystring.parse()</mark>)    
            
            
            <strong>querystring</strong>.stringify(<strong>querystring:obj</strong>, <i class="openable">pairSep:str<div>
                <p> - separator between key/value pairs (Default: <mark>&</mark>) (ex: <mark>key1=val1&key2=val2</mark>) </p>
            </div></i>, <i class="openable">keyValSep:str<div>
                <p> - separator between key and value (Default: <mark>=</mark>) (ex: <mark>key=val</mark>) </p>
            </div></i>, <i class="openable">option:obj<div>
                <p> encodeURIComponent: <strong>fn</strong> - function used to convert URL-unsafe characterst to percent-encoded characters (Default: <mark>querystring.escape()</mark>) </p>
            </div></i>)  // encodes the passed object's key/values into URL-safe characters and returns the result as a query string 
                                                                                                   internally uses the <mark>querystring.escape()</mark> method by default (does the same as <mark>encode()</mark>) 
            <strong>querystring</strong>.encode(<strong>querystring:obj</strong>, <i class="openable">pairSep:str<div>
                <p> - separator between key/value pairs (Default: <mark>&</mark>) (ex: <mark>key1=val1&key2=val2</mark>) </p>
            </div></i>, <i class="openable">keyValSep:str<div>
                <p> - separator between key and value (Default: <mark>=</mark>) (ex: <mark>key=val</mark>) </p>
            </div></i>, <i class="openable">option:obj<div>
                <p> encodeURIComponent: <strong>fn</strong> - function used to convert URL-unsafe characterst to percent-encoded characters (Default: <mark>querystring.escape()</mark>) </p>
            </div></i>)     // encodes the passed object's key/values into URL-safe characters and returns the result as a query string 
                                                                                                   internally uses the <mark>querystring.escape()</mark> method by default (does the same as <mark>stringify()</mark>) 
            
            
            <strong>querystring</strong>.escape(<strong>str</strong>)                                                    // converts characters to URL-safe (percent-encoded) characters 
                                                                                          attempts to use <a href="../../01 HTML/Encoded Data in HTML/index.html#url" target="_blanc">JavaScript's <mark>encodeURIComponent()</mark> method [link]</a>
                                                                                          internally used by the <mark>querystring.stringify()</mark> and <mark>querystring.encode()</mark> methods    
             
            <strong>querystring</strong>.unescape(<strong>str</strong>)                                                  // converts URL-safe (percent-encoded) characters to normal characters 
                                                                                          attempts to use <a href="../../01 HTML/Encoded Data in HTML/index.html#url" target="_blanc">JavaScript's <mark>decodeURIComponent()</mark> method [link]</a>
                                                                                          internally used by the <mark>querystring.parse()</mark> and <mark>querystring.decode()</mark> methods    
    </pre>
    <details class="example">
      <summary> DEMO </summary>
      <pre>
    const querystring = require('querystring');
    
    var testQuerystring = 'chinese=ሖሌቃኜ&russian=ՄՋԤԪԡ&symbols=©֎۝۩';            
    var objQuerystring = {chinese:'ሖሌቃኜ', russian:'ՄՋԤԪԡ', symbols:'©֎۝۩'};             
    
// escape() / unescape() --------------------------------------------------------------// -! these methods shouldn't be used directly   
    var encoded = querystring.escape(testQuerystring);                                 // -> chinese%3D%E1%88%96%E1%8A%9C%26russian%3D%D5%84%D4%AA%D4%A1%26symbols%3D%DB%9D%DB%A9  
    querystring.unescape(encoded);                                                     // -> chinese=ሖኜ&russian=ՄԪԡ&symbols=۝۩ 
    
// parse() / decode() / stringify() / encode() ----------------------------------------
    var qs1 = querystring.stringify(objQuerystring);                                   // -> chinese=%E1%88%96%E1%8A%9C&russian=%D5%84%D4%AA%D4%A1&symbols=%DB%9D%DB%A9   // takes an object's key/value pairs and creates a querystring from it  
    var qs2 = querystring.encode(objQuerystring, '*', '.');                            // -> chinese.%E1%88%96%E1%8A%9C*russian.%D5%84%D4%AA%D4%A1*symbols.%DB%9D%DB%A9   // created querystring will have the '*' character as key/value pair separator and the '.' character as key value separator   
                                                                                         // the 'encode()' method does the same     
    var qsObj1 = querystring.parse(qs1)                                                // -> {chinese:'ሖኜ', russian:'ՄԪԡ', symbols:'۝۩'}                                // querystring parsed to an object 
    var qsObj1 = querystring.decode(qs2, '*', '.');                                    // -> {chinese:'ሖኜ', russian:'ՄԪԡ', symbols:'۝۩'}                                // interprets the '*' character as key/value pair separator and the '.' character as key value separator   
                                                                                         // the 'decode()' method does the same
    Object.getPrototypeOf(qsObj1);                                                     // -> null                                                                         // -! returned objects by 'parse()' or 'decode()' don't have any prototypes   
    Object.getPrototypeOf(qsObj2);                                                     // -> null                                                 
    </pre>
    </details>
    <details class="example">
      <summary> Example : </summary>
      <h4 style="color:darkblue;"><u> <mark>parse()</mark> / <mark>stringify()</mark> TEST </u></h4>
      <pre style="margin-bottom:1px;">
    const querystring = require('querystring');
    
    var testURL = 'v=OOevVQwQ-LM&list=PLo--uO_s4i5TGCbGzV9oBEDAN-aqDpXc4&index=144&t=0s';
    var testURL2 = 'v..OOevVQwQ-LM|list..PLo--uO_s4i5TGCbGzV9oBEDAN-aqDpXc4|index..144|t..0s';
    
// parse() ----------------------------------------------------------------------
    var qsParsed1 =  querystring.parse(testURL);
    var qsParsed2 =  querystring.parse(testURL2, '|', '..');                     // takes querystring key/value pair separarator as '|' and key value separator as '..'  
        console.log( qsParsed1 );
        console.log( qsParsed2 );
    
// decode() ---------------------------------------------------------------------
    var qsParsed3 = querystring.decode(testURL);                                 // the 'decode()' method does the same 
    var qsParsed4 = querystring.decode(testURL2, '|', '..');
        console.log( qsParsed3 );
        console.log( qsParsed4 );
    
// stringify() ------------------------------------------------------------------
    console.log( querystring.stringify(qsParsed1) );
    console.log( querystring.stringify(qsParsed2, '$$', '==') );                 // pased querystring's key/value pair separator will be '$$' and key value sparator will be '=='   
    
// encode() ---------------------------------------------------------------------
    console.log( querystring.encode(qsParsed3) );                                // the 'encode()' method does the same 
    console.log( querystring.encode(qsParsed4,'$$' ,'==') );
    </pre>
      <pre class="cmd" style="margin-top:1px;">
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\query string\01 parse() stringify() TEST> node main
        [Object: null prototype] {                                               // -! querystring.parse(testURL);
        v: 'OOevVQwQ-LM',
        list: 'PLo--uO_s4i5TGCbGzV9oBEDAN-aqDpXc4',
        index: '144',
        t: '0s'
        }
        [Object: null prototype] {                                               // -! querystring.parse(testURL2, '|', '..');
        v: 'OOevVQwQ-LM',
        list: 'PLo--uO_s4i5TGCbGzV9oBEDAN-aqDpXc4',
        index: '144',
        t: '0s'
        }
        [Object: null prototype] {                                               // -! querystring.decode(testURL);
        v: 'OOevVQwQ-LM',
        list: 'PLo--uO_s4i5TGCbGzV9oBEDAN-aqDpXc4',
        index: '144',
        t: '0s'
        }   
        [Object: null prototype] {                                               // -! querystring.decode(testURL2, '|', '..');
        v: 'OOevVQwQ-LM',
        list: 'PLo--uO_s4i5TGCbGzV9oBEDAN-aqDpXc4',
        index: '144',
        t: '0s'
        }
        v=OOevVQwQ-LM&list=PLo--uO_s4i5TGCbGzV9oBEDAN-aqDpXc4&index=144&t=0s            // -! querystring.stringify(qsParsed1);
        v==OOevVQwQ-LM$$list==PLo--uO_s4i5TGCbGzV9oBEDAN-aqDpXc4$$index==144$$t==0s     // -! querystring.stringify(qsParsed2, '$$', '==');
        v=OOevVQwQ-LM&list=PLo--uO_s4i5TGCbGzV9oBEDAN-aqDpXc4&index=144&t=0s            // -! querystring.encode(qsParsed3);
        v==OOevVQwQ-LM$$list==PLo--uO_s4i5TGCbGzV9oBEDAN-aqDpXc4$$index==144$$t==0s     // -! querystring.encode(qsParsed4,'$$' ,'==');
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\query string\01 parse() stringify() TEST>
    </pre>
      <!------------------------------------------------------------------------------------------------------------------->
      <hr>
      <h4 style="color:darkblue;"><u> <mark>escape()</mark> / <mark>unescape()</mark> TEST </u></h4>
      <pre style="margin-bottom:1px;">
    const querystring = require('querystring');
    const fs = require('fs');
    
// escape -----------------------------------------------------------------------
    var testQuerystring = 'key1=ॷিಔໝ&key2=ԤՎփ֎';
        console.log( testQuerystring );
    
    var encoded = querystring.escape(testQuerystring);                           // encodes to URL-safe format 
        console.log(encoded);
        
// unecape ----------------------------------------------------------------------
    var decoded = querystring.unescape(encoded);                                 // decodes URL-safe characters to normal characters 
        console.log( decoded );
    </pre>
      <pre class="cmd" style="margin-top:1px;">
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\query string\02 escape() unescape() TEST> node main                      
        key1=ॷিಔໝ&key2=ԤՎփ֎                                                                     // original querystring
        key1%3D%E0%A5%B7%E0%A6%BF%E0%B2%94%E0%BB%9D%26key2%3D%D4%A4%D5%8E%D6%83%D6%8E              // -! querystring.escape(testQuerystring);       // normal characters converted to URL-safe characters   
        key1=ॷিಔໝ&key2=ԤՎփ֎                                                                     // -! querystring.unescape(encoded);             // URL-safe characters converted to normal characters   
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\query string\02 escape() unescape() TEST>    
    </pre>
    </details>

    <br><br>
  </body>
</html>
