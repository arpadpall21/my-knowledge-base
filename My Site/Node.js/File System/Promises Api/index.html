<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title> Promises Api </title>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <link rel="stylesheet" href="../../../Assets/stylesPages.css">
  <script src="../../../Assets/scriptPages.js"></script>
</head>

<body>
  <h1> Promises Api </h1>
  <p> Updated ( 2019-10-11 / 2020-07-10 / 2024-10-18 )</p>
  <p class="sitenav">
    <a href="../../../index.html">MySite > </a>
    <a href="../../index.html">Node.js > </a>
    <a href="../index.html">File System > </a> Promises Api
  </p>
  <table class="table">
    <tr>
      <th style="width:30%;"> Method </th>
      <th> Description </th>
    </tr>
    <tr>
      <td colspan="2"> Read and Write files </td>
    </tr>
    <tr>
      <td>
        <lit>fsPromises</lit>.readFile(<strong>path:str|buf|urlObj|fileHandle</strong>, <strong>data:str|buf</strong>, <i class="openable">option:obj<div>
            <p> <mark>encoding</mark>: <strong>str</strong> - (Default: <mark>'utf-8'</mark>) </p>
            <p> <mark>flag</mark> <a href="https://nodejs.org/docs/latest/api/fs.html#file-system-flags" target="_blank">flag</a> </p>
            <p> <mark>abort</mark>: <reqval>abortSignal</reqval> (to abbort the process) </p>
          </div></i>)
      </td>
      <td> 
        - promise reads the targeted file (resolves to the file content)
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td>
        <lit>fsPromises</lit>.writeFile(<strong>path:str|buf|urlObj|fileHandle</strong>, <strong class="openable">data<div>
          <p> - <reqval>str</reqval> <reqval>Buffer</reqval> <reqval>TypedArray</reqval> <reqval>DataView</reqval> <reqval>AsyncIterable</reqval> <reqval>Iterable</reqval> <reqval>Stream</reqval> </p>
        </div></strong>, <a href="https://nodejs.org/docs/latest/api/fs.html#fspromiseswritefilefile-data-options" target="_blank">option:obj</a>)
      </td>
      <td> 
        - promise writes <reqval>data</reqval> to the targeted file (overwrites content, creates the file if not exist)
      </td>
    </tr>
    <tr>
      <td>
        <lit>fsPromises</lit>.appendFile(<strong>path:str|buf|urlObj|fileHandle</strong>, <strong>data:str|buf</strong>, <a href="https://nodejs.org/docs/latest/api/fs.html#fspromisesappendfilepath-data-options" target="_blank">option:obj</a>)
      </td>
      <td> 
        - promise appends (adds) <reqval>data</reqval> to the targeted file (creates the file if not exist)
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td>
        <lit>fsPromises</lit>.truncate(<strong>path:str|buf|urlObj</strong>, <reqval>len:nr</reqval>)
      </td>
      <td>
        - promise truncates the targeted file's length to length (<reqval>len</reqval>)
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td colspan="2"> Directories </td>
    </tr>
    <tr>
      <td>
        <lit>fsPromises</lit>.opendir(<strong>path:str|buf|urlObj</strong>, <a href="https://nodejs.org/docs/latest/api/fs.html#fspromisesopendirpath-options" target="_blank">option:obj</a>)
      </td>
      <td>
        - promise resolves into a <a href="https://nodejs.org/docs/latest/api/fs.html#class-fsdir" target="_blank">fsDir</a> (provides furhter info about the directory)
      </td>
    </tr>
    <tr>
      <td>
        <lit>fsPromises</lit>.readdir(<strong>path:str|buf|urlObj</strong>, <a href="https://nodejs.org/docs/latest/api/fs.html#fspromisesreaddirpath-options" target="_blank">option:obj</a>)
      </td>
      <td> 
        - promise reads directory content, resolve into an Array holding file names as strings 
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td>
        <lit>fsPromises</lit>.mkdir(<strong>path:str|buf|urlObj</strong>, <a href="https://nodejs.org/docs/latest/api/fs.html#fspromisesmkdirpath-options" target="_blank">option:obj</a>)
      </td>
      <td> 
        - promise creates a directory 
      </td>
    </tr>
    <tr>
      <td>
        <lit>fsPromises</lit>.mktemp(<strong>path:str|buf|urlObj</strong>, <a href="https://nodejs.org/docs/latest/api/fs.html#fspromisesmkdtempprefix-options" target="_blank">option:obj</a>)
      </td>
      <td> 
        - promise creates a directory (appends 6 random character after the passed directory name)
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td>
        <lit>fsPromises</lit>.rmdir(<strong>path:str|buf|urlObj</strong>, <a href="https://nodejs.org/docs/latest/api/fs.html#fspromisesrmdirpath-options" target="_blank">option:obj</a>)
      </td>
      <td> 
        - promise deletes the targeted directory (empty directories only, use <mark>rm()</mark> to recursively remove entire directory trees)
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td colspan="2"> Hard and Symbolic Links </td>
    </tr>
    <tr>
      <td> <lit>fsPromises</lit>.link(<strong>path:str|buf|urlObj</strong>, <strong>hardLink:str|buf|urlObj</strong>) </td>
      <td> 
        - promsie creates a hard-link of the original file (there are no directory hard-links)
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td> <lit>fsPromises</lit>.symlink(<strong>targetPath:str|buf|urlObj</strong>, <strong>symLinkPath:str|buf|urlObj</strong>) </td>
      <td>
        - promise creates a symbolic-link to the file or directory <br>
      </td>
    </tr>
    <tr>
      <td> <lit>fsPromises</lit>.readlink(<strong>symLinkPath:str|buf|urlObj</strong>, <i>encode:str</i>) </td>
      <td>
        - promise resolves to the original file location where the symbolic-link is pointing to 
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td colspan="2"> Other fs operations</td>
    </tr>
    <tr>
      <td>
        <lit>fsPromises</lit>.constants
      </td>
      <td> 
        - returns file system promises contstants (not a promise)
        <span id="browserSupport" title="updated : 2024-10-19">
          <span><i class="fab fa-node-js"></i> 16.17.0 </span>
          <span><i class="fab fa-node-js"></i> 18.4.0 </span>
        </span>
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td>
        <lit>fsPromises</lit>.copyFile(<strong>srcPath:str|buf|urlObj</strong>, <strong>destPath:str|buf|urlObj</strong>, <i class="openable">copyMode:nr<div>
            <p> - <mark>fs.constants.COPYFILE_FICLONE</mark> - (Default: <mark>0</mark>) </p>
            <p> - <mark>fs.constants.COPYFILE_EXCL</mark> - The copy operation will fail if dest already exists</p>
            <p> - <mark>fs.constants.COPYFILE_FICLONE</mark> - The copy operation will attempt to create a copy-on-write reflink. If the platform does not support copy-on-write, then a fallback copy mechanism is used </p>
            <p> - <mark>fs.constants.COPYFILE_FICLONE_FORCE</mark> - The copy operation will attempt to create a copy-on-write reflink. If the platform does not support copy-on-write, then the operation will fail </p>
          </div></i>)
      </td>
      <td> 
        - promise copies <u>(and renames)</u> files (cannot copy directories)
      </td>
    </tr>
    <tr>
      <td>
        <lit>fsPromises</lit>.cp(<strong>src:str|urlObj</strong>, <strong>dest:strurlObj</strong>, <a href="https://nodejs.org/docs/latest/api/fs.html#fspromisescpsrc-dest-options" target="_blank">options:obj</a>)
      </td>
      <td> 
        - promise copies <u>(and renames)</u> files or directories (can copy full directory structure recursively)
        <span id="browserSupport" title="updated : 2024-10-19">
          <span><i class="fab fa-node-js"></i> 16.7.0 </span>
        </span>
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td> <lit>fsPromises</lit>.rename(<strong>oldPath:str|buf|urlObj</strong>, <strong>newPath:str|buf|urlObj</strong>) </td>
      <td> 
        - promise moves <u>(and renames)</u> files or directories (recursively moves the whole directory)
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td> <lit>fsPromises</lit>.unlink(<strong>path:str|buf|urlObj</strong>) </td>
      <td> 
        - promise deletes file or symbolic-link <u>(cannot remove directories)</u>
      </td>
    </tr>
    <tr>
      <td> <lit>fsPromises</lit>.rm(<strong>path:str|buf|urlObj</strong>, <a href="https://nodejs.org/docs/latest/api/fs.html#fspromiseslstatpath-options" target="_blank">option:obj</a>) </td>
      <td> 
        - promise deletes files or directories
        <span id="browserSupport" title="updated : 2024-10-19">
          <span><i class="fab fa-node-js"></i> 14.14.0 </span>
        </span>
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td> <lit>fsPromises</lit>.access(<strong>path:str|buf|urlObj</strong>, <i class="openable">accessMode:nr<div>
        <p> - <a href="https://nodejs.org/docs/latest/api/fs.html#file-access-constants" target="_blank">file access modes </a> </p>
        <p> - Default: <mark>fs.constants.F_OK</mark> </p>
      </div></i>) </td>
      <td>
        - promise test if the file can be accessed with <reqval>accessMode</reqval> <br>
        - (fulfills = access mode allowed) (rejects = access mode denied)
      </td>
    </tr>
    <tr>
      <td>
        <lit>fsPromises</lit>.realpath(<strong>path:str|buf|urlObj</strong>, <i class="openable">option:obj<div>
            <p> encoding: <strong>str</strong> (Default: <mark>utf-8</mark>) </p>
          </div></i>)
      </td>
      <td>
        - promise resolves to the aboslute path of the targeted file or direcotry
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td>
        <lit>fsPromises</lit>.chmod(<strong>path:str|buf|urlObj</strong>, <i class="openable">mode:str|nr<div>
            <p> - on Windows only the writing permission can be changed (<mark>0o666</mark> read-write) (<mark>0o400</mark> read-only) </p>
            <p> - linux file access mechanism used (ex: <mark>744</mark> = owner has full permission but the gropu and others can read only) </p>
            <p> <mark>7</mark> - read, write, and execute </p>
            <p> <mark>6</mark> - read and write </p>
            <p> <mark>5</mark> - read and execute </p>
            <p> <mark>4</mark> - read only </p>
            <p> <mark>3</mark> - write and execute </p>
            <p> <mark>2</mark> - write only </p>
            <p> <mark>1</mark> - execute only </p>
            <p> <mark>0</mark> - no permission </p>
          </div></i>)
      </td>
      <td> 
        - promise modifies the unix-access
      </td>
    </tr>
    <tr>
      <td>
        <lit>fsPromises</lit>.lchmod(<strong>path:str|buf|urlObj</strong>, <i class="openable">mode:str|nr<div>
            <p> - on Windows only the writing permission can be changed (<mark>0o666</mark> read-write) (<mark>0o400</mark> read-only) </p>
            <p> - linux file access mechanism used (ex: <mark>744</mark> = owner has full permission but the gropu and others can read only) </p>
            <p> <mark>7</mark> - read, write, and execute </p>
            <p> <mark>6</mark> - read and write </p>
            <p> <mark>5</mark> - read and execute </p>
            <p> <mark>4</mark> - read only </p>
            <p> <mark>3</mark> - write and execute </p>
            <p> <mark>2</mark> - write only </p>
            <p> <mark>1</mark> - execute only </p>
            <p> <mark>0</mark> - no permission </p>
          </div></i>)
      </td>
      <td> 
        - does the same as <mark>chmod()</mark> but for symbolic-links gives information about the symbolic-link itself (not the referenced file)
      </td>
    </tr>
    <tr>
      <td> <lit>fsPromises</lit>.chown(<strong>path:str|buf|urlObj</strong>, <strong>uid:nr</strong>, <strong>gid:nr</strong>) </td>
      <td>
        - promise changes the owner and the group
      </td>
    </tr>
    <tr>
      <td> <lit>fsPromises</lit>.lchown(<strong>path:str|buf|urlObj</strong>, <strong>uid:nr</strong>, <strong>gid:nr</strong>) </td>
      <td>
        - does the same as <mark>chown()</mark> but for symbolic-links gives information about the symbolic-link itself (not the referenced file)
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td>
        <lit>fsPromises</lit>.stat(<strong>path:str|buf|urlObj</strong>, <a href="https://nodejs.org/docs/latest/api/fs.html#fspromisesstatpath-options" target="_blank">option:obj</a>)
      </td>
      <td> 
        - promise resolves to a <a href="https://nodejs.org/docs/latest/api/fs.html#class-fsstats" target="_blank">fsStat</a> (file stats object)
      </td>
    </tr>
    <tr>
      <td>
        <lit>fsPromises</lit>.lstat(<strong>path:str|buf|urlObj</strong>, <a href="https://nodejs.org/docs/latest/api/fs.html#fspromiseslstatpath-options" target="_blank">option:obj</a>)
      </td>
      <td> 
        - does the same as <mark>stat()</mark> but for symbolic-links gives information about the symbolic-link itself (not the referenced file)
      </td>
    </tr>
    <tr>
      <td>
        <lit>fsPromises</lit>.statfs(<strong>path:str|buf|urlObj</strong>, <a href="https://nodejs.org/docs/latest/api/fs.html#fspromisesstatfspath-options" target="_blank">option:obj</a>)
      </td>
      <td> 
        - promise resolves to a <a href="https://nodejs.org/docs/latest/api/fs.html#class-fsstatfs" target="_blank">statFs</a> (provides info about the mounted file system)
        <span id="browserSupport" title="updated : 2024-10-19">
          <span><i class="fab fa-node-js"></i> 18.15.0 </span>
          <span><i class="fab fa-node-js"></i> 19.6.0 </span>
        </span>
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td> <lit>fsPromises</lit>.utimes(<strong>path:str|buf|urlObj</strong>, <strong>atime:nr|str|Date</strong>, <strong>mtime:nr|str|Date</strong>) </td>
      <td> 
        - promse modifies the access and modified times for the targeted file
      </td>
    </tr>
    <tr>
      <td> <lit>fsPromises</lit>.lutimes(<strong>path:str|buf|urlObj</strong>, <strong>atime:nr|str|Date</strong>, <strong>mtime:nr|str|Date</strong>) </td>
      <td> 
        - same as <mark>utimes()</mark> but for symbolic-links modifies the symbolic-link itself (not the referenced file)
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td> <lit>fsPromises</lit>.watch(<strong>path:str|buf|urlObj</strong>, <a href="https://nodejs.org/docs/latest/api/fs.html#fspromiseswatchfilename-options" target="_blank">option:obj</a>) </td>
      <td> 
        - returns an <reqval>asyncInterator</reqval> that triggers an iteration if a change in detected in the targeted file or directory (can recursively check directory trees)
        <span id="browserSupport" title="updated : 2024-10-19">
          <span><i class="fab fa-node-js"></i> 14.18.0 </span>
          <span><i class="fab fa-node-js"></i> 15.9.0 </span>
        </span>
      </td>
    </tr>
  </table>
  <br>
  <table class="table">
    <caption> File descriptor approach (<mark>FileHandle</mark>) </caption>
    <tr>
      <th style="width:30%;"> Method </th>
      <th> Description </th>
    </tr>
    <tr>
      <td colspan="2"> Open / Close </td>
    </tr>
    <tr>
      <td>
        <lit>fsPromises</lit>.open(<strong>path:str|buf|urlObj</strong>, <a href="https://nodejs.org/docs/latest/api/fs.html#file-system-flags" target="_blank">flag</a>, <a href="https://nodejs.org/docs/latest/api/fs.html#file-access-constants" target="_blank">mode</a>)
      </td>
      <td>
        - promise resolves into a <reqval>fileHandle</reqval> that can be used to perform various fs operation on the targeted file
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td> <strong>fileHandle</strong>.close() </td>
      <td>
        - promise resolves into closing the <reqval>fileHandle</reqval>
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td colspan="2"> Read </td>
    </tr>
    <tr>
      <td>
        <strong>fileHandle</strong>.readFile(<i class="openable">option:obj<div>
            <p> - <mark>encoding</mark>: <strong>str</strong> - (Default: <mark>null</mark>) </p>
            <p> - <mark>signal</mark>: <strong>AbortSignal</strong> - allows aborting an in-progress readFile </AbortSignal>
          </div></i>)
      </td>
      <td>
        - promise reads the full content of the file <br>
        - resolves into <reqval>buf</reqval> (file content)
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td>
        <strong>fileHandle</strong>.read(<reqval>buf:buf|TypedArray|DataView</reqval>, <strong class="openable">offset:nr, length:nr, position:nr|bigInt<div>
            <p> - <strong>offset</strong> - where to start writing <reqval>buf</reqval> (Default: <mark>0</mark>) </p>
            <p> - <strong>length</strong> - number of bytes to read from the source (Default: <mark>0</mark>) </p>
            <p> - <strong>position</strong> - where to start reading the file (Default: <mark>0</mark>) </p>
          </div></strong>)
      </td>
      <td>
        - promise reads the file content and stores in <reqval>buf</reqval> <br>
        - resolves an object of <mark>{ bytesRead, buffer }</mark>
      </td>
    </tr>
    <tr>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td>
        <strong>fileHandle</strong>.read(<reqval class="openable">obj<div>
            <p> - <strong>buf:buf|TypedArray|DataView</strong> - buffer to write to </p>
            <p> - <mark>offset</mark> - where to start writing <strong>buf</strong> (Default: <mark>0</mark>) </p>
            <p> - <mark>length</mark> - number of bytes to read from the source (Default: <mark>0</mark>) </p>
            <p> - <mark>position</mark> - where to start reading the file (Default: <mark>0</mark>) </p>
          </div>
        </reqval>)
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td>
        <strong>fileHandle</strong>.read(<reqval>buf:buf|TypedArray|DataView</reqval>, <optval class="openable">obj<div>
            <p> - <mark>offset</mark> - where to start writing <strong>buf</strong> (Default: <mark>0</mark>) </p>
            <p> - <mark>length</mark> - number of bytes to read from the source (Default: <mark>0</mark>) </p>
            <p> - <mark>position</mark> - where to start reading the file (Default: <mark>0</mark>) </p>
          </div>
        </optval>)
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
        <strong>fileHandle</strong>.readv(<reqval>buf:buf[]|TypedArray[]|DataView[]</reqval>, <i class="openable">position:nr<div>
            <p> - <strong>position</strong> - where to start reading the file (Default: <mark>0</mark>) </p>
          </div></i>)
      </td>
      <td>
        - promise reads the file content and stores in <reqval>buf</reqval>s (multiple) <br>
        - resolves an object of <mark>{ bytesRead, buffer }</mark>
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td>
        <strong>fileHandle</strong>.readLines(<a href="https://nodejs.org/docs/latest/api/fs.html#filehandlereadlinesoptions" target="_blank">optionObj</a>)
      </td>
      <td>
        - promise resolves into a <reqval>readLines</reqval> (interface to read file content line by line)
        <span id="browserSupport" title="updated : 2024-10-19">
          <span><i class="fab fa-node-js"></i> 18.11.0 </span>
        </span>
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td>
        <strong>fileHandle</strong>.createReadStream(<a href="https://nodejs.org/docs/latest/api/fs.html#filehandlecreatereadstreamoptions" target="_blank">option:obj</a>)
      </td>
      <td>
        - creates and returns a <a href="https://nodejs.org/docs/latest/api/fs.html#class-fsreadstream" target="_blank">readableStream</a> that can be used to read the file content (not a promise)
        <span id="browserSupport" title="updated : 2024-10-19">
          <span><i class="fab fa-node-js"></i> 16.11.0 </span>
        </span>
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td colspan="2"> Write </td>
    </tr>
    <tr>
      <td>
        <strong>fileHandle</strong>.writeFile(<strong class="openable">data<div>
          <p> - <reqval>str</reqval> <reqval>Buffer</reqval> <reqval>TypedArray</reqval> <reqval>DataView</reqval> <reqval>AsyncIterable</reqval> <reqval>Iterable</reqval> <reqval>Stream</reqval> </p>
        </div></strong>, <i class="openable">option:obj<div>
            <p> - <mark>encode</mark> - (Default: <mark>utf-8</mark>) </p>
          </div>
        </i>)
      </td>
      <td>
        - prosmie writes <reqval>data</reqval> to a file (creates file (if not exist))
      </td>
    </tr>
    <tr>
      <td>
        <strong>fileHandle</strong>.appendFile()
      </td>
      <td>
        - same as <mark>writeFile()</mark>
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td>
        <strong>fileHandle</strong>.write(<strong>buf:buf|TypedArray|DataView</strong>, <strong class="openable">offset<div>
            <p> - position to start writing <reqval>buf</reqval> (Default: <mark>0</mark>) </p>
          </div></strong>, <strong class="openable">length, position<div>
            <p> - <reqval>length</reqval> - how many bites to write </p>
            <p> - <reqval>position</reqval> - position to start reading the file </p>
          </div></strong>
      </td>
      <td>
        - promise writes <reqval>buf</reqval> content into a file <br>
        - resolves an object of <mark>{ bytesRead, buffer }</mark>
      </td>
    </tr>
    <tr>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td>
        <strong>fileHandle</strong>.write(<strong>str</strong>, <i class="openable">position, encode<div>
            <p> - <reqval>position</reqval> - position to start reading the file </p>
            <p> - <reqval>encode</reqval> - (Default: <mark>utf-8</mark>)
          </div></i>)
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td>
        <strong>fileHandle</strong>.write(<strong>buf:buf|TypedArray|DataView</strong>, <reqval class="openable">option:obj<div>
            <p> - <mark>offset</mark> - position to start writing <reqval>buf</reqval> (Default: <mark>0</mark>)
            <p> - <mark>length</mark> - how many bites to write </p>
            <p> - <mark>position</mark> - position to start reading the file </p>
          </div>
        </reqval>)
      </td>
      <td>
        <span id="browserSupport" title="updated : 2024-10-19">
          <span><i class="fab fa-node-js"></i> 18.3.0 </span>
          <span><i class="fab fa-node-js"></i> 16.17.0 </span>
        </span>
      </td>
    </tr>
    <tr>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td>
        <strong>fileHandle</strong>.writev(<strong>buf:buf[]|TypedArray[]|DataView[]</strong>, <i class="openable">offset:nr<div>
          <p> - positio where to start writing (Default: <mark>null</mark>) </p>
        </div></i>)
      </td>
      <td>
        - promise writes <reqval>buf</reqval>s (multiple) content into a file <br>
        - resolves an object of <mark>{ bytesRead, buffer }</mark>
        <span id="browserSupport" title="updated : 2024-10-18">
          <span><i class="fab fa-node-js"></i> 12.9.0 </span>
        </span>
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td>
        <strong>fileHandle</strong>.createWriteStream(<a href="https://nodejs.org/docs/latest/api/fs.html#filehandlecreatewritestreamoptions" target="_blank">option:obj</a>)
      </td>
      <td>
        - creates and returns a <a href="https://nodejs.org/docs/latest/api/fs.html#class-fswritestream" target="_blank">writableStream</a> that can be used to write the file content (not a promise)
        <span id="browserSupport" title="updated : 2024-10-19">
          <span><i class="fab fa-node-js"></i> 16.11.0 </span>
        </span>
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td> <strong>fileHandle</strong>.truncate(<reqval>len:nr</reqval>) </td>
      <td>
        - promise truncates the targeted file to length (<reqval>len</reqval>)
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td colspan="2"> Other </td>
    </tr>
    <tr>
      <td> <strong>fileHandle</strong>.fd </td>
      <td> 
        - returns the file descriptor wrapped by the filehandle
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td>
        <strong>fileHandle</strong>.chmod(<i class="openable">mode:str|nr<div>
            <p> - on Windows only the writing permission can be changed (<mark>0o666</mark> read-write) (<mark>0o400</mark> read-only) </p>
            <p> - linux file access mechanism used (ex: <mark>744</mark> = owner has full permission but the gropu and others can read only) </p>
            <p> <mark>7</mark> - read, write, and execute </p>
            <p> <mark>6</mark> - read and write </p>
            <p> <mark>5</mark> - read and execute </p>
            <p> <mark>4</mark> - read only </p>
            <p> <mark>3</mark> - write and execute </p>
            <p> <mark>2</mark> - write only </p>
            <p> <mark>1</mark> - execute only </p>
            <p> <mark>0</mark> - no permission </p>
          </div></i>)
      </td>
      <td> 
        - promise modifies the unix-access
      </td>
    </tr>
    <tr>
      <td> <strong>fileHandle</strong>.chown(<strong>uid:nr</strong>, <strong>gid:nr</strong>) </td>
      <td> 
        - promise changes the owner and the group
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td>
        <strong>fileHandle</strong>.stat(<i class="openable">option:obj<div>
            <p> bigint: <strong>bol</strong> - the <a href="https://nodejs.org/docs/latest/api/fs.html#class-fsstats" target="_blank">Stats</a> object values will be represented as bigint values indtead of number (Default: <mark>false</mark>) </p>
          </div></i>)
      </td>
      <td> 
        - promise resolves into a <a href="https://nodejs.org/docs/latest/api/fs.html#class-fsstats" target="_blank">fsStats</a> (file stats)
      </td>
    </tr>
    <tr>
      <td> <strong>fileHandle</strong>.utimes(<strong>atime:nr|str|Date</strong>, <strong>mtime:nr|str|Date</strong>) </td>
      <td> 
        - promise sets the access and modified time of the targeted file
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td> <strong>fileHandle</strong>.sync() </td>
      <td> 
        - promise flushes all data to the open file descriptior <a href="https://nodejs.org/docs/latest/api/fs.html#filehandlesync" target="_blank">[link]</a>
      </td>
    </tr>
    <tr>
      <td> <strong>fileHandle</strong>.datasync() </td>
      <td> 
        - promise flushes all data to the open file descriptior (does not flush modified data) <a href="https://nodejs.org/docs/latest/api/fs.html#filehandledatasync" target="_blank">[link]</a>
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td colspan="2"> Events </td>
    </tr>
    <tr>
      <td>
        <reqval>filehandle.listener</reqval>('close', <reqval>fn</reqval>)
      </td>
      <td>
        - emitted when the <reqval>fileHandle</reqval> has been closed
        <span id="browserSupport" title="updated : 2024-10-18">
          <span><i class="fab fa-node-js"></i> 15.0.0 </span>
        </span>
      </td>
    </tr>
  </table>
  <h2 class="headerSection"> Notes : </h2>
  <details class="example" id="notes">
    <summary> Notes :</summary>
    <p> - the <mark>filehandle.chown()</mark>, <mark>filehandle.datasync()</mark> and <mark>filehandle.sync()</mark> methods are not tested here because they are POSIX specific [2019-10-18] </p>
  </details>
  <h2 class="headerSection"> Useful Links : </h2>

  <h2 class="headerSection"> Remember This : </h2>

  <h2 class="headerSection"> Description and Demonstration : </h2>
  <h3 class="header"> Read Write files <mark>readFile()</mark> / <mark>writeFile()</mark> / <mark>appendFile()</mark> / <mark>truncate()</mark> </h3>
  <details class="example">
    <summary> Example : </summary>
    <h4 style="color:darkblue;"><u> <mark>readFile()</mark> / <mark>writeFile()</mark> / <mark>appendFile()</mark> / <mark>truncate()</mark> TEST </u></h4>
    <pre style="margin-bottom:1px;">
    const fsPromises = require("fs").promises;
    
// readFile() -------------------------------------------------------------------------
    fsPromises.readFile('testFile1.txt')                                               // read the file content 
        .then((res) => { console.log(res) })                                           // file content returned here 
        .catch((rej) => { console.log(rej) });                                             // catch if error is thrown 
        
// writeFile() ------------------------------------------------------------------------
    fsPromises.writeFile('testFile2.txt', 'add this data')                             // (re)creates the file with the passed data 
        .catch((rej) => { console.log(rej) });                                             // catch if error is thrown 
    
// appendFine() -----------------------------------------------------------------------
    fsPromises.appendFile('testFile3.txt', 'new information')                          // appends the passed data to a file (file created if it does not exist yet)
        .catch((rej) => { console.log(rej) });                                             // catch if error is thrown 
    
// truncate() -------------------------------------------------------------------------
    fsPromises.truncate('testFile4.txt', 500)                                          // truncates the file content to 500 bytes (fills with /0 characters if content is shorter)
        .catch((rej) => { console.log(rej) });                                             // catch if error is thrown 
    </pre>
    <pre class="cmd" style="margin-top:1px;">
    PS D:\safe\code +\My Site\03 improuve\learn webdesign\04 node.js\file system\07 Promise API\02 readFile() writeFile() appendFile() truncate() TEST> node main 
// fsPromises.readFile('testFile1.txt') resolved promise data ------------------------
        &lt;Buffer 4c 6f 72 65 6d 20 49 70 73 75 6d 20 69 73 20 73 69 6d 70 6c 79 20 64 75 6d 6d 79 20 74 65 78 74 20 6f 66 20 74 68 65 20 70 72 69 6e 74 69 6e 67 20 61 ... 524 more bytes&gt;
    PS D:\safe\code +\My Site\03 improuve\learn webdesign\04 node.js\file system\07 Promise API\02 readFile() writeFile() appendFile() truncate() TEST>    
    </pre>
  </details>
  <!------------------------------------------------------------------------------------------------------------------>
  <hr>
  <h3 class="header"> Watching Files <mark>stat()</mark> / <mark>lstat()</mark> / <mark>utimes()</mark> </h3>
  <details class="example">
    <summary> Example : </summary>
    <h4 style="color:darkblue;"><u> <mark>stat()</mark> / <mark>lstat()</mark> / <mark>utimes()</mark> TEST </u></h4>
    <pre style="margin-bottom:1px;">
    const fsPromises = require("fs").promises;    
    const fs = require("fs");    
    
// stat() / lstat() -------------------------------------------------------------------
    fsPromises.stat('testSymbLink.txt')                                                // returns the stats of the file the symbolic link is pointing to ('testFile.txt)
        .then((res) => { console.log(res.isSymbolicLink()) })                          // Stats object returned here 
        .catch((rej) => { console.log(rej) });
        
    fsPromises.lstat('testSymbLink.txt')                                               // returns the stats of the symbolic-link itself 
        .then((res) => { console.log(res.isSymbolicLink()) })   // Stats object returned here 
        .catch((rej) => { console.log(rej) });
    
// utimes() ---------------------------------------------------------------------------
    fsPromises.utimes('testFile.txt', 60, 120)                                         // modifies the access and the modify time of the file 
        .catch((rej) => { console.log(rej) })
        .finally(() => {  
            console.log(fs.statSync('testFile.txt').atimeMs);                          // last access time 
            console.log(fs.statSync('testFile.txt').mtimeMs);                          // last modified time 
        });     
    </pre>
    <pre class="cmd" style="margin-top:1px;">
    PS D:\safe\code +\My Site\03 improuve\learn webdesign\04 node.js\file system\07 Promise API\03 stat() lstat() utimes() TEST> node main    
// fsPromises.stat('testSymbLink.txt') // resolved promise ----------------------------
        false                                                                          // the target file is referenced not the symbolic-link 
// fsPromises.lstat('testSymbLink.txt') // resolved promise ---------------------------
        true                                                                           // symbolic-link referenced   
// fsPromises.utimes('testFile.txt', 60, 120) -----------------------------------------
        1000000
        2000000
    PS D:\safe\code +\My Site\03 improuve\learn webdesign\04 node.js\file system\07 Promise API\03 stat() lstat() utimes() TEST>     
    </pre>
  </details>
  <!------------------------------------------------------------------------------------------------------------------>
  <hr>
  <h3 class="header"> Directories <mark>mkdir()</mark> / <mark>mkdtemp()</mark> / <mark>opendir()</mark> / <mark>readdir()</mark> / <mark>rmdir() </h3>
  <details class="example">
    <summary> Example : </summary>
    <h4 style="color:darkblue;"><u> <mark>mkdir()</mark> / <mark>mkdtemp()</mark> / <mark>readdir()</mark> / <mark>rmdir()</mark> TEST </u></h4>
    <pre style="margin-bottom:1px;">
    const fsPromises = require("fs").promises;
        
// mkdir() / mkdtemp() ----------------------------------------------------------------
    fsPromises.mkdir('testDirectory/subDirectory', {recursive:true})                   // directory and subdirectory created 
        .catch((rej) => { console.log(rej) });
    
    fsPromises.mkdtemp('testDir')                                                      // temporary directory created 
        .then((res) => { console.log(res) })                                           // -> 'testDiryf82Uc'           // created temporary directory name returned 
        .catch((rej) => { console.log(rej) });
    
// readdir() --------------------------------------------------------------------------
    fsPromises.readdir('./', {withFileTypes:true})                                     // reads the itmes in the current directory    
        .then((res) => { console.log(res) })                                           // [Dirent{...}, Dirent{...}]   // each item is represented by a Dirent object (withFileTypes option)
        .catch((rej) => { console.log(rej) });
    
// rmdir() ----------------------------------------------------------------------------
    fsPromises.rmdir('testDirectory2', {withFileTypes:true})                           // removes the targeted directory 
        .catch((rej) => { console.log(rej) });
    </pre>
    <pre class="cmd" style="margin-top:1px;">
    PS D:\safe\code +\My Site\03 improuve\learn webdesign\04 node.js\file system\07 Promise API\04 mkdir() mkdtemp() readdir() rmdir() TEST> node main   
// fsPromises.readdir('./', {withFileTypes:true}) // resolved promise -----------------
        [
        Dirent { name: 'main.js', [Symbol(type)]: 1 },
        Dirent { name: 'testDirectory2', [Symbol(type)]: 2 }
        ]
// fsPromises.mkdtemp('testDir') // resolved promise ----------------------------------
        testDiryf82Uc
    PS D:\safe\code +\My Site\03 improuve\learn webdesign\04 node.js\file system\07 Promise API\04 mkdir() mkdtemp() readdir() rmdir() TEST>    
    </pre>
  </details>
  <!------------------------------------------------------------------------------------------------------------------>
  <hr>
  <h3 class="header"> Hard-Link and Symbolic-Link <mark>link()</mark> / <mark>symlink()</mark> / <mark>readlink()</mark> </h3>
  <details class="example">
    <summary> Example : </summary>
    <h4 style="color:darkblue;"><u> <mark>link()</mark> / <mark>symlink()</mark> / <mark>readlink()</mark> TEST </u></h4>
    <pre style="margin-bottom:1px;">
    const fsPromises = require('fs').promises;
    
// link() -----------------------------------------------------------------------------
    fsPromises.link('testFile.txt', 'testDir/hardLink.txt')                            // creating a hard link in the subdirectory 
        .catch((rej) => { console.log(rej) });
        
// symlink() / readlink() -------------------------------------------------------------
    fsPromises.symlink('../testFile.txt', 'testDir/symbolicLink.txt')                  // creating a symbolic-link in the subdirectory
        .catch((rej) => { console.log(rej) });
    
    fsPromises.readlink('testDir/symbolicLink.txt')                                    // read the symbolic-link (where it is pointing to)
        .then((res) => { console.log(res) })                                           // -> '..\testFile.txt'
        .catch((rej) => { console.log(rej) });
    </pre>
    <pre class="cmd" style="margin-top:1px;">
    PS D:\safe\code +\My Site\03 improuve\learn webdesign\04 node.js\file system\07 Promise API\07 link() symlink() readlink() TEST> node main
// fsPromises.readlink('testDir/symbolicLink.txt') // resolved promise ---------------
        ..\testFile.txt
    PS D:\safe\code +\My Site\03 improuve\learn webdesign\04 node.js\file system\07 Promise API\07 link() symlink() readlink() TEST>    
    </pre>
  </details>
  <!------------------------------------------------------------------------------------------------------------------>
  <hr>
  <h3 class="header"> Other File Operations <mark>realpath()</mark> / <mark>access()</mark> / <mark>chmod()</mark> / <mark>copyFile()</mark> / <mark>rename()</mark> / <mark>unlink()</mark> </h3>
  <details class="example">
    <summary> Example : </summary>
    <h4 style="color:darkblue;"><u> <mark>realpath()</mark> / <mark>access()</mark> / <mark>chmod()</mark> TEST </u></h4>
    <pre style="margin-bottom:1px;">
    const fsPromises = require("fs").promises;
    
// realpath() -------------------------------------------------------------------------
    fsPromises.realpath('./')                                                          // resolves the current directory's path 
        .then((res) => { console.log(res) })                                           // -> 'D:\Safe\CODE +\My Site\03 Improuve\Learn WebDesign\04 Node.js\File System\07 Promise API\05 realpath() access() chmode() TEST'  
        .catch((rej) => { console.log(rej) });
        
// chmod() / access() -----------------------------------------------------------------
    fsPromises.chmod('testFile.txt', 0o400)                                            // file access changed to read-only 
        .catch((rej) => { console.log(rej) });
    
    fsPromises.access('testFile.txt', 2)                                               // write access check fails = promise is rejected 
        .catch((rej) => { console.log(rej) });
    </pre>
    <pre class="cmd" style="margin-top:1px;">
    PS D:\safe\code +\My Site\03 improuve\learn webdesign\04 node.js\file system\07 Promise API\05 realpath() access() chmode() TEST> node main  
// fsPromises.access('testFile.txt', 2) // rejected promise ---------------------------
        [Error: EPERM: operation not permitted, access 'D:\safe\code +\My Site\03 improuve\learn webdesign\04 node.js\file system\07 Promise API\05 realpath() access() chmode() TEST\testFile.txt'] {
        errno: -4048,
        code: 'EPERM',
        syscall: 'access',
        path: 'D:\\safe\\code +\\My Site\\03 improuve\\learn webdesign\\04 node.js\\file system\\07 Promise API\\05 realpath() access() chmode() TEST\\testFile.txt'
        }
// fsPromises.realpath('./') // resolved promise --------------------------------------
        D:\Safe\CODE +\My Site\03 Improuve\Learn WebDesign\04 Node.js\File System\07 Promise API\05 realpath() access() chmode() TEST
    PS D:\safe\code +\My Site\03 improuve\learn webdesign\04 node.js\file system\07 Promise API\05 realpath() access() chmode() TEST>
    </pre>
    <!------------------------------------------------------------------------------------------------------------------>
    <hr>
    <h4 style="color:darkblue;"><u> <mark>copyFile()</mark> / <mark>rename()</mark> / <mark>unlink()</mark> TEST </u></h4>
    <pre style="margin-bottom:1px;">
    const fsPromises = require("fs").promises;
    
// copyFile() -------------------------------------------------------------------------
    fsPromises.copyFile('testFile1.txt', 'testDir/testFileA.txt')                      // copies and renames the file to the destinations (overwrites the file at the destination (Default))
        .catch((rej) => { console.log(rej) });
        
// rename() ---------------------------------------------------------------------------
    fsPromises.rename('testFile2.txt', 'testDir/testFileB.txt')                        // moves and the file to the targeted directory and renames it 
        .catch((rej) => { console.log(rej) });
    
// unlink() ---------------------------------------------------------------------------
    fsPromises.unlink('testFile3.txt')                                                 // removes the targeted file 
        .catch((rej) => { console.log(rej) });
    </pre>
    <pre class="cmd" style="margin-top:1px;">
    PS D:\safe\code +\My Site\03 improuve\learn webdesign\04 node.js\file system\07 Promise API\06 copyFile() rename() unlink() TEST> node main  
    PS D:\safe\code +\My Site\03 improuve\learn webdesign\04 node.js\file system\07 Promise API\06 copyFile() rename() unlink() TEST>     
    </pre>
  </details>
  <!------------------------------------------------------------------------------------------------------------------>
  <hr>
  <h3 class="header"> Watching for file change / <mark>watch()</mark> method </h3>
  <details class="example">
    <summary> Example : </summary>
  <pre>
    import fsPromises from 'node:fs/promises';
    
    for await (const file of fsPromises.watch('./TEST', { recursive: true })) {   // triggers an iteration if any files are changed in the <mark>TEST</mark> directory
      file                                  // -> { eventType: 'rename', filename: 'sub_dir/some_file.txt' }
    }
  </pre>
  </details>
  <!------------------------------------------------------------------------------------------------------------------>
  <hr>
  <h2 class="headerExtra"><u> Using file descriptor (<mark>FileHandle</mark>) </u></h2>
  <p> - This approach opens a file descriptor with a specified access then does fs operations on the selected file </p>
  <details class="example">
    <summary> Example : </summary>
    <h4 class="header"> The <mark>fd</mark> / <mark>close()</mark> methods </h4>
    <pre style="margin-bottom:1px;">
    const fs = require('fs');
    
    fs.promises.open('testFile.txt')
        .then(function(fileHandle){
            console.log( fileHandle.fd );                                              // file descriptor opened and wrapped by the filehandle 
            fileHandle.close().catch((rej) => {console.log(rej)});                     // closes the file descriptor by using the Promise API 
        }).catch((rej) => {console.log(rej)});
        
    setTimeout(function(){                                                             // delayed half second to avoid race condition problems  
        console.log( fs.readFileSync(3, 'utf-8') );                                    // -! throws an error because file descriptor close by now   
    }, 500);    
    </pre>
    <pre class="cmd" style="margin-top:1px;">
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\file system\07 promise API\08 fd close() TEST> node main      
        3                                                                              // fileHandle.fd 
        fs.js:168                                                                      // -! error is thrown because the file descriptor is closed   
        return (stats[1/* mode */] & S_IFMT) === fileType;
                    ^
        TypeError: Cannot read property '1' of undefined
            at isFileType (fs.js:168:16)
            at Object.readFileSync (fs.js:345:16)
            at Timeout._onTimeout (D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\file system\07 promise API\08 fd close() TEST\main.js:10:21)
            at listOnTimeout (internal/timers.js:531:17)
            at processTimers (internal/timers.js:475:7)
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\file system\07 promise API\08 fd close() TEST>    
    </pre>
    <!------------------------------------------------------------------------------------------------------------------>
    <hr>
    <h4 class="header"> The <mark>writeFile()</mark> / <mark>appendFile()</mark> / <mark>write()</mark> / <mark>readFile()</mark> / <mark>read()</mark> methods </h4>
    <pre style="margin-bottom:1px;">
    const fsPromises = require('fs').promises;
    
// readFile() / writeFile() ------------------------------------------------------------
    fsPromises.open('testFile1.txt', 'w')                                               // file descriptor must support the subsequet file operation 
        .then(function(fileHandle){
            fileHandle.writeFile('write this data to the file \nand this one too')      // asynchronosly (re(writes the e
                .then(function(){
                    fsPromises.open('testFile1.txt', 'r')                               // new file descriptor had to be opened because once the file is written the file descriptor's position is at the end of the written data   
                        .then(function(fileHandle){
                            fileHandle.readFile('utf-8')                                // asynchronously reads the entire content of the file 
                                .then((res) => {console.log(res)})                      // -> data returned here 
                                .catch((rej) => {console.log(rej)});
                        }).catch((rej) => {console.log(rej)});                
                }).catch((rej) => {console.log(rej)});
        }).catch((rej) => {console.log(rej)});
        
// appendFile() / read() ----------------------------------------------------------------
    var buffer = new Buffer.alloc(10);
    
    fsPromises.open('testFile2.txt', 'a')                                                // file descriptor must support the subsequet file operation
        .then(function(fileHandle){
            fileHandle.appendFile('append this data!\n')                                 // appends data to the file's content 
                .then(function(){
                    fsPromises.open('testFile2.txt', 'r')                                // new file descriptor had to be opened because once the file is written the file descriptor's position is at the end of the written data
                        .then(function(fileHandle){
                            fileHandle.read(buffer, 0, 10, 2)                            // reading a portion of the file (10 characters from 2nd position)
                                .then((res) => {console.log(res.buffer.toString())})     // -> data returned here 
                                .catch((rej) => {console.log(rej)});
                        }).catch((rej) => {console.log(rej)});
                }).catch((rej) => {console.log(rej)});
        }).catch((rej) => {console.log(rej)});
        
// write() -------------------------------------------------------------------------------
    var buffer2 = new Buffer.alloc(17, 'kicsi kutya tarka');
    
    fsPromises.open('testFile3.txt', 'w')
        .then(function(fileHandle){
            fileHandle.write(buffer2)
                .then((res) => {console.log(res)})                                         // -> written data returned here  
                .catch((rej) => {console.log(rej)});
        }).catch((rej) => {console.log(rej)});
        
// truncate() ----------------------------------------------------------------------------
    fsPromises.open('testFile4.txt', 'r+')
        .then(function(fileHandle){
            fileHandle.truncate(100)                                                      // asynchronously truncates the file to 100 bytes  
                .catch((rej) => {console.log(rej)});  
        }).catch((rej) => {console.log(rej)});
    </pre>
    <pre class="cmd" style="margin-top:1px;">
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\file system\07 promise API\09 writeFile() appendFile() write() readFile() read() truncate() TEST> node main     
// filehandle.write(buffer2) // resolved promise -----------------------------------------
        {
        bytesWritten: 17,
        buffer: &lt;Buffer 6b 69 63 73 69 20 6b 75 74 79 61 20 74 61 72 6b 61&gt;
        }
// fileHandle.read(buffer, 0, 10, 2) // resolved promise ---------------------------------
        pend this
// fileHandle.readFile('utf-8') // resolved promise --------------------------------------
        write this data to the file
        and this one too
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\file system\07 promise API\09 writeFile() appendFile() write() readFile() read() truncate() TEST>    
    </pre>
    <!------------------------------------------------------------------------------------------------------------------>
    <hr>
    <h4 class="header"> The <mark>createReadStream()</mark> / <mark>createWriteStream()</mark> methods </h4>
    <pre>
    import fs from 'node:fs/promises';
    
// createReadStream() -------------------------------------------
    const fileDescriptor = await fs.open('./newFile.txt', 'r')
    const readStream = fileDescriptor.createReadStream()
    
    readStream.on('data', (data) => {
      data.toString()                           // -> file content...
    })
    
// createWriteStream() -------------------------------------------
    const fileDescriptor2 = await fs.open('./newFile2.txt', 'w')
    const writeStream = fileDescriptor2.createWriteStream()
    
    writeStream.write('Hello World', (err) => {
      if (err) console.error(err);
    })
    </pre>
    <!------------------------------------------------------------------------------------------------------------------>
    <hr>
    <h4 class="header"> The <mark>stat()</mark> / <mark>utimes()</mark> methods </h4>
    <pre style="margin-bottom:1px;">
    const fsPromises = require('fs').promises;
    
    fsPromises.open('testFile.txt', 'r+')
        .then(function(fileHandle){
            fileHandle.utimes(0, 0)                                                    // last access and last modified time updated here 
                .then(function(){
                    fileHandle.stat()                                                  // gets the Stats object 
                        .then((res) => {console.log(res)})                             // -> Stats {...}       // Stats object returned here  
                        .catch((rej) => {console.log(rej)});
                }).catch((rej) => {console.log(rej)});
        }).catch((rej) => {console.log(rej)});    
    </pre>
    <pre class="cmd" style="margin-top:1px;">
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\file system\07 promise API\10 stat() utimes() TEST> node main             
        Stats {
        dev: 3535051015,
        mode: 33206,
        nlink: 1,
        uid: 0,
        gid: 0,
        rdev: 0,
        blksize: 4096,
        ino: 844424930150422,
        size: 13,
        blocks: 0,
        atimeMs: 0,                                                                    // time updated 
        mtimeMs: 0,                                                                    // time updated
        ctimeMs: 1571406302260.8997,
        birthtimeMs: 1571405677597.835,
        atime: 1970-01-01T00:00:00.000Z,
        mtime: 1970-01-01T00:00:00.000Z,
        ctime: 2019-10-18T13:45:02.261Z,
        birthtime: 2019-10-18T13:34:37.598Z
        }
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\file system\07 promise API\10 stat() utimes() TEST>    
    </pre>
    <!------------------------------------------------------------------------------------------------------------------>
    <hr>
    <h4 class="header"> The <mark>chmod()</mark> methods </h4>
    <pre style="margin-bottom:1px;">
    const fsPromises = require('fs').promises;

    fsPromises.open('testFile.txt')
        .then(function(fileHandle){
            fileHandle.chmod(0o400)                                                    // file access restricted to read-only 
                .catch((rej) => {console.log(rej)});
        }).catch((rej) => {console.log(rej)});    
    </pre>
    <pre class="cmd" style="margin-top:1px;">
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\file system\07 promise API\11 chmod() TEST> node main   
    PS D:\safe\code +\my site\03 improuve\learn webdesign\04 node.js\file system\07 promise API\11 chmod() TEST>    
    </pre>
  </details>
  <br><br>
</body>

</html>