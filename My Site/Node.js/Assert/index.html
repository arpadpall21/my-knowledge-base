<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title> Assert </title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="../../Assets/stylesPages.css">
    <script src="../../Assets/scriptPages.js"></script>
  </head>
  <body>
    <h1> Assert </h1>
    <p> Updated: ( 2019-08-28 / 2025-02-06 )</p>
    <nav class="sitenav">
      <a href="../../index.html">MySite > </a>
      <a href="../index.html">Node.js > </a> Assert
    </nav>
    <table class="table">
      <tr>
        <th> Methods </th>
        <th> Description </th>
      </tr>
      <tr>
        <td>
          <lit>assert</lit>(<strong>val:any</strong>, <i class="openable">message:str|err<div>
              <p> - <optval>str</optval>: AssertionError with message <optval>message</optval> </p>
              <p> - <optval>err</optval> throws the passed error </p>
            </div></i>)
        </td>
        <td>
          - if <reqval>val</reqval> evaluates falsy throws an AssertionError (or <optval>message</optval>)
        </td>
      </tr>
      <tr>
        <td>
          <lit>assert</lit>.ok(<strong>val:any</strong>, <i class="openable">message:str|err<div>
              <p> - <optval>str</optval>: AssertionError with message <optval>message</optval> </p>
              <p> - <optval>err</optval> throws the passed error </p>
            </div></i>)
        </td>
        <td>
          - if <reqval>val</reqval> evaluates falsy throws an AssertionError (or <optval>message</optval>)
        </td>
      </tr>
      <tr>
        <td>|</td>
        <td></td>
      </tr>
      <tr>
        <td>
          <lit>assert</lit>.match(<strong>val:str</strong>, <reqval>regExp</reqval>, <i class="openable">message:str|err<div>
              <p> - <optval>str</optval>: AssertionError with message <optval>message</optval> </p>
              <p> - <optval>err</optval> throws the passed error </p>
            </div></i>)
        </td>
        <td>
          - does nothing if <reqval>val</reqval> matches <reqval>regExp</reqval>, otherwise throws an AssertionError <br>
          <span id="browserSupport" title="updated : 2025-02-07">
            <span><i class="fab fa-node-js"></i> 16 </span>
          </span>
        </td>
      </tr>
      <tr>
        <td>
          <lit>assert</lit>.doesNotMatch(<strong>val:str</strong>, <reqval>regExp</reqval>, <i class="openable">message:str|err<div>
              <p> - <optval>str</optval>: AssertionError with message <optval>message</optval> </p>
              <p> - <optval>err</optval> throws the passed error </p>
            </div></i>)
        </td>
        <td>
          - does nothing if <reqval>val</reqval> does not matche <reqval>regExp</reqval>, otherwise throws an AssertionError <br>
          <span id="browserSupport" title="updated : 2025-02-07">
            <span><i class="fab fa-node-js"></i> 16 </span>
          </span>
        </td>
      </tr>
      <tr>
        <td>|</td>
        <td></td>
      </tr>
      <tr>
        <td>
          <lit>assert</lit>.fail(<i class="openable">message:str|err<div>
              <p> - <optval>str</optval>: AssertionError with message <optval>message</optval> </p>
              <p> - <optval>err</optval> throws the passed error </p>
            </div></i>)
        </td>
        <td>
          - throws an AssertionError (optionally <optval>message</optval>)
        </td>
      </tr>
      <tr>
        <td> <lit>assert</lit>.ifError(<strong>val:any</strong>) </td>
        <td>
          - throws an AssertionError if <reqval>val</reqval> is not <mark>undefined</mark> or <mark>null</mark>
        </td>
      </tr>
      <tr>
        <td>|</td>
        <td></td>
      </tr>
      <tr>
        <td>
          <lit>assert</lit>.strictEqual(<strong>val1:any</strong>, <strong>val2:any</strong>, <i class="openable">message:str|err<div>
              <p> - <optval>str</optval>: AssertionError with message <optval>message</optval> </p>
              <p> - <optval>err</optval> throws the passed error </p>
            </div></i>)
        </td>
        <td>
          - does nothing if <reqval>val1</reqval> and <reqval>val2</reqval> are strict equal, throws an AssertionError otherwise <br>
          - cannot compare objects (throws an AssertionError) <br>
          - there's also a legacy <mark>equal()</mark> version that does loose comparison which is discouraged to use
        </td>
      </tr>
      <tr>
        <td>
          <lit>assert</lit>.notStrictEqual(<strong>val1:any</strong>, <strong>val2:any</strong>, <i class="openable">message:str|err<div>
              <p> - <optval>str</optval>: AssertionError with message <optval>message</optval> </p>
              <p> - <optval>err</optval> throws the passed error </p>
            </div></i>)
        </td>
        <td>
          - does nothing if <reqval>val1</reqval> and <reqval>val2</reqval> are strict not equal, throws an AssertionError otherwise <br>
          - cannot compare objects (throws an AssertionError) <br>
          - there's also a legacy <mark>notEqual()</mark> version that does loose comparison which is discouraged to use
        </td>
      </tr>
      <tr>
        <td>|</td>
        <td></td>
      </tr>
      <tr>
        <td>
          <lit>assert</lit>.deepStrictEqual(<strong>val:any</strong>, <strong>val:any</strong>, <i class="openable">message:str|err<div>
              <p> - <optval>str</optval>: AssertionError with message <optval>message</optval> </p>
              <p> - <optval>err</optval> throws the passed error </p>
            </div></i>)
        </td>
        <td>
          - does nothing if <reqval>val1</reqval> and <reqval>val2</reqval> are strict equal, throws an AssertionError otherwise <br>
          - compares objects (only enumerable own properties are considered) <br>
          - there's also a legacy <mark>deepEqual()</mark> version that does loose comparison which is discouraged to use
        </td>
      </tr>
      <tr>
        <td>
          <lit>assert</lit>.notDeepStrictEqual(<strong>val:any</strong>, <strong>val:any</strong>, <i class="openable">message:str|err<div>
              <p> - <optval>str</optval>: AssertionError with message <optval>message</optval> </p>
              <p> - <optval>err</optval> throws the passed error </p>
            </div></i>)
        </td>
        <td>
          - does nothing if <reqval>val1</reqval> and <reqval>val2</reqval> are strict not equal, throws an AssertionError otherwise <br>
          - compares objects (only enumerable own properties are considered) <br>
          - there's also a legacy <mark>motDeepEqual()</mark> version that does loose comparison which is discouraged to use
        </td>
      </tr>
      <tr>
        <td>
          <lit>assert</lit>.partialDeepStrictEqual(<strong>val:any</strong>, <strong>val:any</strong>, <i class="openable">message:str|err<div>
              <p> - <optval>str</optval>: AssertionError with message <optval>message</optval> </p>
              <p> - <optval>err</optval> throws the passed error </p>
            </div></i>)
        </td>
        <td>
          - does nothing if <reqval>val2</reqval> doesn't have any different members that <reqval>val1</reqval> <br>
          - <reqval>val2</reqval> allowed to have partial members (ex: <mark>assert.partialDeepStrictEqual({ a: 1, b: 2 }, { a: 1 })</mark>) <br>
          - compares objects (only enumerable own properties are considered) <br>
          <span id="browserSupport" title="updated : 2025-02-07">
            <span><i class="fab fa-node-js"></i> 23.7 experimental </span>
          </span>
        </td>
      </tr>
      <tr>
        <td>|</td>
        <td></td>
      </tr>
      <tr>
        <td>
          <lit>assert</lit>.throws(<strong>fn</strong>, <i>Class|RegExp|obj|err|fn</i>, <i class="openable">message:str|err<div>
              <p> - <optval>str</optval>: AssertionError with message <optval>message</optval> </p>
              <p> - <optval>err</optval> throws the passed error </p>
            </div></i>)
        </td>
        <td>
          - does nothing if the <strong>fn</strong> throws an error or (throws that matches <i>Class|RegExp|obj|err|fn</i>), otherwise throws an AssertionError<br>
        </td>
      </tr>
      <tr>
        <td>
          <lit>assert</lit>.doesNotThrow(<strong>fn</strong>, <i>Class|RegExp|obj|err|fn</i>, <i class="openable">message:str|err<div>
              <p> - <optval>str</optval>: AssertionError with message <optval>message</optval> </p>
              <p> - <optval>err</optval> throws the passed error </p>
            </div></i>)
        </td>
        <td>
          - does nothing if the <strong>fn</strong> does not throw anything (or not throws anything that matches <i>Class|RegExp|obj|err|fn</i>), otherwise throws an AssertionError<br>
        </td>
      </tr>
      <tr>
        <td>
          <lit>assert</lit>.rejects(<strong>asyncFn|promise</strong>, <i>Class|RegExp|obj|err|fn</i>, <i class="openable">message:str|err<div>
              <p> - <optval>str</optval>: AssertionError with message <optval>message</optval> </p>
              <p> - <optval>err</optval> throws the passed error </p>
            </div></i>)
        </td>
        <td>
          - awaits the <strong>asyncFn|promise</strong> <br>
          - does nothing if the <strong>asyncFn|promise</strong> is rejected (or rejected anything that matches <i>Class|RegExp|obj|err|fn</i>), otherwise throws an AssertionError<br>
          <span id="browserSupport" title="updated : 2025-02-07">
            <span><i class="fab fa-node-js"></i> 10 </span>
          </span>
        </td>
      </tr>
      <tr>
        <td>
          <lit>assert</lit>.doesNotRejects(<strong>asyncFn|promise</strong>, <i>Class|RegExp|obj|err|fn</i>, <i class="openable">message:str|err<div>
              <p> - <optval>str</optval>: AssertionError with message <optval>message</optval> </p>
              <p> - <optval>err</optval> throws the passed error </p>
            </div></i>)
        </td>
        <td>
          - awaits the <strong>asyncFn|promise</strong> <br>
          - does nothing if the <strong>asyncFn|promise</strong> is resolved (or resolved anything that matches <i>Class|RegExp|obj|err|fn</i>), otherwise throws an AssertionError<br>
          <span id="browserSupport" title="updated : 2025-02-07">
            <span><i class="fab fa-node-js"></i> 10 </span>
          </span>
        </td>
      </tr>
      <tr>
        <td>|</td>
        <td></td>
      </tr>
      <tr>
        <td colspan="2"> AssertionError </td>
      </tr>
      <tr>
        <td>
          <lit>assert</lit>.<a href="https://nodejs.org/docs/latest/api/assert.html#class-assertassertionerror" target="_blank">AssertionError</a>
        </td>
        <td>
          - describes comparison differences
        </td>
      </tr>
    </table>
    <h2 class="headerSection"> Notes : </h2>
    
    <h2 class="headerSection"> Useful Links : </h2>
    <p><a href="https://nodejs.org/dist/latest-v12.x/docs/api/assert.html" target="_blanc"> Node.js Assertion Testing </a></p>
    <h2 class="headerSection"> Remember This : </h2>

    <h2 class="headerSection"> Description and Demonstration : </h2>
    <p> - the assertion module provides functionalities to verify invariants, it throws an AssertionError instance (craches the process) if the assertion fails <u>otherwise does nothing</u></p>
    <p> - legacy assert used lose comparison (<mark>==</mark>), strict mode <u>(supported from v9.9.0)</u> usess strict comparison (<mark>====</mark>) </p>
    <pre>
// strict import ------------
    import { strict as assert } from 'node:assert':
    import assert from 'node:assert/strict';
    
    assert.deepEqual(['1', 2], [1, 2]);                 // throws an AssertionError
    
// legacy import ------------
    import assert from 'node:assert';                 // -! legacy assert uses loose comparison (<mark>==</mark>) so it's discouraged to use
    
    assert.deepEqual(['1', 2], [1, 2]);               // does not throw
    </pre>
    <hr>
    <!-------------------------------------------------------------------------------------------------------------------------------->
    <h3 class="header"> The <mark>assert()</mark> / <mark>ok()</mark> / <mark>match()</mark> / <mark>doesNotMatch()</mark> / <mark>fail()</mark> / <mark>ifError()</mark> / <mark>strictEqual()</mark> / <mark>notStrictEqual()</mark> / methods </h3>
    <details class="example">
      <summary> Example : </summary>
      <h4 class="header"> The <mark>assert()</mark> / <mark>ok()</mark> methods </h4>
      <pre>
    import assert from 'node:assert/strict'; 
    
    assert('ok');                               // doesn't do anything
    
    assert(0, Error("It's 0"))                  // throws Error("It's 0")
    assert(0, "It's 0")                           // throws AssertionError with the passed message
    
    assert.ok(0, Error("It's 0"))               // does the same as above
    assert.ok(0, "It's 0")
      </pre>
      <hr>
      <!-------------------------------------------------------------------------------------------------------------------------------->
      <h4 class="header"> The <mark>match()</mark> / <mark>doesNotMatch()</mark> methods </h4>
      <pre>
    import assert from 'node:assert/strict';
    
    assert.match('Hello Wordl!', /!/)               // does nothing
    assert.match('Hello Wordl', /!/)                // throws AssertionError
    
    assert.doesNotMatch('Hello Wordl', /!/)               // does nothing
    assert.doesNotMatch('Hello Wordl!', /!/)              // throws AssertionError
      </pre>
      <hr>
      <!-------------------------------------------------------------------------------------------------------------------------------->
      <h4 class="header"> The <mark>fail()</mark> / <mark>ifError()</mark> methods </h4>
      <pre>
    import assert from 'node:assert/strict';
    
    assert.fail();                               // throws AssertionError
    assert.fail('some error');                   // throws AssertionError with 'some error' message
    
    
    assert.ifError(undefined)                     // does nothing
    assert.ifError(null)
    
    assert.ifError('ok')                          // throws AssertionError      
      </pre>
      <hr>
      <!-------------------------------------------------------------------------------------------------------------------------------->
      <h4 class="header"> The <mark>strictEqual()</mark> / <mark>notStrictEqual()</mark> methods </h4>
      <pre>
    import assert from 'node:assert/strict';
    
    assert.strictEqual('123', '123')                // does nothing
    
    assert.strictEqual('123', 123)                  // throws AssertionError
    assert.strictEqual({ a: 21 }, { a: 21 })            // throws AssertionError (cannot compare objects)
    
    
    assert.notStrictEqual(123, 1234)              // does nothing
    
    assert.notStrictEqual(123, 123)               // throws AssertionError
    assert.strictEqual({ a: 21 }, { a: 22 })            // throws AssertionError (cannot compare objects)
      </pre>
    </details>
    <hr>
    <!-------------------------------------------------------------------------------------------------------------------------------->
    <h3 class="header"> The <mark>deepStrictEqual()</mark> / <mark>notDeepStrictEqual()</mark> / <mark>partialDeepStrictEqual()</mark> methods </h3>
    <details class="example">
      <summary> Example : </summary>
      <pre>
    import assert from 'node:assert/strict';
    
    assert.deepStrictEqual(               // does nothing 
      { a: 21, b: { x: [1]} },
      { a: 21, b: { x: [1]} },
    )
    assert.deepStrictEqual(               // throws an AssertionError
      { a: 21, b: { x: [1]} },
      { a: 21, b: { x: ['1']} },
    )
    
    assert.notDeepStrictEqual(               // does nothing 
      { a: 21, b: { x: [1]} },
      { a: 21, b: { x: ['1']} },
    )
    assert.notDeepStrictEqual(                 // throws an AssertionError
      { a: 21, b: { x: [1]} },
      { a: 21, b: { x: [1]} },
    )
    
// partialDeepStrictEqual() ----------------------
    assert.partialDeepStrictEqual(                // does nothing
      { a: 1, b: 2 },
      { a: 1, b: 2 },
    )
    assert.partialDeepStrictEqual(                // does nothing
      { a: 1, b: 2 },
      { a: 1 },
    )
    assert.partialDeepStrictEqual(                // throws an Assertion because the 2nd object has a different property/value
      { a: 1, b: 2 },
      { a: 1, b: '2' },
    )
    assert.partialDeepStrictEqual(                // throws an Assertion because the 2nd object has a different property/value
      { a: 1, b: 2 },
      { a: 1, c: 3 },
    )
      </pre>
    </details>
    <hr>
    <!-------------------------------------------------------------------------------------------------------------------------------->
    <h3 class="header"> The <mark>throws()</mark> / <mark>doesNotThrow()</mark> / <mark>rejects()</mark> / <mark>doesNotReject()</mark> methods </h3>
    <details class="example">
      <summary> Example : </summary>
      <h4 class="header"> The <mark>throws()</mark> / <mark>doesNotThrow()</mark> methods </h4>
      <pre>
    import assert from 'node:assert/strict';
    
    function fn1() { throw Error('some error') }
    function fn2() { throw 'some error' }
    function fn3() { return 'ok' }
    
    
    assert.throws(fn1, Error('some error'))             // does nothing
    assert.throws(fn1, Error('another error'))          // throws an AssertionError (error has different message)
    
    assert.throws(fn2, /error/)                             // does nothing (regex matches the thrown string)
    
    assert.doesNotThrow(fn3)                              // does nothing
    assert.throws(fn3)                                    // throws an AssertionError
      </pre>
      <!------------------------------------------------------------------------------------------->
      <hr>
      <h4 class="header"> The <mark>throws()</mark> / <mark>doesNotThrow()</mark> methods </h4>
      <pre>
    import assert from 'node:assert/strict';
    
    assert.rejects(Promise.reject('rejected data'));                               // does nothing
    assert.rejects(Promise.resolve(21), null, 'some message');                     // throws an AssertionError (promise resolved)
    
    assert.rejects(Promise.reject({p1:'val'}), {p1:'val'});                        // no AssertionError is thrown
    assert.rejects(Promise.reject(21), () => true);                                // no AssertionError is thrown
    
    
    assert.doesNotReject(Promise.resolve('resolved data'));                        // does nothing
    assert.doesNotReject(Promise.reject('rejected data'));                         // throws an AssertionError
      </pre>
    </details>

    <br><br>
  </body>
</html>