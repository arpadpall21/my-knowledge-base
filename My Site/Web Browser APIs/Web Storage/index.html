<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title> Web Storage </title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="../../Assets/stylesPages.css">
    <script src="../../Assets/scriptPages.js"></script>
  </head>
  <body>
    <h1> Web Storage </h1>
    <p> Updated: ( 2018-06-11 / 2018-06-16 / 2020-12-20 / 2022-01-30 )</p>
    <nav class="sitenav"> <a href="../../index.html">MySite > </a>
      <a href="../index.html"> Web Browser APIs > </a> Web Storage
    </nav>
    <table class="table">
      <caption>
        <span class="browserSupport" title="updated : 2020-07-21">
          <span><i class="fab fa-chrome"></i> 4 </span>
          <span><i class="fab fa-firefox"></i> 3.5 </span>
          <span><i class="fab fa-opera"></i> 11.5 </span>
          <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 8 </span>
          <span><i class="fab fa-safari"></i> 4 </span>
        </span>
      </caption>
      <tr>
        <th style="width:30%;"> Method / Property </th>
        <th> Description </th>
      </tr>
      <tr>
        <td> sessionStorage </td>
        <td> - interface provides access to the sesssion storage of the <u>current origin</u> </td>
      </tr>
      <tr>
        <td> localStorage </td>
        <td> - interface provides access to the local storage of the <u>current origin</u> </td>
      </tr>
      <tr>
        <td>|</td>
        <td></td>
      </tr>
      <tr>
        <td> <em>localStorage|sessionStorage</em>.setItem(<strong>key:str</strong>, <strong>val</strong>) </td>
        <td> - adds a new or updates an existing storage key/value pair <u>(the value (<strong>val</strong>) is converted to string)</u> </td>
      </tr>
      <tr>
        <td> <em>localStorage|sessionStorage</em>.length </td>
        <td> - returns the number of items stored in the storage </td>
      </tr>
      <tr>
        <td>|</td>
        <td></td>
      </tr>
      <tr>
        <td> <em>localStorage|sessionStorage</em>.getItem(<strong>key:str</strong>) </td>
        <td> - returns the specified storage key's value <u>as a string</u> </td>
      </tr>
      <tr>
        <td> <em>localStorage|sessionStorage</em>.key(<strong>index:nr</strong>) </td>
        <td> - returns indexed key from the storage (order not garanteed) </td>
      </tr>
      <tr>
        <td>|</td>
        <td></td>
      </tr>
      <tr>
        <td> <em>localStorage|sessionStorage</em>.clear() </td>
        <td> - removes all items form the storage </td>
      </tr>
      <tr>
        <td> <em>localStorage|sessionStorage</em>.removeItem(<strong>key:str</strong>) </td>
        <td> - deletes the specified storage item </td>
      </tr>
    </table>
    <h2 class="headerSection"> Notes : </h2>

    <h2 class="headerSection"> Useful Links : </h2>
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API" target="_blank"> Web Storage API (developer.mozilla.org) </a></p>
    <p><a href="https://www.w3schools.com/html/html5_webstorage.asp" target="_blank"> Web Storage (w3schools.com) </a></p>
    <h2 class="headerSection"> Remember This : </h2>
    <p> - local and session storage data is stored as <u>string</u> data type </p>
    <p> - the data is stored per origin, this also means multiple sites within the same origin share the same <mark>localStorage</mark> <u>(the <mark>sessionStorage</mark> is not shared, each site has its own individual session storage within the same origin)</u> </p>
    <h2 class="headerSection"> Description and Demonstration : </h2>
    <p> - the Web Storage API allows us to store data locally, the stored data is <u>never sents to the server</u> and the size can be up to 10MB <u>per origin</u> </p>
    <p> - the data is <u>stored as string</u> and unique to each origin </p>
    <p> - Web Storage provides 2 interfaces to store data locally: </p>
    <p style="text-indent:30px;"> - <mark>sessionStorage</mark> stores the data for the session (page can be reloaded or restored) the data will be lost when the <u>borwser or the tab</u> is closed (each page has its own individual session storage within the same origin) </p>
    <p style="text-indent:30px;"> - <mark>localStorage</mark> stores the data permanently (untill maunally deleted) (local storage is shared among sites within the same origin) </p>
    <details class="example">
      <summary> DEMO </summary>
      <pre>
// sessionStorage works the same way but the data is lost when the session is closed -
    
// the data is stored as string -------------------------------------------------------
    localStorage.setItem("myBolean", false);
    
    localStorage.getItem("bol");                                                       // "false" 
    typeof localStorage.getItem("bol");                                                // -> string        // -! stored as string careful ('false' = true)    
    
// setItem() / length -----------------------------------------------------------------
    localStorage.setItem('item_1', 11);                                                // sets a new key/value pair in the localStorage 
    localStorage.item_2 = 22;                                                            // does the same as above
    localStorage['item_3'] = 33;                                                         // does the same as above 
    
    localStorage.length;                                                               // -> 3              // number of key/value pair stored in localStorage    
    
// getItem() / key() ------------------------------------------------------------------
    localStorage.getItem('item_1');                                                    // -> '11'
    localStorage.item_2;                                                               // -> '22'
    localStorage['item_3'];                                                            // -> '33'
    
    localStorage.key(0);                                                               // -> 'item_2'       // return order not garanteed (not an iterator object)    
    localStorage.key(1);                                                               // -> 'item_1'
    localStorage.key(2);                                                               // -> 'item_3'
    
// removeItem() / clear() -------------------------------------------------------------
    localStorage.removeItem('item_2');                                                 // removes the 'item_2' item from the storage   
    localStorage.item_2;                                                               // -> undefined
    
    localStorage.clear();                                                              // removes everything from the localStorage
    localStorage.length;                                                               // -> 0
    </pre>
      <pre class="formula">
// Checking if the user's browser supports Web Storage

    if (window.Storage) {
        // code to be fired if storage is supported
    }
    else {
        // code to be fired is storage is not supported
    }
    </pre>
    </details>
    <details class="example">
      <summary> Example : </summary>
      <h4><u> Simple storage Demo </u></h4>
      <input id="sessionData" type="text" placeholder="session data">
      <button onmouseup="storeSessionData()"> Store data into session storage </button>
      <button onmouseup="getDataSession()"> Get Data from session storage </button>
      <span> = session data is saved, browser keeps the data when the page is reloaded (datad lost upon tap or browser close) </span>
      <br>
      <input id="localData" type="text" placeholder="local data">
      <button onmouseup="storeLocalData()"> Store data into locale storage </button>
      <button onmouseup="getDataLocal()"> Get Data from locale storage </button>
      <span> = local data is permanently saved </span>
      <script>
    if (window.Storage) {
// sessionStorge
        var sessionContainer;
        function storeSessionData() {
            sessionContainer = document.getElementById("sessionData").value;        // get field's value
            window.sessionStorage.input_A = sessionContainer;                       // store the recovered data into the session storage
        }
        function getDataSession() { 
            alert("Session Storage Data = " + sessionStorage.input_A);              // call session data
        }

// localeStorage
        var localeContainer;
        function storeLocalData() {
            localeContainer = document.getElementById("localData").value;           // get field's value
            localStorage.input_B = localeContainer;                                 // store the recovered data in the locale storage
        }
        function getDataLocal() {
            alert("Local Storage Data = " + localStorage.input_B);                  // call local data
        }
    }
    else {
        alert( "Browser doesn't support Web Storage");
    }
</script>
      <details>
        <summary class="exampleCode"> CODE : </summary>
        <pre>
    &lt;input id="sessionData" type="text" placeholder="session data"&gt; 
    &lt;button onmouseup="storeSessionData()"&gt; Store data into session storage &lt;/button&gt;
    &lt;button onmouseup="getDataSession()"&gt; Get Data from session storage &lt;/button&gt;
    &lt;span&gt; = session data is saved, browser keeps the data when the page is reloaded (datad lost upon tap or browser close) &lt;/span&gt;
        &lt;br&gt;
    &lt;input id="localData" type="text" placeholder="local data"&gt; 
    &lt;button onmouseup="storeLocalData()"&gt; Store data into locale storage &lt;/button&gt; 
    &lt;button onmouseup="getDataLocal()"&gt; Get Data from locale storage &lt;/button&gt;
    &lt;span&gt; = local data is permanently saved &lt;/span&gt;
&lt;script&gt;
if (window.Storage) {
// sessionStorge
        var sessionContainer;
        function storeSessionData() {
            sessionContainer = document.getElementById("sessionData").value;        // get field's value
            window.sessionStorage.input_A = sessionContainer;                       // store the recovered data into the session storage
        }
        function getDataSession() { 
            alert("Session Storage Data = " + sessionStorage.input_A);              // call session data
        }

// localeStorage
        var localeContainer;
        function storeLocalData() {
            localeContainer = document.getElementById("localData").value;           // get field's value
            localStorage.input_B = localeContainer;                                 // store the recovered data in the locale storage
        }
        function getDataLocal() {
            alert("Local Storage Data = " + localStorage.input_B);                  // call local data
        }
    }
    else {
        alert( "Browser doesn't support Web Storage");
    }
&lt;/script&gt;
        </pre>
      </details>
      <h4><u> Web Storage properties and methods </u></h4>
      <button onmouseup="clearStorage()"> Clear Storage </button>
      <p id="storeIt"></p>
      <script>
// set storage items (3 ways to dot the same thing)
        sessionStorage.session_prop_A = "sessionValue_1";
        sessionStorage.setItem("session_prop_B", "sessionValue_2");
        sessionStorage['session_prop_C'] = "sessionValue_3";
    
// remove item form storage
        sessionStorage.removeItem("session_prop_C");
        // delete sessionStorage.session_prop_C;        // does the same thing 
    
    printStorage();                                     // function needed to reprint the result
    function printStorage() {
// get keys (property names) and values
        document.getElementById("storeIt").innerHTML = 
            sessionStorage.key(0) + " / " + sessionStorage.session_prop_A + "<br>" +
            sessionStorage.key(1) + " / " + sessionStorage.session_prop_B + "<br>" +
            sessionStorage.key(2) + " / " + sessionStorage.session_prop_C;              // returns "null/undefined" (removed item)
    };
    
    function clearStorage() {
        sessionStorage.clear();                         // clears the storage obj
        printStorage();                                 // call the print function in order to pirnt the new results
    };
</script>
      <details>
        <summary class="exampleCode"> CODE : </summary>
        <pre>
    &lt;button onmouseup="clearStorage()"&gt; Clear Storage &lt;/button&gt;
    &lt;p id="storeIt"&gt;&lt;/p&gt;
&lt;script&gt;
// set storage items (3 ways to dot the same thing)
        sessionStorage.session_prop_A = "sessionValue_1";
        sessionStorage.setItem("session_prop_B", "sessionValue_2");
        sessionStorage['session_prop_C'] = "sessionValue_3";
    
// remove item form storage
        sessionStorage.removeItem("session_prop_C");
        // delete sessionStorage.session_prop_C;        // does the same thing 
    
    printStorage();                                     // function needed to reprint the result
    function printStorage() {
// get keys (property names) and values
        document.getElementById("storeIt").innerHTML = 
            sessionStorage.key(0) + " / " + sessionStorage.session_prop_A + "&lt;br&gt;" +
            sessionStorage.key(1) + " / " + sessionStorage.session_prop_B + "&lt;br&gt;" +
            sessionStorage.key(2) + " / " + sessionStorage.session_prop_C;              // returns "null/undefined" (removed item)
    };
    
    function clearStorage() {
        sessionStorage.clear();                         // clears the storage obj
        printStorage();                                 // call the print function in order to pirnt the new results
    };
&lt;/script&gt;
        </pre>
      </details>
      <h4><u> local storage data type test </u></h4>
      <p id="dataTypeTest"> False Boolean Data type stored in local storage = <span></span></p>
      <script>
    window.sessionStorage.setItem("testBoolean", false);        
    
    document.querySelector("#dataTypeTest span").textContent = 
        Boolean(window.sessionStorage.getItem("testBoolean"));      
</script>
      <details>
        <summary class="exampleCode"> CODE : </summary>
        <pre>
    &lt;p id="dataTypeTest"&gt; False Boolean Data type stored in local storage = &lt;span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;script&gt;
    window.sessionStorage.setItem("testBoolean", false);        
    
    document.querySelector("#dataTypeTest span").textContent = 
        Boolean(window.sessionStorage.getItem("testBoolean"));          <span style="color:orangered;">&lt;- Data stored in string! returned value "false" = <u>String</u> data type</span>  
&lt;/script&gt;    
        </pre>
      </details>
    </details>

    <br><br>
  </body>
</html>