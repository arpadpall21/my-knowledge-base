<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title> History API </title> 
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous"> 
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="../../Assets/stylesPages.css"> 
    <script src="../../Assets/scriptPages.js"></script>
</head>
<body>
<h1> History API (ver 4.0.0) </h1>
    <p> Updated ( 2018-09-05 )</p>
    <p class="sitenav"> <a href="../../index.html">MySite></a>
        <a href="../index.html"> Web Browser's APIs> </a> History API
    </p>
<table class="table">
<caption>
    <span class="changeListOrder">[Ordered: <span>Alphabetically</span>]</span>
</caption>
    <tr>
        <th style="width:30%;"> Methods / Properties </th>
        <th> Description </th>
    </tr>
<tr class="01.02">
<td> 
            <em>history</em>.back() 
</td>
<td> 
            - same as clicking on the browser's "back" button 
            <span id="browserSupport" title="updated: 2021-02-15">
                <span><i class="fab fa-chrome"></i> 1 </span>
                <span><i class="fab fa-firefox"></i> 1 </span>
                <span><i class="fab fa-opera"></i> 12.1 </span>
                <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 10 </span>
                <span><i class="fab fa-safari"></i> 1 </span>
            </span>
</td>
</tr>
<tr class="01.01">
<td> 
            <em>history</em>.forward() 
</td>
<td> 
            - same as clicking on the browser's "forward" button 
            <span id="browserSupport" title="updated: 2021-02-15">
                <span><i class="fab fa-chrome"></i> 1 </span>
                <span><i class="fab fa-firefox"></i> 1 </span>
                <span><i class="fab fa-opera"></i> 12.1 </span>
                <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 10 </span>
                <span><i class="fab fa-safari"></i> 1 </span>
            </span>
</td>
</tr>
<tr class="01.03">
<td> 
            <em>history</em>.go(<strong>index:nr|URL:str</strong>) 
</td>
<td> 
            - navigates to the specific history entry in the history list 
            <span id="browserSupport" title="updated: 2021-02-15">
                <span><i class="fab fa-chrome"></i> 1 </span>
                <span><i class="fab fa-firefox"></i> 1 </span>
                <span><i class="fab fa-opera"></i> 12.1 </span>
                <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 10 </span>
                <span><i class="fab fa-safari"></i> 1 </span>
            </span>
</td>
</tr>
<tr class="02">
<td> 
            <em>history</em>.length 
</td>
<td> 
            - returns the number of entries in the history list 
            <span id="browserSupport" title="updated: 2021-02-15">
                <span><i class="fab fa-chrome"></i> 1 </span>
                <span><i class="fab fa-firefox"></i> 1 </span>
                <span><i class="fab fa-opera"></i> 12.1 </span>
                <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 10 </span>
                <span><i class="fab fa-safari"></i> 1 </span>
            </span>
</td>
</tr>
    
    
<tr class="03.01">
<td> 
            <em>history</em>.pushState(<strong class="openable">obj, title:str<div>
                <p> <strong>obj</strong> - object is populated in the <mark>popstate</mark> event (<mark>event.state</mark>) </p>
                <p> <strong>title</strong> - title is populated in the <mark>popstate</mark> event (<mark>event.state</mark>) </p>
            </div></strong>, <i>URL:str</i>) 
</td>
<td> 
            - adds a new history entry to the browser history while staying on the same page <br>
            - the new history entry is added as next entry (while staying on the same page) <br>
            - the browser <u class="openable">won't load the newly added <i>URL</i> until the tab is closed<div>
                <p> - the new URL (must be on the same origin) is added to the history entry but not loaded until the current tab is closed </p>
                <p> - if omitted defaults to the current URL </p>
            </div></u>
            <span id="browserSupport" title="updated: 2021-02-16">
                <span><i class="fab fa-chrome"></i> 5 </span>
                <span><i class="fab fa-firefox"></i> 6 </span>
                <span><i class="fab fa-opera"></i> 11.5 </span>
                <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 10 </span>
                <span><i class="fab fa-safari"></i> 5 </span>
                <span class="openable">more...<div>
                    <p> <strong>title</strong> support </p>
                        <span><i class="fab fa-chrome"></i> NO </span>
                        <span><i class="fab fa-firefox"></i> NO </span>
                        <span><i class="fab fa-opera"></i> NO </span>
                        <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> NO </span>
                        <span><i class="fab fa-safari"></i> yes </span>
                </div></span>
            </span>
</td>
</tr>
<tr class="03.02">
<td> 
            <em>history</em>.replaceState(<strong class="openable">obj, title:str<div>
                <p> <strong>obj</strong> - object is populated in the <mark>popstate</mark> event (<mark>event.state</mark>) </p>
                <p> <strong>title</strong> - title is populated in the <mark>popstate</mark> event (<mark>event.state</mark>) </p>
            </div></strong>, <i class="openable">URL:str<div>
                <p> - the new URL <u>must be on the same origin</u> </p>
                <p> - if omitted defaults to the current URL </p>
            </div></i>) 
</td>
<td> 
            - replaces the current history entry 
            <span id="browserSupport" title="updated: 2021-02-16">
                <span><i class="fab fa-chrome"></i> 5 </span>
                <span><i class="fab fa-firefox"></i> 6 </span>
                <span><i class="fab fa-opera"></i> 11.5 </span>
                <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> 10 </span>
                <span><i class="fab fa-safari"></i> 5 </span>
                <span class="openable">more...<div>
                    <p> <strong>title</strong> support </p>
                        <span><i class="fab fa-chrome"></i> NO </span>
                        <span><i class="fab fa-firefox"></i> NO </span>
                        <span><i class="fab fa-opera"></i> NO </span>
                        <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> NO </span>
                        <span><i class="fab fa-safari"></i> yes </span>
                </div></span>
            </span>
</td>
</tr>
</table>
<h2 style="color:green;"><u> Notes : </u></h2>
    <details class="example" id="notes">
    <summary> Notes :</summary>
        <!-- <p> - paragraph removes the 'empty' message from the detail TAG -->
    </details>
<h2 style="color:green;"><u> Useful Links : </u></h2>
    
<h2 style="color:green;"><u> Remember This : </u></h2>
    
<h2 style="color:green;"><u> Description and Demonstration : </u></h2>
    <p> - the <mark>history</mark> object (API) contains the browser's history, it's read-only for security concerns </p>
    <p> - for security reasons we cannot read history entries but we are still able to navigate through </p>
<details class="example">
<summary> DEMO </summary>
    <pre>
    history.forward();                                                  // invoking the forward order of the browser (same as pushing the forward button)
    history.back();                                                     // invoking the back order of the browser (same as pushing the back button)  
    history.go(-2);                                                     // browser goes back two entries in the browser history
    
// pushState() / replaceState() -----------------    
    history.pushState({property_1:"value_A"}, "myTitle", "test");       // pushes a new entry in the browser history on the current document
    history.replaceState({property_1:"value_A"}, "myTitle", "test");    // replaces the current entry in the browser history 
        // URL before                      // -> file:///D:/Safe/CODE%20+/My%20Site/03%20Improuve/Learn%20Webdesign/03%20JS/Browser%20BOM/index.html
        // URL after                       // -> file:///D:/Safe/CODE%20+/My%20Site/03%20Improuve/Learn%20Webdesign/03%20JS/Browser%20BOM/test
        // the "{property_1:"value_A"}" object is associated with the executed state and returned by the <a href="../JS Events/PageTransition Popstate and HashChange Events/index.html#mark1">popstate event [link]</a>
    </pre>
</details>
<details class="example">
<summary> Example : </summary>
<h4><u> Navigate in history </u></h4>
    <button onclick="goBack()"> &lt;-- Back (same as back button) </button>
    <button onclick="goForward()"> Forward (same as "forward" button) --&gt; </button><br>
    <button onclick="goBack3()"> &lt;----- go back 3 times in history </button>
    <p id="historyNr"></p>
<script>
    function goBack() {
        window.history.back();
    }
    function goForward() {
        history.forward();
    }
    function goBack3() {
        history.go(-3);
    }
    document.getElementById('historyNr').innerHTML = "Number of History entries = " + window.history.length;
</script>
        <details>
        <summary> CODE : </summary>
        <pre>
    &lt;button onclick="goBack()"&gt; &lt;-- Back (same as back button) &lt;/button&gt;
    &lt;button onclick="goForward()"&gt; Forward (same as "forward" button) --&gt; &lt;/button&gt;&lt;br&gt;
    &lt;button onclick="goBack3()"&gt; &lt;----- go back 3 times in history &lt;/button&gt;
    &lt;p id="historyNr"&gt;&lt;/p&gt;
&lt;script&gt;
    function goBack() {
        window.history.back();
    }
    function goForward() {
        history.forward();
    }
    function goBack3() {
        history.go(-3);
    }
    document.getElementById('historyNr').innerHTML = "Number of History entries = " + window.history.length;
&lt;/script&gt;
        </pre>
        </details>
<h4><u> <mark>pushState()</mark> / <mark>replaceState()</mark> test </u></h4>    
    <p> - with the button below you accumulate the displayed number, but with each count a new history state is added with the "pushState()" method, therefore with the back button you can navigate back in the history <u>in this same page!</u> </p>
    <p style="color:yellow;"> - tested with EDGE because this API is blocked on local files in most browsers apparently (2018-10-11), but according to "caniuse.com" it has full browser support! </p>
    <button onmousedown="addHistoryState(event)"> Count (ass new History state) </button><br>
    <button onmousedown="replaceHistoryState(event)"> Replace History State </button> <span> &lt;- replace the current history entry (state) </span>
    <p id="historyCounter"> counter = <span>0</span></p>
<script>
    pushStateCounter = 0;

// pushState
    var addHistoryState = function(event) {
        pushStateCounter ++;
        var pushStateObj = {pushIt:pushStateCounter};               // this object will be returned by the "state" property by the "popstate" event at every state
        window.history.pushState({prop1:pushStateCounter}, null, "pushStateCount=" + pushStateCounter);
        document.querySelector("#historyCounter span").textContent = pushStateCounter;
    }
    
// replaceState
    var replaceHistoryState = function(event) {
        window.history.replaceState({replaced:"replacedEntry"}, null, "replaceState");
        document.querySelector("#historyCounter span").textContent = "replaceState";
    }
    
// listener set up for the "popstate" event (popstate event hapens only when the user navigates under the same document here!)    
    window.addEventListener("popstate", popstateFunc);
    function popstateFunc(event) {
        console.log(event.state);                                   // when navigating back or forward popstate event fires and the object associated with the current state is returned here!
    }
</script>
        <details>
        <summary> CODE : </summary>
        <pre>
    &lt;button onmousedown="addHistoryState(event)"&gt; Count (ass new History state) &lt;/button&gt;&lt;br&gt;
    &lt;button onmousedown="replaceHistoryState(event)"&gt; Replace History State &lt;/button&gt; &lt;span&gt; &lt;- replace the current history entry (state) &lt;/span&gt;
    &lt;p id="historyCounter"&gt; counter = &lt;span&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;script&gt;
    pushStateCounter = 0;

// pushState
    var addHistoryState = function(event) {
        pushStateCounter ++;
        var pushStateObj = {pushIt:pushStateCounter};               // this object will be returned by the "state" property by the "popstate" event at every state
        window.history.pushState({prop1:pushStateCounter}, null, "pushStateCount=" + pushStateCounter);
        document.querySelector("#historyCounter span").textContent = pushStateCounter;
    }
    
// replaceState
    var replaceHistoryState = function(event) {
        window.history.replaceState({replaced:"replacedEntry"}, null, "replaceState");
        document.querySelector("#historyCounter span").textContent = "replaceState";
    }
    
// listener set up for the "popstate" event (popstate event hapens only when the user navigates under the same document here!)    
    window.addEventListener("popstate", popstateFunc);
    function popstateFunc(event) {
        console.log(event.state);                                   // when navigating back or forward popstate event fires and the object associated with the current state is returned here!
    }
&lt;/script&gt;  
        </pre>
        </details>
</details>

    <br><br>
</body>
</html>
