<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title> Functions / Procedures / Triggers </title> 
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous"> 
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="../../Assets/stylesPages.css"> 
    <script src="../../Assets/scriptPages.js"></script>
</head>
<body>
<h1> Functions / Procedures / Triggers (ver 3.4.1) </h1>
    <p> Updated ( 2020-09-08 )</p>
    <p class="sitenav"> <a href="../../index.html">MySite></a>
        <a href="../index.html" title="Learn WebDesign">MySQL (Databases / SQL)></a> Functions / Procedures / Triggers  
    </p>
<table class="table">
<caption> Functions </caption>
    <tr>
        <th style="width:30%;"> Statement </th>
        <th> Description </th>
    </tr>
    <tr>
        <td>  
            CREATE FUNCTION <i>db.</i><strong>fn</strong> (<i>arg dataType, ...</i>) 
              RETURNS <strong>dataType</strong> 
              <small>COMMENT</small> <i>comment</i> 
              <small class="openable">NOT DETERMINISTIC|DETERMINISTIC<div>
                        <p style="color:orangered;"> - the declaration of <mark>DETERMINISTIC</mark> VS <mark>NOT DETERMINISTIC</mark> is made by the creator of the function, <u>so there are lots of cases where this is missused</u> </p><br>
                        <p style="font-size:1.3em; font-weight:bold; text-decoration:underline;"><mark>NOT DETERMINISTIC</mark> (Default) <span style="color:orangered;">(slower than <mark>DETERMINISTIC</mark>) </p>
                        <p> - funciton may return different result for the same input, (Ex: when a table is referenced (which value may change) </p><br>
                        <p style="font-size:1.3em; font-weight:bold; text-decoration:underline;"><mark>DETERMINISTIC</mark> <span style="color:green;">(faster than <mark>NOT DETERMINISTIC</mark>) </p>
                        <p> - function retuns the same value for the same input (Ex: only the passed arguments are used as input) </p>
                    </div></small> 
              <small>BEGIN</small> 
                RETURN <strong>exp</strong>
              <small>END</small>
        </td>
        <td> 
            - creates a MySQL function (full syntax below ) <br>
            - in order to create Functions the user must have the <mark>CREATE RUTINE</mark> privilege, <u>and binary logging disabled</u> (<mark>SET GLOBAL log_bin_trust_function_creators = 1</mark>)
        </td>
    </tr>
    <tr>
        <td> SHOW FUNCTION STATUS <small>[LIKE <i>pattern</i>]</small> </td>
        <td>  
            - returns the characteristics of all stored functions that the user have access to <br>
            - (<small>LIKE</small>) filters functions by pattern     
        </td>
    </tr>
    <tr>
        <td> SHOW CREATE FUNCTION <strong>fn</strong> </td>
        <td> returns the exact string that is used to create the specified function (can be used to re-create the function) </td>
    </tr>
    <tr>
        <td> DROP FUNCTION <small>[IF EXISTS]</small> <i>db.</i><strong>fn</strong> </td>
        <td> 
            - drops (deletes) the specified function <br>
            - (<small>IF EXISTS</small>) does not throw an error if the function does not exist    
        </td>
    </tr>
</table>
    <br>
<table class="table">
<caption> Procedures </caption>
    <tr>
        <th style="width:30%;"> Statement </th>
        <th> Description </th>
    </tr>
    <tr>
        <td>  
            CREATE PROCEDURE <i>db.</i><strong>proc</strong>(<small class="openable">IN|OUT|INOUT <i>arg dataType, ...</i><div>
                <p style="font-size:1.3em; font-weight:bold; text-decoration:underline;"><mark>IN</mark> (Default = no need to declare)     </span></p>
                <p> - IN arguments (parameters) pass values into the procedure body when called </p>
                <p style="font-size:1.3em; font-weight:bold; text-decoration:underline;"><mark>OUT</mark> </span></p>
                <p> - OUT arguments recover values what comes out from the procedure when the procedure is finished </p>
                <p> - OUT arguments are passed as User-Defined variables when the procedure is called (ex: <mark>CALL someProcedure(OUT @var_1, OUT @var_2)</mark>)) </p> 
                <p style="font-size:1.3em; font-weight:bold; text-decoration:underline;"><mark>INOUT</mark> </span></p>
                <p> - INOUT arguments pass values into the procedure and also recover values what comes out from the procedure when the procedure is called </p>
                <p> - INOUT arguments are passed as User-Defined variables when the procedure is caller (ex: <mark>CALL someProcedure(INOUT @var_1, INOUT @var_2)</mark>)) </p> 
            </div></small>)  
            <small>BEGIN</small> 
            <i>SQL statements...</i> 
            <small>END</small> 
        </td>
        <td>  
            - creates a MySQL procedure (full syntax below) <br>
            - in order to create Procedures the user must have the <mark>CREATE PROCEDURE</mark> privilege 
        </td>
    </tr>
    <tr>
        <td>  
            CALL <i>db.</i><strong>proc</strong>(<i class="openable">arg, ...<div>
                <p> - <mark>IN</mark> arguments can be passed as User-Defined variables (<mark>@myVar</mark>) or sheer values </p>
                <p> - <mark>OUT</mark> arguments can be passed as User-Defined variables (<mark>@myVar</mark>) because once the Procedure returns the variable stores the value </p>
                <p> - <mark>INOUT</mark> arguments can be passed as User-Defined variables (<mark>@myVar</mark>) because once the Procedure returns the variable stores the value </p>
            </div></i>)
        </td>
        <td> calls the specified procedure </td>
    </tr>
    <tr>
        <td> SHOW PROCEDURE STATUS <small>[LIKE <i>pattern</i>]</small> </td>
        <td>  
            - returns the characteristics of all stored procedures that the user have access to <br>
            - (<small>LIKE</small>) filters procedures by pattern
        </td>
    </tr>
    <tr>
        <td> SHOW CREATE PROCEDURE <strong>proc</strong> </td>
        <td> returns the exact string that is used to create the specified procedure (can be used to re-create the procedure)     </td>
    </tr>
    <tr>
        <td> DROP PROCEDURE <small>[IF EXISTS]</small> <i>db.</i><strong>proc</strong> </td>
        <td> 
            - drops (deletes) the specified procedure <br>
            - (<small>IF EXISTS</small>) does not throw an error if the procedure does not exist
        </td>
    </tr>
</table>
    <br>
<table class="table">
<caption> Triggers </caption>
    <tr>
        <th style="width:30%;"> Statement </th>
        <th> Description </th>
    </tr>
    <tr>
        <td>  
            CREATE TRIGGER <strong>trigger</strong> <span class="openable">BEFORE|AFTER<div>
                <p> - trigger time, when to execute the trigger body </p> 
                <p> - <mark>BEFORE</mark> = trigger body executed before the original statement </p>
                <p> - <mark>AFTER</mark> = trigger body executed after the original statement </p>
            </div></span> <span class="openable">INSERT|UPDATE|DELETE<div>
                <p> - trigger event, for which the trigger body is executed </p>
                <p> - <mark>INSERT</mark> = when new record is inserted in the original table </p>
                <p> - <mark>UPDATE</mark> = when an existing record is modified in the original table </p>
                <p> - <mark>DELETE</mark> = when a record is deleted from the original table </p>
            </div></span> ON <strong class="openable">table<div>
                <p> - the table on which the trigger is registered </p>
            </div></strong> FOR EACH ROW <small class="openable">BEGIN <strong>triggerBody</strong> <div>
                <p> - the <strong>triggerBody</strong> contains one or multiple SQL statements which will be executed when the trigger is triggered </p>
                <p style="text-indent:10px;"> - the <small>BEGIN</small> and <small>END</small> indicates the start and end of the trigger body <u>(optional if there is only one statement in the tirgger body) </u>
                <p style="text-indent:10px;"> - in the <strong>triggerBody</strong> the (default) <mark>;</mark> delimiter is used, <u>(so if we want to use multiple statements in the trigger body the main delimiter must be changed with <mark>DELIMITER <strong>delimiter</strong>;</mark> statement)</u> </p>
                <p style="font-weight:bold; font-size:1.3em; text-decoration:underline;"> The <mark>NEW</mark> and <mark>OLD</mark> keywords in the tirgger body </p>
                        <p> - <mark>NEW.<strong>col</strong></mark> = newly inserted value in the original table column (INSERT trigger) </p>
                        <p> - <mark>NEW.<strong>col</strong></mark> = value after updated in the original table column (UPDATE trigger) </p>
                        <p> - <mark>OLD.<strong>col</strong></mark> = deleted value in the original table column (DELETE trigger) </p>
                        <p> - <mark>OLD.<strong>col</strong></mark> = value before updated in the original table column (UPDATE trigger) </p>
            </div>END</small>
        </td>
        <td> registers a new trigger on the specified table (<strong>table</strong>) (if the table is dropped all its tirggers are dropped too) </td>
    </tr>
    <tr>
        <td> DROP TRIGGER <small>[IF EXISTS]</small> <i>db.</i><strong>trigger</strong> </td>
        <td> 
            - deletes the specified trigger <br>
            - (<small>IF EXISTS</small>) does not throw an error if the trigger does not exist  
        </td>
    </tr>
    <tr>
        <td> SHOW TRIGGERS </td>
        <td> prints all triggers in the current database </td>
    </tr>
</table>
<h2 style="color:green;"><u> Notes : </u></h2>
    <details class="example" id="notes">
    <summary> Notes :</summary>
        <!-- <p> - paragraph removes the 'empty' message from the detail TAG -->
    </details>
<h2 style="color:green;"><u> Useful Links : </u></h2>
    <p><a href="https://dev.mysql.com/doc/refman/8.0/en/create-procedure.html#:~:text=In%20practice%2C%20stored%20functions%20tend,transaction%20statements%20such%20as%20COMMIT%20." target="_blank"> CREATE PROCEDURE|FUNCTION (dev.mysql.com) </a></p>
<h2 style="color:green;"><u> Remember This : </u></h2>
    <p> - in order to create Functions or Tirggers the binary logging must be disabled (<mark>SET GLOBAL log_bin_trust_function_creators = 1</mark>) </p>
    <p> - Function, Procedure and Trigger body scoping works just like in JavaScript </p>
<h2 style="color:green;"><u> Description and Demonstration : </u></h2>
<h2 style="color:darkblue;"><u> Functions <mark>CREATE FUNCTION</mark> / <mark>SHOW FUNCTION STATUS</mark> / <mark>SHOW CREATE FUNCTION</mark> / <mark>DROP FUNCTION</mark> </u></h2>
    <p> - Functions are 'routines' (SQL codes) which are stored by the SQL server, they belong to a database </p>
    <p> - Functions can be used in expressions (called in expressions), they must return <u>one value</u> (which is used by the expression) </p> 
    <p> - in order to create Functions the user must have the <mark>CREATE RUTINE</mark> privilege, <u style="background-color:yellow;">and  binary logging disabled</u> (<mark>SET GLOBAL log_bin_trust_function_creators = 1</mark>) </p>
    <pre class="syntax">
SYNTAX:     CREATE FUNCTION <i>db.</i><strong>fn</strong> (<i>arg dataType, ...</i>)                                  // function arguments (parameters) are considered <mark>IN</mark> parameters (argument names are case-insensitive)    
                RETURNS <strong>dataType</strong> 
                    <small>COMMENT</small> <i>comment</i>                                                    // comments are visible only with <mark>SHOW FUNCTION STATUS</mark> / <mark>SHOW CREATE FUNCTION</mark>    
                    <small class="openable">NOT DETERMINISTIC|DETERMINISTIC<div>
                        <p style="color:orangered;"> - the declaration of <mark>DETERMINISTIC</mark> VS <mark>NOT DETERMINISTIC</mark> is made by the creator of the function, <u>so there are lots of cases where this is missused</u> </p><br>
                        <p style="font-size:1.3em; font-weight:bold; text-decoration:underline;"><mark>NOT DETERMINISTIC</mark> (Default) <span style="color:orangered;">(slower than <mark>DETERMINISTIC</mark>) </p>
                        <p> - funciton may return different result for the same input, (Ex: when a table is referenced (which value may change) </p><br>
                        <p style="font-size:1.3em; font-weight:bold; text-decoration:underline;"><mark>DETERMINISTIC</mark> <span style="color:green;">(faster than <mark>NOT DETERMINISTIC</mark>) </p>
                        <p> - function retuns the same value for the same input (Ex: only the passed arguments are used as input) </p>
                    </div></small>                                   // (<mark>NOT DETERMINISTIC</mark> [DEFAULT] = different result for the same input) (<mark>DETERMINISTIC</mark> = same result for the same input)   
                    <small>BEGIN</small>                                                              // the <mark>BEGIN... END</mark> must be used only when the function body contains multiple statements     
                        <span style="color:darkgray;">SQL statements...</span>                                                <span style="color:orange;">// the function body cannot contain <mark>SELECT</mark> (except <mark>SELECT ... INTO <strong>var</strong></mark>) / <mark>SHOW</mark> / <mark>DESCRIBE|DESC|EXPLAIN</mark> and <mark>CHECK TABLE</mark> statements</span>    
                        RETURN <strong>exp</strong>                                                       // the function body must contain <u>one</u> RETURN statement   
                    <small>END</small>
            
            
            SHOW FUNCTION STATUS <small>[LIKE <i>pattern</i>]</small>                                        // returns the characteristics of all stored functions that the user have access to    
                                                                                          (<small>LIKE</small>) filters functions by pattern     
                                                                                          
            SHOW CREATE FUNCTION <strong>fn</strong>                                                    // returns the exact string that is used to create the specified function (can be used to re-create the function)    
            
            DROP FUNCTION <small>[IF EXISTS]</small> <i>db.</i><strong>fn</strong>                                            // drops (deletes) the specified function 
                                                                                          (<small>IF EXISTS</small>) does not throw an error if the function does not exist    
    </pre>
<details class="example">
<summary> DEMO </summary>
    <pre class="cmd">
// CREATE FUNCTION --------------------------------------------------------------------
    mysql> CREATE FUNCTION testFn()                                                    // most simplistic function 
        ->   RETURNS VARCHAR(20)                                                       // returning datatype specified     // this function is considered not deterministic (may return a different value for the same passed arguments)    
        ->     RETURN 'test function';                                                 // function body must contain one return statement   
    
    mysql> DELIMITER $$                                                                // delimiter changed because the default delimiter must be used in the function body    
    mysql> CREATE FUNCTION myDB.addPlusOne(a INT, b INT)                               // arguments (parameters) are considered 'IN' parameters    (function added to the 'myDB' database)    
        ->   RETURNS INT
        ->   COMMENT 'add a to b plus 1'                                               // comments are visible only with developer tools (SHOW CREATE FUNCION addPlusOne)    
        ->   DETERMINISTIC                                                             // deterministic function (always returns the same value for the same passed arguments)    
        ->     BEGIN
        ->       DECLARE one INT;                                                      // function body contains multiple statements   
        ->       SET one = 1;                                                          // -! no SELECT / DESCRIBE / SHOW / CHECK TABLE statement allowed in the function body     
        ->       RETURN a + b + one;                                                   
        ->     END$$
    mysql> DELIMITER ;                                                                 // delimiter changed back to default    
    
    mysql> SELECT 10 + addPlusOne(2, 2);                                               // function are usable in expressions   
    
// SHOW FUNCTION STATUS / SHOW CREATE FUNCTION ----------------------------------------
    mysql> SHOW FUNCTION STATUS;                                                       // returns all stored functions 
    mysql> SHOW FUNCTION STATUS LIKE 'add%';                                           // returns all stored functions which start with 'add' 
    
    mysql>SHOW CREATE FUNCTION addPlusOne;                                             // returns a string that is used to create the 'addPlusOne' function   
    
// DROP FUNCTION ----------------------------------------------------------------------
    mysql> DROP FUNCTION testFn;                                                       // drops the specified function  
    mysql> DROP FUNCTION addPlusOne;
    </pre>
</details>
<details class="example">
<summary> Example: </summary>
<h4 style="color:darkblue;"><u> Function TEST </u></h4>
    <pre class="cmd">
    mysql> CREATE FUNCTION myFunc()                                                    // basic MySQL function 
        -> RETURNS VARCHAR(20)
        -> RETURN 'Hello World';                                                       // must returns ONE value  
    Query OK, 0 rows affected (0.01 sec)    
    
    mysql> SELECT myFunc();                                                            // MySQL function are called in expressions (that's why they need to return one value)   
    +-------------+
    | myFunc()    |
    +-------------+
    | Hello World |
    +-------------+
    1 row in set (0.00 sec)
    
// functions are associated with a specific database ----------------------------------
    mysql> USE Company_Database;                                                       // database changed 
    Reading table information for completion of table and column names
    You can turn off this feature to get a quicker startup with -A
    
    Database changed
    mysql> SELECT myFunc();                                                            // function is not available in this database 
    ERROR 1305 (42000): FUNCTION Company_Database.myFunc does not exist
    mysql>     
    
// running multiple statements in function body ---------------------------------------
    mysql> CREATE FUNCTION myFunc()
        -> RETURNS VARCHAR(30)
        ->   BEGIN
        ->   SELECT * FROM Students;                                                   // -! the function body is not designed to execute statements (use procedures for that)  
        ->   SELECT * FROM Class;
        ->   RETURN 'something';
        ->   END$$
    ERROR 1415 (0A000): Not allowed to return a result set from a function
    mysql> 
    
// using built-in function names are not allowed --------------------------------------
    mysql> CREATE FUNCTION COUNT()                                                     // fuction name not allowed because the 'COUNT" is a Bulit-in function  
        -> RETURNS INT RETURN 21;
    ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right  syntax to use near 'COUNT()
    RETURNS INT RETURN 21' at line 1
    
// multiple statements in the function body (BEGIN END) -------------------------------
    mysql> CREATE FUNCTION myFunc()
        -> RETURNS VARCHAR(30)
        ->   BEGIN
        ->     DECLARE stnc VARCHAR(30);                                               // multiple statements are used   
        ->     SET stnc = 'something';
        ->     RETURN stnc;
        ->   END$$
    Query OK, 0 rows affected (0.00 sec)
    
// passing arguments ------------------------------------------------------------------
    mysql> CREATE FUNCTION myFunc(a CHAR(20), b CHAR(20))                              // function arguments (parameters) are considered all IN paremeters   
        -> RETURNS CHAR(20)   
        ->   BEGIN     
        ->     DECLARE str CHAR(20);
        ->     SET str = ' vagyok';     
        ->     RETURN CONCAT(a, ' ', b, str);   
        ->   END$$
    Query OK, 0 rows affected (0.00 sec)
    
    mysql> DELIMITER ;
    
    mysql> SELECT myFunc('Pall', 'Arpad');
    +-------------------------+
    | myFunc('Pall', 'Arpad') |
    +-------------------------+
    | Pall Arpad vagyok       |
    +-------------------------+
    1 row in set (0.00 sec)
    
// comment in function ----------------------------------------------------------------
    mysql> CREATE FUNCTION pallDB.myFunc()
        ->   RETURNS INT
        ->     COMMENT 'some comment'                                                  // comments are visible only in SHOW FUNCTION STATUS  
        ->     RETURN 21;
    Query OK, 0 rows affected (0.00 sec)
    </pre>
<hr>
<!-------------------------------------------------------------------------------------------------------->
<h4 style="color:darkblue;"><u> <mark>DETERMINISTIC</mark> VS <mark>NOT DETERMINISTIC</mark> TEST </u></h4>
    <pre class="cmd">
// NOT DETERMINISTIC ------------------------------------------------------------------
    mysql> DELIMITER $$
    mysql> CREATE FUNCTION countStudents()                                             // not deterministic functions are slower than deterministic onces    
        ->   RETURNS INT 
        ->   NOT DETERMINISTIC                                                         // Default (no need to declare)
        ->   BEGIN
        ->     DECLARE countStd INT;
        ->     SELECT COUNT(*) INTO countStd FROM Students;                            // function considered not deterministic because the 'Students' table record number may vary   
        ->     RETURN countStd;
        ->   END$$
    Query OK, 0 rows affected (0.00 sec)
    
    mysql> DELIMITER ;
    mysql> SELECT countStudents();
    +-----------------+
    | countStudents() |
    +-----------------+
    |              12 |
    +-----------------+
    1 row in set (0.00 sec)
    
// DETERMINISTIC ----------------------------------------------------------------------
    mysql> CREATE FUNCTION _add(a INT, b INT)                                          // deterministic function are faster than not deterministic onces    
        ->   RETURNS INT 
        ->     DETERMINISTIC 
        ->     RETURN a + b;                                                           // function considered deterministic because it returns always the same value for the same input   
    Query OK, 0 rows affected (0.00 sec)
    
    mysql> SELECT _add(3, 3);
    +------------+
    | _add(3, 3) |
    +------------+
    |          6 |
    +------------+
    1 row in set (0.01 sec)
    </pre>
<hr>
<!-------------------------------------------------------------------------------------------------------->
<h4 style="color:darkblue;"><u> <mark>SHOW CREATE FUNCTION</mark> TEST </u></h4>
    <pre class="cmd">    
    mysql> CREATE FUNCTION _add(a INT, b INT)   
        ->   RETURNS INT    
        ->   COMMENT 'this is an addition'   
        ->   DETERMINISTIC     
        ->     RETURN a + b;
    Query OK, 0 rows affected (0.01 sec)
    
    mysql> SHOW CREATE FUNCTION _add;
    +----------+-----------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+
    | Function | sql_mode                                                                                                              | Create Function                                                                                                                              | character_set_client | collation_connection | Database Collation |
    +----------+-----------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+
    | _add     | ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION | CREATE DEFINER=`pall`@`localhost` FUNCTION `_add`(a INT, b INT) RETURNS int
        DETERMINISTIC
        COMMENT 'this is an addition'
    RETURN a + b | utf8mb4              | utf8mb4_0900_ai_ci   | utf8mb4_0900_ai_ci |
    +----------+-----------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+
    1 row in set (0.00 sec)
    </pre>
</details>
<hr>
<!-------------------------------------------------------------------------------------------------------->
<h2 style="color:darkblue;"><u> Procedures <mark>CREATE PROCEDURE</mark> / <mark>SHOW PROCEDURE STATUS</mark> / <mark>SHOW CREATE PROCEDURE</mark> / <mark>DROP PROCEDURE</mark> </u></h2>
    <p> - Procedures are 'routines' (SQL codes) which are stored by the SQL server, they belong to a database </p>
    <p> - Procedures are executed with the <mark>CALL</mark> statement, they execute the SQL code which is in the Procedure body <u>(Procedures are sort of side effect Functions in MySQL)</u> </p>
    <p> - in order to create Procedures the user must have the <mark>CREATE RUTINE</mark> privilege </p>
    <pre class="syntax">
SYNTAX:     CREATE PROCEDURE <i>db.</i><strong>proc</strong>(<small class="openable">IN|OUT|INOUT <i>arg dataType, ...</i><div>
                <p style="font-size:1.3em; font-weight:bold; text-decoration:underline;"><mark>IN</mark> (Default = no need to declare)     </span></p>
                <p> - IN arguments (parameters) pass values into the procedure body when called </p>
                <p style="font-size:1.3em; font-weight:bold; text-decoration:underline;"><mark>OUT</mark> </span></p>
                <p> - OUT arguments recover values what comes out from the procedure when the procedure is finished </p>
                <p> - OUT arguments are passed as User-Defined variables when the procedure is called (ex: <mark>CALL someProcedure(OUT @var_1, OUT @var_2)</mark>)) </p> 
                <p style="font-size:1.3em; font-weight:bold; text-decoration:underline;"><mark>INOUT</mark> </span></p>
                <p> - INOUT arguments pass values into the procedure and also recover values what comes out from the procedure when the procedure is called </p>
                <p> - INOUT arguments are passed as User-Defined variables when the procedure is caller (ex: <mark>CALL someProcedure(INOUT @var_1, INOUT @var_2)</mark>)) </p> 
            </div></small>)                  // procedure arguments can be <mark>IN</mark> (Default), <mark>OUT</mark> or <mark>INOUT</mark> (argument names are case-insensitive)   
                <small>BEGIN</small>                                                                  // the <mark>BEGIN... END</mark> must be used only when the Procedure body contains multiple statements 
                    <i>SQL statements...</i>                                                  // any SQL statement can be used in the Procedure body    
                <small>END</small>
            
            CALL <i>db.</i><strong>proc</strong>(<i class="openable">arg, ...<div>
                <p> - <mark>IN</mark> arguments can be passed as User-Defined variables (<mark>@myVar</mark>) or sheer values </p>
                <p> - <mark>OUT</mark> arguments can be passed as User-Defined variables (<mark>@myVar</mark>) because once the Procedure returns the variable stores the value </p>
                <p> - <mark>INOUT</mark> arguments can be passed as User-Defined variables (<mark>@myVar</mark>) because once the Procedure returns the variable stores the value </p>
            </div></i>)                                                    // calls the specified procedure   
            
            
            SHOW PROCEDURE STATUS <small>[LIKE <i>pattern</i>]</small>                                       // returns the characteristics of all stored procedures that the user have access to    
                                                                                         (<small>LIKE</small>) filters procedures by pattern
                                                                                         
            SHOW CREATE PROCEDURE <strong>proc</strong>                                                 // returns the exact string that is used to create the specified procedure (can be used to re-create the procedure)    
            
            DROP PROCEDURE <small>[IF EXISTS]</small> <i>db.</i><strong>proc</strong>                                         // drops (deletes) the specified procedure 
                                                                                         (<small>IF EXISTS</small>) does not throw an error if the procedure does not exist  
    </pre>
<details class="example">
<summary> DEMO </summary>
    <pre class="cmd">
// CREATE PROCEDURE -------------------------------------------------------------------
    mysql> CREATE PROCEDURE test()                                                     // most simplistic procedure 
        ->   SELECT * FROM table_1;                                                      // one statement in the procedure body   
    
    mysql> DELIMITER $$                                                                // delimiter changed because the default delimiter must be used in the procedure body    
    mysql> CREATE PROCEDURE myDB.test2()                                               // database specified to which the procedure will be assigned   
        ->   BEGIN 
        ->     SELECT COUNT(*) FROM Students;                                          // procedure body contains multiple statements  
        ->     SELECT * FROM Students;
        ->   END$$
    Query OK, 0 rows affected (0.01 sec)
    mysql> DELIMITER ;
    
    mysql> CALL test();                                                                // procedure 'test' called 
    mysql> CALL myDB.test2();                                                          // procedure 'test2' called
    
// SHOW PROCEDURE STATUS / SHOW CREATE PROCEDURE --------------------------------------
    mysql> SHOW PROCEDURE STATUS;                                                      // returns all stored procedures   
    mysql> SHOW PROCEDURE STATUS LIKE 'te%';                                           // returns all stored procedures which start with 'te' 
    
    mysql>SHOW CREATE FUNCTION test2;                                                  // returns a string that is used to create the 'test2' procedure    
    
// DROP PROCEDURE ---------------------------------------------------------------------
    mysql> DROP PROCEDURE test;                                                        // deletes the specified procedure 
    mysql> DROP PROCEDURE test2;
    </pre>
    <p> - Procedure arguments <mark>IN</mark> / <mark>OUT</mark> / <mark>INOUT</mark> </p>
    <pre class="cmd">
    SET @myVar = 21;                                                                   // User-Defined variable   
    
// IN ---------------------------------------------------------------------------------
    mysql> CREATE PROCEDURE test(IN a INT)                                             // passes value into the procedure body (Default no need to declare IN)    
        ->   SELECT a;                                                                 // -> 21                         // the passed value available here    
    
    mysql> CALL test(@myVar);                                                          // value can be passed in User-Defined variable  
    mysql> CALL test(21);                                                              // value simply passed   
    
// OUT --------------------------------------------------------------------------------
    mysql> CREATE PROCEDURE test_2(OUT a INT)                                          // the OUT argument recover outcomming value from the procedure    
        ->   SET a = 22;                                                               // procedure sets the argument   // -! passed value by the argument is not available in the function body    
    
    mysql> CALL test_2(@myVar);                                                        // the passed User-Defined variable recovers the outcomming value from the procedure    
    
    mysql> SELECT @myVar;                                                              // -> 22
    
// INOUT ------------------------------------------------------------------------------
    mysql> DELIMITER $$
    mysql> CREATE PROCEDURE test_3(INOUT a INT)                                        // the INOUT argument does both, passes a value into the function body and recovers the outcomming value  
        ->   BEGIN
        ->     SELECT a;                                                               // -> 21                         // the passed value is available here   
        ->     SET a = 22;                                                             // sets the argument  
        ->   END$$
    mysql> DELIMITER ;
    
    mysql> CALL test_3(@myVar);                                                        // the passed User-Defined variable value is passed into the function and also used to recover the outcomming value    
    
    mysql> SELECT @myVar;                                                              // -> 22 
    </pre>
</details>
<details class="example">
<summary> Example : </summary>
<hr>
<!-------------------------------------------------------------------------------------------------------->
<h4 style="color:darkblue;"><u> Procedure TEST </u></h4>
    <pre class="cmd">
    mysql> CREATE PROCEDURE proc_1()                                                   // most basic procedure 
        ->   SELECT * FROM Students;                                                     // have one statement in the body  
    Query OK, 0 rows affected (0.01 sec)
    
    mysql> CALL proc_1();
    +------------+------------+-----------+---------------------+
    | student_id | first_name | last_name | birth_date          |
    +------------+------------+-----------+---------------------+
    |          1 | Pall       | Arpad     | 1985-04-12 12:12:12 |
    |          2 | Biro       | Biro      | 1974-02-14 02:54:00 |
    |          3 | Gyula      | Szolosi   | 1963-03-14 07:04:00 |
    +------------+------------+-----------+---------------------+
    12 rows in set (0.00 sec)
    
    Query OK, 0 rows affected (0.00 sec)
    
// multi statement body ---------------------------------------------------------------
    mysql> DELIMITER $$
    mysql> CREATE PROCEDURE addStudent(id INT, name VARCHAR(30), lName VARCHAR(30), bDate DATETIME)     // all are IN arguments  
        ->   BEGIN
        ->     SELECT * FROM Students;                                                 // prints the 'Students' table  
        ->     INSERT INTO Students VALUES(id, name, lName, bDate);                    // adds the passed values   
        ->     SELECT * FROM Students;                                                 // prints the 'Students' table again (updated result)   
        ->   END$$
    Query OK, 0 rows affected (0.01 sec)
    
    mysql> DELIMITER ;    
    
    mysql> CALL addStudent(4, 'Balasi', 'Szabolcs', '1988-05-14');
    +------------+------------+-----------+---------------------+
    | student_id | first_name | last_name | birth_date          |
    +------------+------------+-----------+---------------------+
    |          1 | Pall       | Arpad     | 1985-04-12 12:12:12 |
    |          2 | Biro       | Biro      | 1974-02-14 02:54:00 |
    |          3 | Gyula      | Szolosi   | 1963-03-14 07:04:00 |
    +------------+------------+-----------+---------------------+
    12 rows in set (0.00 sec)
    
    +------------+------------+-----------+---------------------+
    | student_id | first_name | last_name | birth_date          |
    +------------+------------+-----------+---------------------+
    |          1 | Pall       | Arpad     | 1985-04-12 12:12:12 |
    |          2 | Biro       | Biro      | 1974-02-14 02:54:00 |
    |          3 | Gyula      | Szolosi   | 1963-03-14 07:04:00 |
    |          4 | Balasi     | Szabolcs  | 1988-05-14 00:00:00 |
    +------------+------------+-----------+---------------------+
    13 rows in set (0.01 sec)
    
    Query OK, 0 rows affected (0.01 sec)
    
// create and call procedures from a different database -------------------------------
    mysql> SELECT DATABASE();
    +------------+
    | DATABASE() |
    +------------+
    | pallDB     |                                                                     // current database used 'pallDB'
    +------------+
    1 row in set (0.00 sec)
    
    mysql> CREATE PROCEDURE Company_Database.proc_1()                                  // the 'proc_1' procedure is created and assigned to a different database 'Company_Database'    
        ->   SELECT 1 + 1;
    Query OK, 0 rows affected (0.01 sec)
    
    mysql> CALL proc_1();                                                              // calling the created procedure is not working because we are not in the database where the created 'proc_1' procedure is assigned   
    ERROR 1305 (42000): PROCEDURE pallDB.proc_1 does not exist
    mysql> CALL Company_Database.proc_1();                                             // procedure called from a different database   
    +-------+
    | 1 + 1 |
    +-------+
    |     2 |
    +-------+
    1 row in set (0.00 sec)
    
    Query OK, 0 rows affected (0.00 sec)
    </pre>
<hr>
<!-------------------------------------------------------------------------------------------------------->
<h4 style="color:darkblue;"><u> Procedure arguments <mark>IN</mark> / <mark>OUT</mark> / <mark>INOUT</mark> TEST </u></h4>
    <pre class="cmd">
// IN arguments -----------------------------------------------------------------------
    mysql> CREATE PROCEDURE proc_1(IN a INT, b INT)                                    // IN arguments are passing values to the funciton scope (Dfault no need to specify IN)
        ->   SELECT a + b;
    Query OK, 0 rows affected (0.01 sec)
    
    mysql> CALL proc_1(3, 3);
    +-------+
    | a + b |
    +-------+
    |     6 |
    +-------+
    1 row in set (0.00 sec)
    
    Query OK, 0 rows affected (0.00 sec)
    
    mysql> SET @var_11 = 21;
    Query OK, 0 rows affected (0.00 sec)
    
    mysql> CREATE PROCEDURE proc_11(IN a INT)
        ->   SELECT a;
    Query OK, 0 rows affected (0.01 sec)
    
    mysql> CALL proc_11(@var_11);                                                      // User-Defined variables can be passed as IN arguments   
    +------+
    | a    |
    +------+
    |   21 |
    +------+
    1 row in set (0.00 sec)
    
    Query OK, 0 rows affected (0.00 sec)
    
// OUT arguments ----------------------------------------------------------------------
    mysql> DELIMITER $$
    mysql> CREATE PROCEDURE proc_2(OUT a INT, OUT b CHAR(20))                          // OUT parameters (arguments) are returned to the caller when the procedure is finished   
        ->   BEGIN
        ->     SET a = 21;
        ->     SET b = 'something';
        ->   END$$
    Query OK, 0 rows affected (0.00 sec)
    
    mysql> DELIMITER ;
    
    mysql> SET @var_1 = NULL;
    Query OK, 0 rows affected (0.00 sec)
    
    mysql> SET @var_2 = NULL;
    Query OK, 0 rows affected (0.01 sec)
    
    mysql> CALL proc_2(@var_1, @var_2);                                                // User-Defined variables passed to get the outbound data    
    Query OK, 0 rows affected (0.00 sec)

    mysql> SELECT @var_1, @var_2;
    +--------+-----------+
    | @var_1 | @var_2    |
    +--------+-----------+
    |     21 | something |
    +--------+-----------+
    1 row in set (0.00 sec)
    
    mysql> CREATE PROCEDURE proc_3(OUT a INT)
        ->   SELECT a;                                                                 // -! the OUT value is not passed to the function    
    Query OK, 0 rows affected (0.00 sec)
    
    mysql> SET @var_1 = 21;
    Query OK, 0 rows affected (0.00 sec)
    
    mysql> CALL proc_3(@var_1);
    +------+
    | a    |
    +------+
    | NULL |                                                                           // the value 21 is not passed to the function body as OUT argument    
    +------+
    1 row in set (0.00 sec)
    
// INOUT arguments --------------------------------------------------------------------
    mysql> SET @var_1 = 21;
    Query OK, 0 rows affected (0.00 sec)
    
    mysql> DELIMITER $$
    mysql> CREATE PROCEDURE proc_4(INOUT a INT)                                        // the passed User-Defined variable value is passed to the function body 
        ->   BEGIN
        ->     SELECT a; 
        ->     SET a = 22;
        ->   END$$
    Query OK, 0 rows affected (0.01 sec)
    
    mysql> DELIMITER ;
    mysql> CALL proc_4(@var_1);                                                        // '@var_1' value is passed to the procedure and then when the procedure is finished it is returned to the caller 
    +------+
    | a    |
    +------+
    |   21 |
    +------+
    1 row in set (0.01 sec)
    
    Query OK, 0 rows affected (0.01 sec)
    
    mysql> SELECT @var_1;
    +--------+
    | @var_1 |
    +--------+
    |     22 |                                                                         // '@var_1' value updated by the procedure  
    +--------+
    1 row in set (0.00 sec)
    </pre>
</details>
<hr>
<!-------------------------------------------------------------------------------------------------------->
<h2 style="color:darkblue"><u> Triggers <mark>CREATE TRIGGER</mark> / <mark>DROP TIRGGER</mark> / <mark>SHOW TRIGGERS</mark> </u></h2>
    <p> - a trigger is basically a block of code containing one or multiple SQL statemen(s) what is triggered when the specified action (INSERT, UPDATE or DELETE) is executed in the original table </p> 
    <p> - the user can create or delete triggers, <u>but cannot modify existing triggers [TESTED: on MySQL v 8.0.21 (2020-08-31)]</u> <u>(the user does not need <mark>CREATE RUTINE</mark> privilege to create tirggers)</u> </p>
    <p style="color:yellow;"> - cascaded foreign keys do NOT activate triggers </p>
    <pre class="syntax">
SYNTAX:     CREATE TRIGGER <strong>trigger</strong> <span class="openable">BEFORE|AFTER<div>
                <p> - trigger time, when to execute the trigger body </p> 
                <p> - <mark>BEFORE</mark> = trigger body executed before the original statement </p>
                <p> - <mark>AFTER</mark> = trigger body executed after the original statement </p>
            </div></span> <span class="openable">INSERT|UPDATE|DELETE<div>
                <p> - trigger event, for which the trigger body is executed </p>
                <p> - <mark>INSERT</mark> = when new record is inserted in the original table </p>
                <p> - <mark>UPDATE</mark> = when an existing record is modified in the original table </p>
                <p> - <mark>DELETE</mark> = when a record is deleted from the original table </p>
            </div></span> ON <strong class="openable">table<div>
                <p> - the table on which the trigger is registered </p>
            </div></strong> FOR EACH ROW   // registers a new trigger on the specified table (<strong>table</strong>) (if the table is dropped all its tirggers are dropped too)    
                <small>BEGIN</small>                                                                  // the <mark>BEGIN... END</mark> must be used only when the Trigger body contains multiple statements
                    <span style="color:darkgray;">SQL statements...</span>                                                    <span style="color:orange;">// the trigger body cannot contain <mark>SELECT</mark> (except <mark>SELECT ... INTO <strong>var</strong></mark>) / <mark>SHOW</mark> / <mark>DESCRIBE|DESC|EXPLAIN</mark> and <mark>CHECK TABLE</mark> statements</span>    
                    NEW|OLD.<strong>col</strong>                                                          // <span class="openable">the <mark>NEW</mark> and <mark>OLD</mark> keywords depict the new or old value from the original table<div>
                        <p> - <mark>NEW.<strong>col</strong></mark> = newly inserted value in the original table column (INSERT trigger) </p>
                        <p> - <mark>NEW.<strong>col</strong></mark> = value after updated in the original table column (UPDATE trigger) </p>
                        <p> - <mark>OLD.<strong>col</strong></mark> = deleted value in the original table column (DELETE trigger) </p>
                        <p> - <mark>OLD.<strong>col</strong></mark> = value before updated in the original table column (UPDATE trigger) </p>
                    </div></span>    
                <small>END</small>
            
            
            SHOW TRIGGERS                                                              // prints all triggers in the current database    
            
            DROP TRIGGER <small>[IF EXISTS]</small> <i>db.</i><strong>trigger</strong>                                        // deletes the specified trigger 
                                                                                         (<small>IF EXISTS</small>) does not throw an error if the trigger does not exist  
    </pre>
<details class="example">
<summary> DEMO </summary>
    <pre class="cmd">
// CREATE TRIGGER / SHOW TRIGGER / DROP TRIGGER ---------------------------------------
    mysql> CREATE TRIGGER myTr BEFORE INSERT ON table_1 FOR EACH ROW                   // creates the 'myTr' trigger and registers in on the 'table_1'    
        ->   INSERT INTO table_2 VALUES('new');                                          // the trigger body is executed when a new value is inserted into the 'table_1' table    
    
    mysql> SHOW TRIGGERS;                                                              // prints all trigger informations in the current database    
    
    mysql> DROP TRIGGER myTr;                                                          // deletes the 'myTr' trigger   
    
// multiple SQL statements in the tirgger body ----------------------------------------
    mysql> DELIMITER $$                                                                // -! delimiter must be changed because the trigger body uses the default ';' delimiter 
    
    mysql> CREATE TRIGGER myTr BEFORE UPDATE ON table_1 FOR EACH ROW
        ->   BEGIN                                                                     // trigger body start 
        ->     UPDATE table_2 SET col1='newValue' WHERE col1='someOldValue';             // trigger body contains multiple statements (uses the default ';' delimiter)
        ->     INSERT INTO table_3 VALUES('newValue');
        ->   END$$                                                                     // trigger body end (with the set delimiter)
        
    mysql> DELIMITER ;                                                                 // delimiter changed back to default (for practicality)    
    
// NEW and OLD keywords in the trigger body -------------------------------------------
  // INSERT trigger -------------------------------------
    mysql> CREATE TRIGGER myTr BEFORE INSERT ON table_1 FOR EACH ROW
        ->   INSERT INTO table_2 VALUES(NEW.col1);                                     // 'NEW.col1' represents 'table_1.col1' newly inserted value  
    
  // DELETE trigger -------------------------------------
    mysql> CREATE TRIGGER myTr BEFORE DELETE ON table_1 FOR EACH ROW
        ->   INSERT INTO table_2 VALUES(OLD.col1);                                     // 'OLD.col1' represents 'table_1.col1' deleted value  
  
  // UPDATE trigger -------------------------------------
    mysql> CREATE TRIGGER myTr BEFORE UPDATE ON table_1 FOR EACH ROW
        ->   INSERT INTO table_2 VALUES(NEW.col1);                                     // 'NEW.col1' represents 'table_1.col1' new updated value
  
    mysql> CREATE TRIGGER myTr BEFORE UPDATE ON table_1 FOR EACH ROW
        ->   INSERT INTO table_2 VALUES(OLD.col1);                                     // 'OLD.col1' represents 'table_1.col1' old value before it was updated    
    </pre>
</details>
<details class="example">
<summary> Example : </summary>
<h4 style="color:darkblue;"><u> Trigger TEST-1 </u></h4> 
    <pre class="cmd">
    mysql> SELECT * FROM Students;
    +------------+------------+-----------+
    | student_id | first_name | last_name |
    +------------+------------+-----------+
    |          1 | Pall       | Arpad     |
    |          2 | Biro       | Biro      |
    |          3 | Gyula      | Szolosi   |
    |          4 | Feri       | Gaspar    |
    |          5 | Lui        | Lukacs    |
    |          6 | Aliz       | Sandor    |
    |          7 | Ferenc     | Gaspar    |
    |          8 | Lukacs     | Levente   |
    |         21 | Feri       | Kaszas    |
    |         22 | Katalin    | Jo        |
    +------------+------------+-----------+
    9 rows in set (0.00 sec)
    
    mysql> DESC StudentMovement;
    +------------+-------------+------+-----+---------+-------+
    | Field      | Type        | Null | Key | Default | Extra |
    +------------+-------------+------+-----+---------+-------+
    | action     | varchar(20) | YES  |     | NULL    |       |
    | name       | varchar(30) | YES  |     | NULL    |       |
    | student_id | varchar(30) | YES  |     | NULL    |       |
    +------------+-------------+------+-----+---------+-------+
    3 rows in set (0.01 sec)
    
    mysql> CREATE TRIGGER newSt BEFORE INSERT ON Students FOR EACH ROW                 // the 'newSt' trigger will trigger the below statement (before) inserting a new record in the 'Students' table    
         >   INSERT INTO StudentMovement                                                 // (trigger body) statement to execute on this trigger 
         >   VALUES('new student', NEW.first_name, NEW.student_id);                      // 'NEW.first_name' refers to the newly inserted 'Students.first_name' value    
    Query OK, 0 rows affected (0.02 sec)
    
    mysql> CREATE TRIGGER setSt BEFORE UPDATE ON Students FOR EACH ROW                 // the 'setSt' trigger will trigger the below statement (before) updating an existing record in the 'Students' table  
        ->   INSERT INTO StudentMovement VALUES('modified to', NEW.first_name, NEW.student_id);     // 'NEW.first_name' refers to the 'Students.first_name' record which is updated after it was updated 
    Query OK, 0 rows affected (0.00 sec)                                                            
    
    mysql> CREATE TRIGGER delSt BEFORE DELETE ON Students FOR EACH ROW                 // the 'delSt' trigger will trigger the below statement (before) deleting an existing record in the 'Students' table  
        ->   INSERT INTO StudentMovement VALUES('deleted', OLD.first_name, OLD.student_id);         // 'OLD.first_name' refers to the 'Students.first_name' record which is delete before it was deleted   
    Query OK, 0 rows affected (0.01 sec)
    
    mysql> SELECT * FROM StudentMovement;                                              // 'StudentMovement' table currently empty    
    Empty set (0.00 sec)
    
    mysql> INSERT INTO Students VALUES(23, 'Kaszas', 'Ferenc');                        // adds a new record 
    Query OK, 1 row affected (0.01 sec)
    
    mysql> UPDATE Students SET first_name='Kati' WHERE first_name='Katalin';           // set an existing reccord
    Query OK, 1 row affected (0.00 sec)
    Rows matched: 1  Changed: 1  Warnings: 0
    
    mysql> DELETE FROM Students WHERE first_name='Aliz';                               // delete an existing reccord  
    Query OK, 1 row affected (0.01 sec)
    
    mysql> SELECT * FROM StudentMovement;                                              // 'StudentMovement' table updated by triggers 
    +-------------+--------+------------+
    | action      | name   | student_id |
    +-------------+--------+------------+
    | new student | Kaszas | 23         |
    | modified to | Kati   | 22         |
    | deleted     | Aliz   | 6          |
    +-------------+--------+------------+
    3 rows in set (0.00 sec)
    
    mysql> SHOW TRIGGERS;                                                              // prints all existing triggers in the schema  
    +---------+--------+----------+-----------------------------------------------------------------------------------+--------+------------------------+-----------------------------------------------------------------------------------------------------------------------+----------------+----------------------+----------------------+--------------------+
    | Trigger | Event  | Table    | Statement                                                                         | Timing | Created                | sql_mode                                                                                                              | Definer        | character_set_client | collation_connection | Database Collation |
    +---------+--------+----------+-----------------------------------------------------------------------------------+--------+------------------------+-----------------------------------------------------------------------------------------------------------------------+----------------+----------------------+----------------------+--------------------+
    | newSt   | INSERT | Students | INSERT INTO StudentMovement VALUES('new student', NEW.first_name, NEW.student_id) | BEFORE | 2020-08-25 18:09:03.09 | ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION | pall@localhost | utf8mb4              | utf8mb4_0900_ai_ci   | utf8mb4_0900_ai_ci |
    | setSt   | UPDATE | Students | INSERT INTO StudentMovement VALUES('modified to', NEW.first_name, NEW.student_id) | BEFORE | 2020-08-25 19:06:45.70 | ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION | pall@localhost | utf8mb4              | utf8mb4_0900_ai_ci   | utf8mb4_0900_ai_ci |
    | delSt   | DELETE | Students | INSERT INTO StudentMovement VALUES('deleted', OLD.first_name, OLD.student_id)     | BEFORE | 2020-08-25 19:15:08.48 | ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION | pall@localhost | utf8mb4              | utf8mb4_0900_ai_ci   | utf8mb4_0900_ai_ci |
    +---------+--------+----------+-----------------------------------------------------------------------------------+--------+------------------------+-----------------------------------------------------------------------------------------------------------------------+----------------+----------------------+----------------------+--------------------+    
    3 rows in set (0.00 sec)
    
    mysql> DROP TRIGGER newSt;                                                         // removing triggers 
    Query OK, 0 rows affected (0.01 sec)
    
    mysql> DROP TRIGGER setSt;
    Query OK, 0 rows affected (0.01 sec)
    
    mysql> DROP TRIGGER delSt;
    Query OK, 0 rows affected (0.00 sec)
    
    mysql> SHOW TRIGGERS;                                                              // no trigger in database  
    Empty set (0.00 sec)
    </pre>
<hr>
<!---------------------------------------------------------------------------------------------------------------->
<h4 style="color:darkblue;"><u> Trigger TEST-2 </u></h4> 
    <p> - in this test I made 2 identicaly structured tables, any data modifications to the <mark>Cars</mark> table will be transmited to <mark>Cars2</mark> table with triggers </p>
    <pre class="cmd">
    mysql> DESCRIBE Cars;
    +------------+--------------+------+-----+---------+-------+
    | Field      | Type         | Null | Key | Default | Extra |
    +------------+--------------+------+-----+---------+-------+
    | mark       | varchar(30)  | YES  |     | NULL    |       |
    | type       | varchar(30)  | YES  |     | NULL    |       |
    | engineSize | decimal(2,1) | YES  |     | NULL    |       |
    +------------+--------------+------+-----+---------+-------+
    3 rows in set (0.00 sec)
    
    mysql> DESCRIBE Cars2;
    +------------+--------------+------+-----+---------+-------+
    | Field      | Type         | Null | Key | Default | Extra |
    +------------+--------------+------+-----+---------+-------+
    | mark       | varchar(30)  | YES  |     | NULL    |       |
    | type       | varchar(30)  | YES  |     | NULL    |       |
    | engineSize | decimal(2,1) | YES  |     | NULL    |       |
    +------------+--------------+------+-----+---------+-------+
    3 rows in set (0.00 sec)
    
    mysql> CREATE TRIGGER newCar BEFORE INSERT ON Cars FOR EACH ROW                    // insert trigger 
        ->   INSERT INTO Cars2 VALUES(NEW.mark, NEW.type, NEW.engineSize);
    Query OK, 0 rows affected (0.01 sec)    
    
    mysql> CREATE TRIGGER setCar BEFORE UPDATE ON Cars FOR EACH ROW                    // update trigger 
         > UPDATE Cars2    
         > SET mark=NEW.mark, type=NEW.type, engineSize=NEW.engineSize   
         > WHERE mark=OLD.mark AND type=OLD.type AND engineSize=OLD.engineSize;
    Query OK, 0 rows affected (0.01 sec)
    
    mysql> CREATE TRIGGER delCar BEFORE DELETE ON Cars FOR EACH ROW                    // delete trigger 
         >   DELETE FROM Cars2 
         >   WHERE mark=OLD.mark AND type=OLD.type AND engineSize=OLD.engineSize;
    Query OK, 0 rows affected (0.01 sec)
    </pre>
<hr>
<!---------------------------------------------------------------------------------------------------------------->
<h4 style="color:darkblue;"><u> Multiple statements in trigger body TEST </u></h4> 
    <p> - when new record inserted to the 'Cars' table the trigger also inserts part of the newly inserted records to 'EngineSize', 'Color' and 'Country' tables </p>
    <pre class="cmd">
    mysql> EXPLAIN Cars;
    +------------+--------------+------+-----+---------+-------+
    | Field      | Type         | Null | Key | Default | Extra |
    +------------+--------------+------+-----+---------+-------+
    | car_id     | int          | NO   | PRI | NULL    |       |
    | mark       | varchar(30)  | YES  |     | NULL    |       |
    | type       | varchar(30)  | YES  |     | NULL    |       |
    | engineSize | decimal(2,1) | YES  |     | NULL    |       |
    | color      | varchar(30)  | YES  |     | NULL    |       |
    | country    | varchar(30)  | YES  |     | NULL    |       |
    +------------+--------------+------+-----+---------+-------+
    6 rows in set (0.00 sec)
    
    mysql> EXPLAIN EngineSize;
    +------------+-------------+------+-----+---------+-------+
    | Field      | Type        | Null | Key | Default | Extra |
    +------------+-------------+------+-----+---------+-------+
    | car_id     | int         | YES  |     | NULL    |       |
    | engineSize | varchar(30) | YES  |     | NULL    |       |
    +------------+-------------+------+-----+---------+-------+
    2 rows in set (0.01 sec)
    
    mysql> EXPLAIN Color;
    +--------+-------------+------+-----+---------+-------+
    | Field  | Type        | Null | Key | Default | Extra |
    +--------+-------------+------+-----+---------+-------+
    | car_id | int         | YES  |     | NULL    |       |
    | color  | varchar(30) | YES  |     | NULL    |       |
    +--------+-------------+------+-----+---------+-------+
    2 rows in set (0.00 sec)
    
    mysql> EXPLAIN Country;
    +---------+-------------+------+-----+---------+-------+
    | Field   | Type        | Null | Key | Default | Extra |
    +---------+-------------+------+-----+---------+-------+
    | car_id  | int         | YES  |     | NULL    |       |
    | country | varchar(30) | YES  |     | NULL    |       |
    +---------+-------------+------+-----+---------+-------+
    2 rows in set (0.00 sec)
    
    mysql> DELIMITER $$                                                                // -! delimiter must be changed because in the trigger body uses the default delimiter (;)
    mysql> CREATE TRIGGER up_ AFTER INSERT ON Cars FOR EACH ROW
        ->   BEGIN                                                                     // trigger body start 
        ->     INSERT INTO EngineSize VALUES(NEW.car_id, NEW.engineSize);                // trigger body (all these statements will execute when we insert new records in the 'Cars' table)    
        ->     INSERT INTO Color VALUES(NEW.car_id, NEW.color);
        ->     INSERT INTO Country VALUES(NEW.car_id, NEW.country);
        ->   END$$                                                                     // end of trigger body (the newly set delimiter used)  
    Query OK, 0 rows affected (0.01 sec)
    
    mysql> DELIMITER ;                                                                 // delimiter set (back) to default (for practicality)   
    </pre>
<hr>
<!---------------------------------------------------------------------------------------------------------------->
<h4 style="color:darkblue;"><u> The <mark>NEW</mark> and <mark>OLD</mark> keywords in trigger body TEST </u></h4> 
    <pre class="cmd">
    mysql> DESCRIBE Original;                                                          // 2 identical tables used for this simple test 
    +-------+------+------+-----+---------+-------+
    | Field | Type | Null | Key | Default | Extra |
    +-------+------+------+-----+---------+-------+
    | nr    | int  | YES  |     | NULL    |       |
    +-------+------+------+-----+---------+-------+
    1 row in set (0.00 sec)
    
    mysql> DESCRIBE Copy;
    +-------+------+------+-----+---------+-------+
    | Field | Type | Null | Key | Default | Extra |
    +-------+------+------+-----+---------+-------+
    | nr    | int  | YES  |     | NULL    |       |
    +-------+------+------+-----+---------+-------+
    1 row in set (0.00 sec)
    
// Insert -----------------------------------------------------------------------------
    mysql> CREATE TRIGGER ins BEFORE INSERT ON Original FOR EACH ROW
        ->   INSERT INTO Copy VALUES(NEW.nr);                                          // 'NEW.nr' represents the newly inserted value in the 'Original.nr' column    
                                                                                       // the INSERT trigger has no 'OLD' keyword 
// Update -----------------------------------------------------------------------------
    mysql> CREATE TRIGGER upd_ BEFORE UPDATE ON Original FOR EACH ROW
        ->   BEGIN
        ->     INSERT INTO Copy VALUES(NEW.nr);                                        // 'NEW.nr' represents the value after it was updated in the 'Original.nr' column 
        ->     INSERT INTO Copy VALUES(OLD.nr);                                        // 'OLD.nr' represents the value before it was updated in the 'Original.nr' column    
        ->   END$$
    Query OK, 0 rows affected (0.01 sec)
    
mysql> DELIMITER ;    
    
// Delete -----------------------------------------------------------------------------
    mysql> CREATE TRIGGER del_ BEFORE DELETE ON Original FOR EACH ROW 
        -> INSERT INTO Copy VALUES(OLD.nr);                                            // 'OLD.nr' represents the deleted value in the 'Original.nr' column 
                                                                                       // the DELETE trigger has no 'NEW' keyword 
    </pre>
</details>
    
    <h2 class="test" style=""><a href="TEST/index.html"> TEST > </a></h2>
</body>
</html>