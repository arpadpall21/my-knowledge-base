<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <title> Terragrunt </title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="../Assets/stylesPages.css">
    <script src="../Assets/scriptPages.js"></script>
  </head>

  <body>
    <h1> Terragrunt </h1>
    <p> Updated: ( 2025-06-07 ) </p>
  <nav class="sitenav"> 
    <a href="../index.html">MySite > </a> Terragrunt
  </nav>

    <p class="subSite"><a href> SubSite > </a></p>

    <table class="table">
      <tr>
        <th style="width:30%;"> Method / Property / statement ect... </th>
        <th> Description </th>
      </tr>
      <tr>
        <td>
          demo prop
        </td>
        <td>
          - demo description
          <span class="browserSupport">
            <span><i class="fab fa-chrome"></i> 0/0 -webkit- </span>
            <span><i class="fab fa-firefox"></i> </span>
            <span><i class="fab fa-opera"></i> </span>
            <span><i class="fab fa-internet-explorer"></i><i class="fab fa-edge"></i> </span>
            <span><i class="fab fa-safari"></i> </span>
            <span><i class="fab fa-node-js"></i> </span>
          </span>
        </td>
      </tr>

    </table>
    <br>
    <h2 class="headerSection"> Notes : </h2>

    <h2 class="headerSection"> Useful Links : </h2>

    <h2 class="headerSection"> Remember This : </h2>

    <h2 class="headerSection"> Description and Demonstration : </h2>




    <!--
---------------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------------
stage 1: high level overview 
    - read through 
    - create notes 
    - deciede what exactly will you document down 
    - UNDERSTAND AND WRITE DOWN THE CONCEPTS!!!
    
stage 2:  low level overview
    - deeper understanding of all what you've taken down in stage 1
    
stage 3 : 
    - organize and document down everything 
---------------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------------
    - telemetry             -> automated process of collecting, transmitting and analyzind data in a system
    - instrumentation       -> adding some tool (sdk, library, external monitor agent) that collect telementry data from an application or system
    - Blast Radius          -> The potential impact of a change (negative or positive)
    - Boilerplate (code)    -> repeated code with little or no alternation


    - OSS                   -> Opne Source Software
    - ITSM                  -> IT System Management
    - Driver                -> sowtware that allows the OS or app to communicate with the hardware
    - Data ingestion        -> collecting, importing, and loading data from various sources into a target system for storage and analysis
    - SIEM                  -> Security Information Event Management
    - SOAR                  -> Security Orchestration Automation and Response
    - WORM                  -> Write Once Read Many





- terragrunt is a wrapper around terraform (and openTofu)
    - orchestration tool 
    - extends the capabilities of Terraform/OpenTofu

- improves code reusability (reuse the same stack for different environments)
- provides centralized configuration approach
- environment specific config

- terragrunt uses .hcl files (tipicaly terragrunt.hcl) which is terraform's standard format
- it's common to have a root.hcl on the main directory and the child directories have the terragrunt.hcl file
    - a terragrunt.hcl file contains configurations for that stack

- stack can be executed individually or run all stacks that are in subdirectories
- terragrunt executes parallel deployment (executes stacks in parallel)
    - does this mean running terragrunt apply --all?

- terragrunt stored its cache files in .terragrunt-cache directory (which is tipically added to .gitignore)

- terragrunt first does dependency resolution (creates a direct acyclic grap DAG), then executes independed modules (stacks) in parallel

- demo mock data + explain why use it

Unit's Underlying mechanics
    - the 'terraform' block copies the referenced module into the current .terragrunt-cache
    - executes terraform plan|apply (depending terragrunt cmd)


Parallel Execution: Terragrunt then executes the apply or plan commands for these independent modules concurrently, up to the limit specified by the --parallelism flag (default is 10). This means that if you have multiple modules that do not depend on each other, they can be processed simultaneously, significantly speeding up the overall execution time.



Concepts:
  - Unit: 
    - single instance or infrastructure managed by Terragrunt
    - can have its own state
    - basically a directory containing a terragrunt.hcl file
    - it's common to use a root.hcl in the main directory then use terragrunt.hcl in sub directories
    - units can be nested (a directory containing terragrunt.hcl file can contain further child units (dir with terragrunt.hcl file))
    - each stack can manage their own backend
    - units are atomic
  - Stack:
    - is a collection terraform units
    - manages dependencies between units
    - organizes the infrastructure into logical groups
    - 2 stack types:
      - implicit (directory structure)
        - basically auto detects units in folder structure
      - explicit (defined by terragrunt.stack.hcl file)
    
    ??? terragrunt.stack.hcl (central organization of related resources, like declaring local variables, etc...)
    - it's possible to have nested stack, this approach is used to namespace dependencies
    
    
    
  - Module:
    - a terraform or OpenTofu module which is reusable
    - it's commont to version modules
  - Resource:
    - terraform or OpenTofu resource
  - State:
    - terraform or OpenTofu state
  - DAG (Directed Acyclic Graph)
    - Teggragunt uses it to determine dependency order within a unit




Builtin functions: https://terragrunt.gruntwork.io/docs/reference/built-in-functions/


CMD: (https://terragrunt.gruntwork.io/docs/reference/cli/)
    basically all terraform commands can be executed but with 'terragrunt' instead of 'terraform'

    terragrunt init

    terragrunt [option] plan
        - [option]
            --log-format bare (for less output)
            --parallelism=<nr> (default 10)
    terragrunt [option] apply
        - [option]
            --log-format bare
            --parallelism=<nr> (default 10)
    terragrunt [option] destroy
        - [option]
            --log-format bare
            --parallelism=<nr> (default 10)
    
    // stack commands
    terragrunt run --all apply
    terragrunt run --all plan
    terragrunt run --all destroy
    terragrunt run --all output       // view the output of units
    terragrunt run --all validate
        - --all runs the command on all units
    
    
According to Ned in the cloud terragrunt addresses 3 problems
    - Managing large configs
    - Managing different environments that uses the same config (module approach)
    - DRY code
    - Split up states


At documentation I need a good example 

recommended to bo added to .gitignore
  - .terragrunt-cache
  - .terragrunt-stack

- .terraform.lock.hcl file
  - recommended to check in the version control (with the unit)
  - terraform uses it to check the provider integrity

- the 'generate' block is used to generate files (whichi mostly used to create the provider.tf file)
- the 'include' block tells Terragrunt to use the exact same Terragrunt configuration from path (arg) (include the configuration)

- document the 'mock_outputs' in the 'dependency' block 

- mention the .terragrunt.stack.hcl approach as well (I decided not to ducument it)

- demo dynamically generate backend

- demo extra arguments (https://terragrunt.gruntwork.io/docs/features/extra-arguments/)

- demo before_hook, after_hook, error_hook


?????????????????????????????????????????????????????????????????????????????????????????????
WRITE DOWN WHAT YOU DON'T UNDERSTAD OR MUST BE TESTED AS QUESTIONS HERE
?????????????????????????????????????????????????????????????????????????????????????????????
    - clairify this backend question
      - in general (depending on infrastructure size) terragrunt recommends to keep one state file per stack (per environment usually)
        - altough guys in my company keep a state file per unit

    
-->

    <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
    <hr>
    <hr>
    <hr>
    <hr>
    <hr>

    <h2 class="headerExtra"><u> Title 1 </u></h2>
    <h2 class="header"> Title 1.1 </h2>
    <h3 class="header"> Title 1.1.1 </h3>
    <h4 class="header"> Title 1.1.1.1 </h4>
    <p> - stuff to learn <mark>syntax or command (or some tchnical stuff)</mark> bla bla bla </p>
    <p> - stuff to learn <mark class="mark">highlights like file names and other things</mark> bla bla bla </p>
    <p style="text-decoration:underline;"> - important information is underlined </p>
    <p style="color:yellow;"> - very important information is written with yellow colors </p>
    <p style="background-color:yellow;"> - highly important information has yellow background color </p>
    <div style="background-color:red;">
      <p> - red background block means not learned or not tested information! </p>
      <p> - </p>
    </div>

    <pre class="syntax">
    <reqval>required value </reqval>
    <optval>optional value </optval>
    <lit>literally used </lit>
    <opt>optionally used </opt>
  
    <prot style="color:#049500;">prototype chain</prot>
        
    <span class="openable"> this is an openable element<div>
        <p> - openable elements listed here in paragraphs </p>
        <p> - </p>
    </div></span>
    </pre>

    <details class="example">
      <summary> DEMO (can be pseudocode) </summary>
      <pre>
    examples of the current lessons 
    
// -----------------------------------------

// -----------------------------------------
    </pre>
    </details>

    <pre class="cmd">
    command line demo 
    </pre>
    <pre class="formula">
    formula code (like conversion meter...)
    </pre>
    <details class="example">
      <summary> Example : </summary>
      <h4 style="color:darkblue;"><u> example title </u></h4>
      <p> - live tests will come here </p>
      <details>
        <summary class="exampleCode"> CODE : </summary>
        <pre>
    copy of the exaple code 
        </pre>
      </details>
    </details>
    <!---------------------------------------------------------------------------------------------------------------------------------->
    <hr>

    <h2 class="test" style><a href="TEST/index.html"> TEST > </a></h2>

    <br><br>
  </body>

</html>