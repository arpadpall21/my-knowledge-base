<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <title> Demo </title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="../../../../Assets/stylesPages.css">
    <script src="../../../../Assets/scriptPages.js"></script>
  </head>

  <body>
    <h1> Data Types </h1>
    <p> Updated ( 2024-07-30 ) </p>
    <nav class="sitenav">
      <a href="../../../../index.html">MySite > </a>
      <a href="../../../index.html" title="Learn WebDesign">Databases > </a>
      <a href="../../index.html" title="Learn WebDesign">ORMs > </a>
      <a href="../index.html" title="Learn WebDesign">Mongoose > </a> Data Types
    </nav>
    <table class="table">
      <caption>
        Data Types
      </caption>
      <tr>
        <th style="width:20%;"> Mongoose Type </th>
        <th style="width:20%;"> MongoDB Type </th>
        <th style="width:20%;"> JS Type </th>
        <th> Description </th>
      </tr>
      <tr>
        <td>
          mongoose.Types.ObjectId
        </td>
        <td>
          ObjectId(<optval>'hex'</optval>)
        </td>
        <td>
          new mongoose.Types.ObjectId(<reqval>24digits:str</reqval>)<br>
          <reqval>24digits:str</reqval>
        </td>
        <td>
          - Object Id (required for each mongoDB document)
        </td>
      </tr>
      <tr>
        <td>
          mongoose.Schema.Types.Mixed
        </td>
        <td>
          <reqval>anyMongoDBType</reqval>
        </td>
        <td>
          <reqval>val:any</reqval>
        </td>
        <td>
          - mixed (Any data type)
        </td>
      </tr>
      <tr>
        <td>|</td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>
          String
        </td>
        <td>
          String
        </td>
        <td>
          <reqval>str</reqval>
        </td>
        <td>
          - string
        </td>
      </tr>
      <tr>
        <td>
          Number
        </td>
        <td>
          Int32 / Int64 / Double
        </td>
        <td>
          <reqval>nr</reqval>
        </td>
        <td>
          - number (mongoose maps the correct MongoDB number type)
        </td>
      </tr>
      <tr>
        <td>
          BigInt
        </td>
        <td>
          Int64
        </td>
        <td>
          <reqval>bigInt</reqval>
        </td>
        <td>
          - big integer (storable range <mark>9223372036854775807</mark> - <mark>-9223372036854775808</mark>) <br>
          - <u>CAREFUL! out of range value will be stored as inacurate value</u> <br>
          - we should convert <reqval>bigIng</reqval> into string for out of range values
        </td>
      </tr>
      <tr>
        <td>
          Boolean
        </td>
        <td>
          Boolean
        </td>
        <td>
          <reqval>bool</reqval>
        </td>
        <td>
          - boolean (built-in JavaScript data type)
        </td>
      </tr>
      <tr>
        <td>
          Date
        </td>
        <td>
          Date
        </td>
        <td>
          <reqval>dateObj</reqval>
        </td>
        <td>
          - date (built-in JavaScript data type)
        </td>
      </tr>
      <tr>
        <td>|</td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>
          [<reqval>MongooseType</reqval>]
        </td>
        <td>
          [<reqval>mongoDBType</reqval><optval>, ...</optval>]
        </td>
        <td>
          <reqval>val</reqval>[]
        </td>
        <td>
          - array
        </td>
      </tr>
      <tr>
        <td>
          { type: Map, of: <reqval>MongooseType</reqval> }
        </td>
        <td>
          Object
        </td>
        <td>
          <reqval>map</reqval>
        </td>
        <td>
          - map (built-in JavaScript data type) <u>keys must be strings</u>
        </td>
      </tr>
      <tr>
        <td>
          { type: String, enum: [<reqval>val</reqval><optval>, ...</optval>] }
        </td>
        <td>
          String
        </td>
        <td>
          [<reqval>str</reqval><optval>, ...</optval>]
        </td>
        <td>
          - enum (mongoose implementation)
        </td>
      </tr>
      <tr>
        <td>|</td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>
          Buffer
        </td>
        <td>
          BinaryData()
        </td>
        <td>
          <reqval>buf</reqval>
        </td>
        <td>
          - buffer (built-in Node.js data type)
        </td>
      </tr>
      <tr>
        <td>|</td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>
          <reqval>other</reqval>
        </td>
        <td>
          <reqval>other</reqval>
        </td>
        <td>
        </td>
        <td>
          - <a href="https://mongoosejs.com/docs/schematypes.html#what-is-a-schematype" target="_blank">other data types [link]</a>
        </td>
      </tr>
    </table>
    <br>
    <details class="example" id="notes">
      <summary> Notes & Tips :</summary>
      <!-- <p> - paragraph removes the 'empty' message from the detail TAG -->
    </details>
    <h2 class="headerSection"> Useful Links : </h2>

    <h2 class="headerSection"> Remember This : </h2>

    <h2 class="headerSection"> Description and Demonstration : </h2>
    <p> - mongoose follows JavaScript's type cassting approach, tries to convert values to the 'rigth' type (ex: a Number typed field accepts <mark>'32'</mark>, mongoose convert it to <mark>32</mark>) </p>
    <p> - mongoose does not recommend the usage of the following data types: <mark>UUID</mark>, <mark>Decimal128</mark> </p>
    <details class="example" open>
      <summary> DEMO (can be pseudocode) </summary>
      <pre>
    import mongoose from 'mongoose';
    
    await mongoose.connect('mongodb://127.0.0.1:27017/test_db');
      console.log('DB connection estabilished');
    
    const testSchema = mongoose.Schema({
      _id: mongoose.Types.ObjectId,
      mx: mongoose.Schema.Types.Mixed,    // any type
      str: String,
      nr: Number,
      bigNr: BigInt,
      bool: Boolean,
      dt: Date,
      buf: Buffer,
      arr: [String],                      // array of strings
      map: { type: Map, of: Number},      // map of strings (keys must be string)
      enum: { type: String, enum: ['A', 'B', 'C'] },    // enum 
    });
    
    const Test = new mongoose.model('test_col', testSchema);
    
    await Test.create({
      _id: new mongoose.Types.ObjectId('000000000000000000000000'),
      mx: 32.32,
      str: 'Hello World!',
      nr: 32.32,
      bigNr: 2048097509850398509283409283049n,
      bool: false,
      dt: new Date(),
      buf: Buffer.from('Hello World!'),
      arr: ['one', 'two', 3],                                 // type casted, stored as ['one', 'two', '3']
      map: new Map([['one', 1], ['two', 2], ['three', 3]]),
      enum: 'B',                                              // allows only enum member
    });
    </pre>
    </details>

    <br><br>
  </body>

</html>