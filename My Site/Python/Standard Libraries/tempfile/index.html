<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <title> tempfile </title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="../../../Assets/stylesPages.css">
    <script src="../../../Assets/scriptPages.js"></script>
  </head>

  <body>
    <h1> tempfile </h1>
    <p> Updated ( 2024-09-17 ) </p>
    <nav class="sitenav">
      <a href="../../../index.html">MySite > </a>
      <a href="../../index.html">Python > </a>
      <a href="../index.html">Standard Libraries > </a> tempfile
    </nav>
    <table class="table">
      <tr>
        <th style="width:30%;"> Method / Attribute </th>
        <th> Description </th>
      </tr>
      <tr>
        <td>
          <lit>tempfile</lit>.tempdir
        </td>
        <td>
          - gets or sets the location where temporary files & directories will be created
        </td>
      </tr>
      <tr>
        <td>|</td>
        <td></td>
      </tr>
      <tr>
        <td>
          <lit>tempfile</lit>.gettempdir()
        </td>
        <td>
          - returns location where temporary files & directories will be created
        </td>
      </tr>
      <tr>
        <td>
          <lit>tempfile</lit>.gettempprefix()
        </td>
        <td>
          - returns the prefix what is used to create temporary files and directories
        </td>
      </tr>
      <tr>
        <td>|</td>
        <td></td>
      </tr>
      <tr>
        <td colspan="2"> create temp file & directory </td>
      </tr>
      <tr>
        <td>
          <lit>tempfile</lit>.TemporaryFile(<opt>mode=<optval class="openable">accMode:str<div>
                <p> Default <mark>w+b</mark> (multple can be combined) </p>
                <p> <mark>r</mark> - read-only (handler at file content start) </p>
                <p> <mark>w</mark> - write-only (handler at file content start), completely overwrites file content (creates the file if not exist) </p>
                <p> <mark>a</mark> - append (handler at file content end), appends data to the content (creates the file if not exist) </p>
                <p> <mark>+</mark> - updating (combined with other modes) (<mark>r+</mark> = read and write) (<mark>w+</mark> write and read) (<mark>a+</mark> append and read) </p>
                <p> <mark>x</mark> - create only (error if file exist)
                  <p> <mark>t</mark> - text mode (open file for text read|write operations) </p>
                  <p> <mark>b</mark> - binary mode (open file for binary read|write operations) </p>
                </div>
              </optval>
            </opt>, <a href="https://docs.python.org/3/library/tempfile.html#tempfile.TemporaryFile" target="_blank">args...</a>)
          </td>
          <td>
            - creates a temporary file <u>(not garanteed to be visible on the file system)</u> <br>
            - returns a <reqval>fileLike</reqval> object <br>
            - supports context manager (deleted when exiting the context)
          </td>
        </tr>
        <tr>
          <td>
            <lit>tempfile</lit>.NamedTemporaryFile(<opt>mode=<optval class="openable">accMode:str<div>
                  <p> Default <mark>w+b</mark> (multple can be combined) </p>
                  <p> <mark>r</mark> - read-only (handler at file content start) </p>
                  <p> <mark>w</mark> - write-only (handler at file content start), completely overwrites file content (creates the file if not exist) </p>
                  <p> <mark>a</mark> - append (handler at file content end), appends data to the content (creates the file if not exist) </p>
                  <p> <mark>+</mark> - updating (combined with other modes) (<mark>r+</mark> = read and write) (<mark>w+</mark> write and read) (<mark>a+</mark> append and read) </p>
                  <p> <mark>x</mark> - create only (error if file exist)
                    <p> <mark>t</mark> - text mode (open file for text read|write operations) </p>
                    <p> <mark>b</mark> - binary mode (open file for binary read|write operations) </p>
                  </div>
                </optval>
              </opt>, <a href="https://docs.python.org/3/library/tempfile.html#tempfile.NamedTemporaryFile" target="_blank">args...</a>)
            </td>
            <td>
              - creates a temporary file <u>garantees to be visible on the file system</u> <br>
              - returns a <reqval>fileLike</reqval> object <br>
              - supports context manager (deleted when exiting the context)
            </td>
          </tr>
          <tr>
            <td>|</td>
            <td></td>
          </tr>

          <tr>
            <td>
              <lit>tempfile</lit>.SpooledTemporaryFile(<opt>max_size=<optval>byte:int</optval>
              </opt>, <opt>mode=<optval class="openable">accMode:str<div>
                    <p> Default <mark>w+b</mark> (multple can be combined) </p>
                    <p> <mark>r</mark> - read-only (handler at file content start) </p>
                    <p> <mark>w</mark> - write-only (handler at file content start), completely overwrites file content (creates the file if not exist) </p>
                    <p> <mark>a</mark> - append (handler at file content end), appends data to the content (creates the file if not exist) </p>
                    <p> <mark>+</mark> - updating (combined with other modes) (<mark>r+</mark> = read and write) (<mark>w+</mark> write and read) (<mark>a+</mark> append and read) </p>
                    <p> <mark>x</mark> - create only (error if file exist) </p>
                    <p> <mark>t</mark> - text mode (open file for text read|write operations) </p>
                    <p> <mark>b</mark> - binary mode (open file for binary read|write operations) </p>
                  </div>
                </optval>
              </opt>, <a href="https://docs.python.org/3/library/tempfile.html#tempfile.SpooledTemporaryFile" target="_blank">args...</a>)
            </td>
            <td>
              - creates a spooled temporary file <u>(not garanteed to be visible on the file system)</u> <br>
              - the file's content is kept in memory limited by the <mark>max_size</mark> argument (when the limit reached the content is flushed on disk, <mark>max_size=0</mark> = no limit) <br>
              - returns a <reqval>fileLike</reqval> object <br>
              - supports context manager (deleted when exiting the context)
            </td>
          </tr>
          <tr>
            <td>
              <reqval>fileLike</reqval>.rollover()
            </td>
            <td>
              - explicitly flushes the data on disk
            </td>
          </tr>
          <tr>
            <td>|</td>
            <td></td>
          </tr>
          <tr>
            <td>
              <lit>tempfile</lit>.TemporaryDirectory(<a href="https://docs.python.org/3/library/tempfile.html#tempfile.TemporaryDirectory" target="_blank">args...</a>)
            </td>
            <td>
              - creates a temporary directory <u>(not garanteed to be visible on the file system)</u> <br>
              - returns a <reqval>dir</reqval> object <br>
              - supports context manager (deleted with all its content when exiting the context)
            </td>
          </tr>
          <tr>
            <td>
              <reqval>dir</reqval>.name
            </td>
            <td>
              - returns the directory name
            </td>
          </tr>
          <tr>
            <td>
              <reqval>dir</reqval>.clreanup()
            </td>
            <td>
              - explicitly cleans up the directory
            </td>
          </tr>
          <tr>
            <td>|</td>
            <td></td>
          </tr>
          <tr>
            <td>
              <lit>tempfile</lit>.mkstemp(<a href="https://docs.python.org/3/library/tempfile.html#tempfile.mkstemp" target="_blank">args...</a>)
            </td>
            <td>
              - creates a temporary file, (returns a tuple with <mark>(<reqval>fd</reqval>, <reqval>path</reqval>)</mark>) <br>
              - does not support context manager <u>(not automatically removed)</u> <br>
              - the file is created with access rights <mark>rw-------</mark> (only the current user can read and write it)
            </td>
          </tr>
          <tr>
            <td>
              <lit>tempfile</lit>.mkdtemp(<a href="https://docs.python.org/3/library/tempfile.html#tempfile.mkdtemp" target="_blank">args...</a>)
            </td>
            <td>
              - creates a temporary directory, (returns the absolute path) <br>
              - does not support context manager <u>(not automatically removed)</u> <br>
              - the directory is created with access rights <mark>rw-------</mark> (only the current user can read and write it)
            </td>
          </tr>
        </table>
        <br>

        <h2 class="headerSection"> Useful Links : </h2>
        <p><a href="https://docs.python.org/3/library/tempfile.html#module-tempfile" target="_blank"> tempfile module (docs.python.org) </a></p>
        <h2 class="headerSection"> Remember This : </h2>

        <h2 class="headerSection"> Description and Demonstration : </h2>
        <p> - the <mark>temfile</mark> lib is used to create temporary files & directories </p>
        <p> - the temporary storage location is defined by (in this order): </p>
        <p class="indent-lv1"> - <mark>TMPDIR</mark> environment variable </p>
        <p class="indent-lv1"> - <mark>TEMP</mark> environment variable </p>
        <p class="indent-lv1"> - <mark>TMP</mark> environment variable </p>
        <p class="indent-lv1"> - on Platforms: </p>
        <p class="indent-lv2"> - Windows: <mark>C:\TEMP</mark> <mark>C:\TMP</mark> <mark>\TEMP</mark> and <mark>\TMP</mark> in that order </p>
        <p class="indent-lv2"> - On all other platforms: <mark>/tmp</mark> <mark>/var/tmp</mark> and <mark>/usr/tmp</mark> in that order </p>
        <p class="indent-lv1"> - current working directory </p>
        <pre>
    import tempfile
    
    tempfile.tempdir = '/var/temp'          // set temp dir
    
    
    tempfile.gettempdir()            // -> '/var/temp'
    tempfile.gettempprefix()         // -> 'temp'
    
    
// tempfile -------------------------------------------------------
    with tempfile.NamedTemporaryFile(mode='w+') as tmp_file:           // file will be visible on the file system
        tmp_file.write('Hell World')
        tmp_file.seek(0)
        
        tmp_file.read()                                         // -> 'Helo World!'
    
    
    with tempfile.SpooledTemporaryFile(max_size=0, mode="w+") as f:     // spooled temp file
        f.write("Hello World!")
        f.rollover()                                          // data explicitly flushed on disk
        
        f.write("Hello World!")
    
    
// tempdir --------------------------------------------------------
    with tempfile.TemporaryDirectory() as tmp_dir:
        with (open(f"{tmp_dir}/temp_file_1.txt", "w+") as f1,     // creating files in the temp dir
              open(f"{tmp_dir}/temp_file_2.txt", "w+") as f2):
            f1.write("Hello from file 1")
            f2.write("Hello from file 2")                           //  on context exit temp dir deleted with all its files
    
    
// mkstemp() / mkdtemp() -----------------------------------------------
    fd, f_path = tempfile.mkstemp()               // creates a temp file <u>(not auto removed)</u>
    
    with open(fd, "w+") as f:                     // writing temp file 
        f.write("Hello  World!")
    
    
    tempfile.mkdtemp()                      // -> '/var/temp/tmp2048jico' (creates a temp dir <u>(not auto removed)</u>)
</pre>

        <br><br>
      </body>

    </html>