<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title> Pipenv </title>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css"
    integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <link rel="stylesheet" href="../../../Assets/stylesPages.css">
  <script src="../../../Assets/scriptPages.js"></script>
</head>

<body>
  <h1> Pipenv </h1>
  <p> Updated ( 2023-01-13 )</p>
  <nav class="sitenav"> <a href="../../../index.html">MySite > </a>
    <a href="../../index.html">Python > </a> Pipenv
  </nav>
  <br>
  <table class="table">
    <caption>
      Pipenv
      <span class="changeListOrder">[Ordered: <span>Alphabetically</span>]</span>
    </caption>
    <tr>
      <th style="width:30%;"> Command </th>
      <th> Description </th>
    </tr>
    <tr>
      <td>
        <em>pipenv</em> shell
      </td>
      <td>
        <p style="margin:0;"> - if this directory has virtual environment </p>
        <p style="margin:0; text-indent:25px"> - launches and enters the <mark>pipenv</mark> shell</p>
        <p style="margin:0;"> - if this directory does not have virtual environment </p>
        <p style="margin:0; text-indent:25px"> - a new pipenv virtual environment is created
          (<mark>/root/.local/share/virtualenvs/<strong>venv</strong></mark> in my case) </p>
        <p style="margin:0; text-indent:25px"> - creates the <mark>Pipfile</mark> in the project (if not exist) </p>
        <p style="margin:0; text-indent:25px"> - if the project has a <mark>requirements.txt</mark> file <u>and there's
            no <mark>Pipfile</mark> yet</u>, packages from <mark>requirements.txt</mark> will be automatically installed
          in this virtual environment (and the <mark>Pipfile</mark> is updated) </p>
      </td>
    </tr>
    <tr>
      <td>
        <em>pipenv</em> run <strong>cmd</strong>
      </td>
      <td>
        - executes the command in the pipenv virtual environment shell of this project (creates the pipenv virutal
        environment if not exist)
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td>
        <em>pipenv</em> --venv
      </td>
      <td>
        - prints this projects virtual environmen location (if exist)
      </td>
    </tr>
    <tr>
      <td>
        <em>pipenv</em> --rm
      </td>
      <td>
        - deletes the pipenv virtual environment of this project (does not delete the <mark>Pipfile</mark> and the
        <mark>Pipfile.lock</mark>) (of this directory)
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td colspan="2">
        insidie <mark>pipenv</mark> shell
      </td>
    </tr>
    <tr>
      <td>
        <em>pipenv</em> exit
      </td>
      <td>
        - exits from the <mark>pipenv</mark> shell
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td>
        <em>pipenv</em> --where
      </td>
      <td>
        - prints the project folder path of this pipenv virtual environmen
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td>
        <em>pipenv</em> install <small>[--dev]</small>
      </td>
      <td>
        - installs all packages listend in <mark>[packages]</mark> in <mark>Pipefile</mark> and updates the
        <mark>Pipfile.lock</mark> with all installed dependencies <br>
        - (<small>--dev</small>) also installs packages listed in <mark>[dev-packages]</mark> in <mark>Pipfile</mark>
        <br>
      </td>
    </tr>
    <tr>
      <td>
        <em>pipenv</em> install -r <strong>requirementsFilePath</strong>
      </td>
      <td>
        - installs packages from the requirements file and updates the <mark>Pipfile</mark> and
        <mark>Pipfile.lock</mark> (overrides already installed packages in this venv)
      </td>
    </tr>
    <tr>
      <td>
        <em>pipenv</em> install --ignore-pipfile <small>[--dev]</small>
      </td>
      <td>
        - installs all packages from the <mark>Pipfile.lock</mark> (ignores the <mark>Pipfile</mark>) (does not modify
        the <mark>Pipfile</mark> and <mark>Pipfile.lock</mark>) (for deterministic builds) <br>
        - (<small>--dev</small>) also installs dev packages
      </td>
    </tr>
    <tr>
      <td>
        <em>pipenv</em> install <strong>package</strong><i>semVer</i> <i>...</i> <small>[--dev]</small>
      </td>
      <td>
        - installs the specified packages(es) and updates the <mark>Pipfile</mark> and <mark>Pipfile.lock</mark> files
        (also runs the <mark>pipenv install</mark> command) <br>
        - use string for complex semantic versions (ex <mark>pipenv install "Django>=4.0.0,&lt;4.0.4,!=4.0.3"</mark>)
        <br>
        - (<small>--dev</small>) installs as dev packages
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td>
        <em>pipenv</em> uninstall --all
      </td>
      <td>
        - uninstalls all installed packages <u>(does not modify the <mark>Pipfile</mark> and
          <mark>Pipfile.lock</mark>)</u>
      </td>
    </tr>
    <tr>
      <td>
        <em>pipenv</em> uninstall --all-dev
      </td>
      <td>
        - uninstalls dev packages <u>and all their sub-packages</u> from <mark>[dev-packages]</mark> in
        <mark>Pipfile</mark> <u>(modifies the <mark>Pipfile</mark> and <mark>Pipfile.lock</mark>)</u>
      </td>
    </tr>
    <tr>
      <td>
        <em>pipenv</em> uninstall <strong>package</strong> <i>...</i>
      </td>
      <td>
        - uninstalls the specified package(es) <br>
        <u>- modifies the <mark>Pipfile</mark> and <mark>Pipfile.lock</mark> but only uninstalls top packages but not
          their sub-dependencies (what a crap!)</u>
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td>
        <em>pipenv</em> check
      </td>
      <td>
        - check for security vulnerabilities in all installed packages
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td>
        <em>pipenv</em> graph <small>[--reverse]</small>
      </td>
      <td>
        - lists all installed packages and their sub-packages in graph format (does not list basic packages used by
        <mark>pip</mark>, use <mark>pip list</mark> for that)<br>
        - (<small>--reverse</small>) sub-packages with their dependenvies
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td>
        <em>pipenv</em> lock <small>[-r]</small>
      </td>
      <td>
        - creates or updates the <mark>Pipfile.lock</mark> (check the <mark>Pipfile</mark> not the installed packages)
        <br>
        - (<small>-r</small>) prints packages in pip requirement format
      </td>
    </tr>
  </table>
  <br>
  <table class="table">
    <caption>
      Semantic Versioning
      <span class="changeListOrder">[Ordered: <span>Alphabetically</span>]</span>
    </caption>
    <tr>
      <th style="width:30%;"> Versioning </th>
      <th> Description </th>
    </tr>
    <tr>
      <td>
        (nothing)
      </td>
      <td>
        - (no version specified) = latest version on CMD and in <mark>requirements.txt</mark>
      </td>
    </tr>
    <tr>
      <td>
        *
      </td>
      <td>
        - latest version in <mark>Pipfile</mark>
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td>
        ==
      </td>
      <td>
        - pinned version
      </td>
    </tr>
    <tr>
      <td>
        &lt; | &lt;= | > | >=
      </td>
      <td>
        - lower | lower or equal | higher | higher or equal version
      </td>
    </tr>
    <tr>
      <td>
        !=
      </td>
      <td>
        - excluded version
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td>
        <strong>semVer</strong>,<i>...</i>
      </td>
      <td>
        - multiple version conditions
      </td>
    </tr>
  </table>
  <br>
  <details class="example" id="notes">
    <summary> Notes :</summary>
    <!-- <p> - paragraph removes the 'empty' message from the detail TAG -->
  </details>
  <h2 style="color:green;"><u> Useful Links : </u></h2>
  <p><a href='https://pipenv.pypa.io/en/latest/' target='_blank'>pipenv.pypa.io</a></p>
  <h2 style="color:green;"><u> Remember This : </u></h2>

  <h2 style="color:green;"><u> Description and Demonstration : </u></h2>
  <p> - pipenv provides isolated local environments for Python projects, each environment has its own Python interpreted, binaries and libraries </p>
  <p> - pipenv creates a virtual environment for the project folder, the virtual environment itself is created in a different location (<mark>/root/.local/share/virtualenvs/<strong>venv</strong></mark> in my case) which is linked to the project folder </p>
  <pre class="syntax">
    /workspace/projectA                                                                 // starting pipenv shell from this folder will start the <mark>/root/.local/share/virtualenvs/<strong>projectA-venv</strong></mark> venv    
    /workspace/projectB                                                                 // starting pipenv shell from this folder will start the <mark>/root/.local/share/virtualenvs/<strong>projectB-venv</strong></mark> venv    
    
    /root/.local/share/virtualenvs/<strong>projectA-venv</strong>                                        // pipenv venv is linked to the <mark>/workspace/projectA</mark> file 
    /root/.local/share/virtualenvs/<strong>projectB-venv</strong>                                        // pipenv venv is linked to the <mark>/workspace/projectB</mark> file 
    </pre>
  <details class="example">
    <summary> DEMO </summary>
    <pre class='cmd'>
    /workspace/projectA $ pipenv shell                                                 // launches (or creates if doesn't exist) the virtualenv of this folder   
        Shell for /root/.local/share/virtualenvs/projectA-aokugcF2 already activated.  // location of this virtual environment 
        No action taken to avoid nested environments.
    (projectA) root@ca60249ad5ad:/workdir/projectA# python                             // launching python binary in the virtulalenv    // -! in <mark>pipenv</mark> shell pipenv installs packages and binaries in the location of this virtualenv 
    >>> import sys
    >>> sys.executable 
        '/root/.local/share/virtualenvs/projectB-aokugcF2/bin/python'                  // python executable location in this virtualevn 
    >>>
    </pre>
    <pre class="cmd">
// shell ------------------------------------------------------------------------------ 
    $ > pipenv shell                                                                   // creates the pipenv virtual environment for this project and enters in pipenv shell 
    
    
// run -------------------------------------------------------------------------------- 
    $ > pipenv run python                                                              // executes the <mark>python</mark> binary in the virtual environment of this project   
    
    
// --venv -----------------------------------------------------------------------------
    $ > pipenv --venv                                                                  // prints the path where the virutal environmen is located (<mark>root/.local/share/virtualenvs/workdir-tL8tMG2Q</mark>)
    
    
// --rm -------------------------------------------------------------------------------
    $ > pipenv --rm                                                                    // deletes the pipenv virtual environmen linked to this project 
    
    
// inside pipenv shell ----------------------------------------------------------------
// ------------------------------------------------------------------------------------
// exit -------------------------------------------------------------------------------
    (workdir) $ > exit                                                                 // exits from the pipenv shell
    
    
// --where ----------------------------------------------------------------------------
    (workdir) $ > pipenv --where                                                       // prints the project directory path   
    
    
// isntall ----------------------------------------------------------------------------
    (workdir) $ > pipenv install --dev                                                 // installs all packages from Pipfile including dev packages   
    (workdir) $ > pipenv install -r requirements.txt                                   // installs all packages from requirements.txt to pipenv (override installed packages)   
    (workdir) $ > pipenv install Flask "requests&lt;2.26,>2.21.0,!=2.25.1"                // installs the packages (string used for complex version conditions)
    
    
// unisntall --------------------------------------------------------------------------
    (workdir) $ > pipenv uninstall --all                                               // uninstalls all installed packages                 // -! does not modify the <mark>Pipfile</mark> and <mark>Pipfile.lock</mark>  
    (workdir) $ > pipenv uninstall --all-dev                                           // uninstalls dev packages and their sub-packages    // -! updates the <mark>Pipfile</mark> and <mark>Pipfile.lock</mark>  
    (workdir) $ > pipenv uninstall camelcase django                                    // uninstalls packages <u>but not their sub-packages</u>    // -! updates the <mark>Pipfile</mark> and <mark>Pipfile.lock</mark>  
    
    
// check ------------------------------------------------------------------------------
    (workdir) $ > pipenv check                                                         // check for package vulnerabilities in all installed packages  
    
    
// graph ------------------------------------------------------------------------------
    (workdir) $ > pipenv graph                                                         // list installed packages in graph format (does not list basic pip packages)
    
    (workdir) $ > pip list                                                             // to list all installed packages 
    
    
// lock -------------------------------------------------------------------------------
    (workdir) $ > pip lock                                                             // creates or updates the <mark>Pipfile.lock</mark> file          // -! updates based on the <mark>Pipfile</mark> (not based on the installed packages)
    </pre>
  </details>
  <hr>
  <!------------------------------------------------------------------------------------->
  <h2 class="header"> The <mark>Pipfile</mark> / <mark>Pipfile.lock</mark> / <mark>.env</mark> files </h2>
  <p> - the <mark class="mark">Pipfile</mark> is used by pipenv to log packages, we can also modify it manually if we want, the <mark class="mark">Pipenv</mark> file is formated in TOML format </p>
  <p> - the <mark class="mark">Pipfile.lock</mark> is used to lock an environment for deterministic builds, <u>should never be modified manually</u>, the <mark class="mark">Pipfile.lock</mark> in formated in JSON format </p>
  <p> - the <mark class="mark">.env</mark> file is used to specify environment variables for pipenv, the pipenv shell will start environment variables specified in this file </p>
  <pre class="syntax">
// <mark>Pipfile</mark> file ------------------------
    [[source]]
    // source informations...
    
    [packages]                                                                          // packages 
    <strong>package</strong> = "<strong>semVer</strong>"
    
    [dev-packages]                                                                      // developement packages
    <strong>package</strong> = "<strong>semVer</strong>"
    
    [requires]
    // requirements...
    
    
// <mark>.env</mark> file -----------------
    <strong>KEY=VAL</strong>                                          // environment key value pairs  
    <i>...</i>
    </pre>
  <details class="example">
    <summary> DEMO </summary>
    <p> - <mark>Pipfile</mark> (file) </p>
    <pre>
    [[source]]
    url = "https://pypi.org/simple"
    verify_ssl = true
    name = "pypi"
    
    [packages]
    django = "*"                                                                        // latest version 
    requests = "&lt;2.26,!=2.25.1,>2.21.0"                                                 // multiple version conditions 
    
    [dev-packages]
    flask = "==2.0.0"                                                                   // pinned version 
    
    [requires]
    python_version = "3.10"
    </pre>
    <p> - <mark>.env</mark> (file) </p>
    <pre>
    TESTENV1=1                                                                          // pipenv shell will have these environmen variables  
    TESTENV2=21
    TESTENV3=321
    </pre>
  </details>


  <br><br>
</body>

</html>