<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title> logging </title>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css"
    integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <link rel="stylesheet" href="../../../Assets/stylesPages.css">
  <script src="../../../Assets/scriptPages.js"></script>
</head>

<body>
  <h1> logging </h1>
  <p> Updated ( 2023-03-29 )</p>
  <nav class="sitenav">
    <a href="../../../index.html">MySite > </a>
    <a href="../../index.html">Python > </a>
    <a href="../index.html">Built-in Libraries > </a> logging
  </nav>
  <table class="table">
    <caption>
      logger levels (in severity order)
    </caption>
    <tr>
      <th style="width:30%;"> Level </th>
      <th> Numeric Value </th>
    </tr>
    <tr>
      <td>CRITICAL</td>
      <td>50</td>
    </tr>
    <tr>
      <td>ERROR</td>
      <td>40</td>
    </tr>
    <tr>
      <td>WARNING</td>
      <td>30</td>
    </tr>
    <tr>
      <td>INFO</td>
      <td>20</td>
    </tr>
    <tr>
      <td>DEBUG</td>
      <td>10</td>
    </tr>
    <tr>
      <td>NONSET</td>
      <td>0 (default logger level)</td>
    </tr>
  </table>
  <br>
  <table class="table">
    <caption>
      root logger
    </caption>
    <tr>
      <th style="width:30%;"> method </th>
      <th> Description </th>
    </tr>
    <tr>
      <td>
        <em>logging</em>.basicConfig(<small>level=<strong>logLevel:int</strong></small>,
        <small>filename=<i>path:str</i></small>, <small>format=<a
            href="https://docs.python.org/3/library/logging.html?highlight=logging#logrecord-attributes"
            target="_blanc">format:str</a></small>, <a
          href="https://docs.python.org/3/library/logging.html#logging.basicConfig" , target="_blanc">args</a>)
      </td>
      <td>
        - configures the root logger (callable once)<br>
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td>
        <em>logger</em>.debug|info|warning|error|critical(<strong>msg:str</strong>, <small>ext_info=<i>bool</i></small>)
      </td>
      <td>
        - logs the <strong>msg</strong> to the targeted log level<br>
        - (<small>ext_info=<i>bool</i></small>) also logs the stack trace
      </td>
    </tr>
    <tr>
      <td>
        <em>logger</em>.exception(<strong>msg:str</strong>)
      </td>
      <td>
        - does the same as <mark><strong>logger</strong>.error(<strong>msg</strong>, ext_info=True)</mark>
      </td>
    </tr>
  </table>
  <br>
  <table class="table">
    <caption>
      custom loggers
    </caption>
    <tr>
      <th style="width:30%;"> method </th>
      <th> Description </th>
    </tr>
    <tr>
      <td>
        <em>logging</em>.getLogger(<strong>name:str</strong>)
      </td>
      <td>
        - creates and returns a new <strong>logger</strong> <br>
        - <strong>loggers</strong> can be created in hierarchy (ex: <mark>ch =
          <em>logging</em>.getLogger('base.child')</mark> will be the child of <mark>p =
          <em>logging</em>.getLogger('base')</mark>)
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td>
        <strong>logger</strong>.setLevel(<strong class="openable">level:int<div>
            <p> log level usually passed as <mark>logger.INFO</mark>, etc...</p>
          </div></strong>)
      </td>
      <td>
        - sets the logger level (handlers attached to this <strong>logger</strong> can log on <u>this or higher
          level</u> (even if we set lower level on them))
      </td>
    </tr>
    <tr>
      <td>
        <strong>logger</strong>.addHandler(<strong>handler</strong>)
      </td>
      <td>
        - adds the <strong>handler</strong> to the <strong>logger</strong>
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td>
        <strong>logger</strong>.debug|info|warning|error|critical(<strong>msg:str</strong>,
        <small>ext_info=<i>bool</i></small>)
      </td>
      <td>
        - logs the <strong>msg</strong> to the targeted log level<br>
        - (<small>ext_info=<i>bool</i></small>) also logs the stack trace
      </td>
    </tr>
    <tr>
      <td>
        <strong>logger</strong>.exception(<strong>msg:str</strong>)
      </td>
      <td>
        - does the same as <mark><strong>logger</strong>.error(<strong>msg</strong>, ext_info=True)</mark>
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td colspan="2"> handler (outputs the received log message to its target resource) </td>
    </tr>
    <tr>
      <td>
        <em>logging</em>.StreamHandler()
      </td>
      <td>
        - creates and returns a <strong>streamHandler</strong> (logs message to <strong>stdout</strong>)
      </td>
      </td>
    <tr>
      <td>
        <em>logging</em>.FileHandler(<strong>filePath:str</strong>)
      </td>
      <td>
        - creates and returns a <strong>fileHandler</strong> (logs message to the specified file)
      </td>
      </td>
    <tr>
      <td>
        <a href="https://docs.python.org/3/library/logging.handlers.html#module-logging.handlers" target="_blank">otherHandlers</a>
      </td>
      <td>
        - other handlers such as <mark>RotatingFileHandler</mark>, <mark>HTTPHandler</mark>, etc..
      </td>
      </td>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td>
        <strong>handler</strong>.setLevel(<strong class="openable">level:int<div>
            <p> log level usually passed as <mark>logger.INFO</mark>, etc...</p>
          </div></strong>)
      </td>
      <td>
        - sets the log level for the <strong>handler</strong> (handler logs on this <u>or on higher level</u>)
      </td>
    </tr>
    <tr>
      <td>
        <strong>handler</strong>.setFormatter(<strong>formater</strong>)
      </td>
      <td>
        - sets the log message formater to the <strong>handler</strong> (formater sets written message format)
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td colspan="2"> formater (formats the log message) </td>
    </tr>
    <tr>
      <td>
        <em>logging</em>.Formater(<strong class="openable">format:str<div>
            <p><a href="https://docs.python.org/3/library/logging.html?highlight=logging#logrecord-attributes"
                target="_blanc">[link]</a></p>
            <p> ex: <mark>'%(asctime)s - %(levelname)s - %(message)s'</mark> </p>
          </div></strong>)
      </td>
      <td>
        - specifies how the log message is formated
      </td>
    </tr>
  </table>
  <br>
   <h2 class="headerSection"> Description and Demonstration </h2>
  <h2 class="headerSection"> Useful Links : </h2>
  <p><a href="https://docs.python.org/3/library/logging.html?highlight=logging#module-logging" target="_blank">logging
      (docs.python.org)</a></p>
  <h2 class="headerSection"> Remember This : </h2>

  <h2 class="headerSection"> Description and Demonstration : </h2>
  <p> - the <mark>logging</mark> module provides from basic to sophisticated logging in python </p>
  <p> - the <mark>logging</mark> module provides: </p>
  <p style="text-indent: 30px;"> - root and custom loggers (each logger controls its own handlers) </p>
  <p style="text-indent: 30px;"> - handlers (each handler outputs the received log message to its output such as stdout,
    file, socket, etc...) </p>
  <p style="text-indent: 30px;"> - filters (sets which log level <u>or higher level</u> allowed to be logged to the
    target (Default: <mark>WARNING</mark>)) </p>
  <p style="text-indent: 30px;"> - formaters (formats the log messages) </p>
  <!----------------------------------------------------------------------------------------->
  <hr>
  <h2 class="header"> Root logger <mark>basicConfig()</mark> </h2>
  <p> - the root logger provides a simple way to set a simple logger for projects that don't need sophisticated logging,
    it provides log output to <mark>stdout</mark> or to a file </p>
  <details class="example">
    <summary> DEMO </summary>
    <pre>
    import logging
    
    
    logging.basicConfig(
        level=logging.DEBUG,                                          # logs all log levels
        format='[%(asctime)s]:%(name)s:%(levelname)s: %(message)s',   # format log message 
        datefmt='%d-%b-%y %H:%M:%S'                                   # specifies how to format date output
    )
    
    logging.debug("my debug log")
    logging.info("my info log")
    logging.warning("my warning log")
    logging.error("my error log")
    logging.critical("my critical log")
    
    # logged on console 
    # [29-Mar-23 13:06:51]:root:DEBUG: my debug log
    # [29-Mar-23 13:06:51]:root:INFO: my info log
    # [29-Mar-23 13:06:51]:root:WARNING: my warning log
    # [29-Mar-23 13:06:51]:root:ERROR: my error log
    # [29-Mar-23 13:06:51]:root:CRITICAL: my critical log
    # [29-Mar-23 13:06:51]:root:INFO: test warning
    </pre>
    <p> - logging into file </p>
    <pre>
    import logging
    
    
    logging.basicConfig(
        level=logging.INFO,
        filename='my_log.log',
        format='%(name)s - %(levelname)s - %(message)s'     # log entry format
    )
    
    logging.debug("my debug log")           # won't be logged because the log level is INFO
    logging.info("my info log")
    logging.warning("my warning log")
    logging.error("my error log")
    logging.critical("my critical log")
    
    # my_log.log (file)
    # root - INFO - my info log
    # root - WARNING - my warning log
    # root - ERROR - my error log
    # root - CRITICAL - my critical log
    </pre>
    <p> - passing variables into logger (the old way before python v.3.6) </p>
    <pre>
    import logging
    
    
    logging.basicConfig(level=logging.INFO)
    
    info = 'info'
    logging.info('This is an %s message', info)
    logging.info(f'This is an {info} message')      # after python v3.6 (included)
    
    
    # printed on console
    # INFO:root:This is an info message
    </pre>
    <p> - printing stack trace </p>
    <pre>
    import logging
    
    
    logging.basicConfig(level=logging.DEBUG)
    
    try:
        raise Exception('some exeption')
    except Exception:
        logging.error('Error has occured', exc_info=True)   # include stack trace informations on log
        logging.exception('Error has occured')              # does the same as above 
    
        logging.info('Error has occured', exc_info=True)    # works for all logger level
    
    
    # printed on console
    # ERROR:root:Error has occured
    # Traceback (most recent call last):
    #   File "/Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/logging/TEST/main.py", line 77, in &lt;module&gt;
    #     raise Exception('some exeption')
    # Exception: some exeption
    </pre>
  </details>
  <!----------------------------------------------------------------------------------------->
  <hr>
  <h2 class="header"> custom loggers <mark>getLogger()</mark> / <mark>setLevel()</mark> / <mark>setFormatter()</mark> /
    <mark><strong>handlers</strong></mark>
  </h2>
  <p> - custom loggers provide high customizability suited for complex projects, we can provide multiple loggers each
    with is own handlers and configurations </p>
  <p> - custom loggers can be structured in hierarchy, this means we lower level loggers inherit handlers and settings
    from their parents (the idea here is to hierarchy structure them by project modules) </p>
  <pre class="syntax">
  import logging
  
  
  base_logger = logging.getLogger('base')
  child_logger = logging.getLogger('base.child')          # inherits from its parent the <mark>base_logger</mark>
  </pre>
  <details class="example">
    <summary> DEMO </summary>
    <p> - custom logger (and log handlers) </p>
    <pre>
    import logging
    
    
    logger = logging.getLogger(__name__)          # it's common to use <mark>__name__</mark> as logger name
    
# setting logger log level
    logger.setLevel(logging.INFO)                 // -! logger won't log lower level logs (debug level won't be logged, even if the handler sets a lower level)
    
    
    stream_handler = logging.StreamHandler()      # handler logs to stdout
    stream_handler.setLevel(logging.DEBUG)        // -! this won't work becasue the logger has higher level logging set
    stream_handler.setLevel(logging.WARN)         # this will work because the logger has lower level logging set  
    
    logger.addHandler(stream_handler)
    
    
    logger.debug('debug log')       # not logged 
    logger.info('info log')         # not logged
    logger.warning('warn log')      # logged
    </pre>
    <p> - using multiple custom loggers </p>
    <pre>
    import logging
    
    
    logger = logging.getLogger(__name__)
    logger.setLevel(logging.DEBUG)                                      # lower logger level to minimum in order to allow handlers to log low level logs
    
# handlers will handle logs to their intended destinations
    stream_handler = logging.StreamHandler()                            # to stdout 
    file_handler1 = logging.FileHandler(filename='base_log.log')        # to <mark>log1.log</mark> file    
    file_handler2 = logging.FileHandler(filename='critical_log.log')    # to <mark>log2.log</mark> file    
    
# log formaters
    base_formater = logging.Formatter('%(asctime)s - %(levelname)s - %(message)s')
    critical_fomrater = logging.Formatter('%(message)s')
    
# setting log levels for different handlers
    stream_handler.setLevel(logging.DEBUG)          # all log messages are outputted
    file_handler1.setLevel(logging.INFO)            # info or higher level log message
    file_handler2.setLevel(logging.CRITICAL)        # critical level only
    
# adding formater to handlers
    stream_handler.setFormatter(base_formater)
    file_handler1.setFormatter(base_formater)
    file_handler2.setFormatter(critical_fomrater)
    
# adding handles to logger
    logger.addHandler(stream_handler)
    logger.addHandler(file_handler1)
    logger.addHandler(file_handler2)
    
                                                    # logged by 
    logger.debug('logger debug message')            # stream_handler
    logger.info('logger info message')              # stream_handler, file_handler_1
    logger.warning('logged warning message')        # stream_handler, file_handler_1
    logger.error('logged error message')            # stream_handler, file_handler_1
    logger.critical('logged critical message')      # stream_handler, file_handler_1, file_handler_2   
    </pre>
    <p> - hierarchy </p>
    <pre>
    import logging
    
    
    base_logger = logging.getLogger('base')   # loggers are separated by <mark>.</mark> by hierarchy level    
    child_logger = logging.getLogger('base.child')
    grand_child_logger = logging.getLogger('base.child.grand_child')
    
    
    base_logger.setLevel(logging.DEBUG)
    sh = logging.StreamHandler()
    fh = logging.FileHandler('log.log')
    
    base_logger.addHandler(sh)                # handler set on the base logger 
    base_logger.addHandler(fh)
    
# grand_child_logger uses its parent (upper parrent) handlers 
    grand_child_logger.debug('this is a debug log')   # logged to stdout and to <mark>log.log</mark> file  
    </pre>
  </details>
  
  
  <br><br>
</body>

</html>