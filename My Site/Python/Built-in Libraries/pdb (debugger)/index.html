<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title> pdb (debugger) </title>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css"
    integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <link rel="stylesheet" href="../../../Assets/stylesPages.css">
  <script src="../../../Assets/scriptPages.js"></script>
</head>

<body>
  <h1> pdb (debugger) </h1>
  <p> Updated ( 2023-03-31 )</p>
  <nav class="sitenav">
    <a href="../../../index.html">MySite > </a>
    <a href="../../index.html">Python > </a>
    <a href="../index.html">Built-in Libraries > </a> pdd
  </nav>
  <table class="table">
    <tr>
      <th style="width:30%;"> command </th>
      <th> Description </th>
    </tr>
    <tr>
      <td>
        h
      </td>
      <td>
        - (<mark>h</mark>elp) prints debugger help informations
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td>
        p <strong>exp</strong> <br>
        pp <strong>exp</strong>
      </td>
      <td>
        - (<mark>p</mark>rint, <mark>p</mark>retty <mark>p</mark>rint), executes an expression <br>
        - usually used to print variables preceding the debugger
      </td>
    </tr>
    <tr>
      <td>
        l
      </td>
      <td>
        - (<mark>l</mark>ist) prints 11 lines around the debugger on the console
      </td>
    </tr>
    <tr>
      <td>
        ll
      </td>
      <td>
        - prints the body of the current function (the whole file if on top level)
      </td>
    </tr>
    <tr>
      <td>
        w
      </td>
      <td>
        - (<mark>w</mark>here) prints where the debugger is currently standing (each line in the stack (latest is the
        closest))
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td>
        c
      </td>
      <td>
        - (<mark>c</mark>ontinue) continues program execution
      </td>
    </tr>
    <tr>
      <td>
        s
      </td>
      <td>
        - (<mark>s</mark>tep) steps on the next <u>by executing it</u>
      </td>
    </tr>
    <tr>
      <td>
        n
      </td>
      <td>
        - (<mark>n</mark>ext) steps on the next line <u>without executing it</u> <br>
      </td>
    </tr>
    <tr>
      <td>
        unt <strong>line:int</strong>
      </td>
      <td>
        - (<mark>unt</mark>il) steps on the specified line <u>without executing it</u>
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td>
        u
      </td>
      <td>
        - (<mark>u</mark>p) moves up -> steps on the <u>previous</u> stack frame (exit function)
      </td>
    </tr>
    <tr>
      <td>
        d
      </td>
      <td>
        - (<mark>d</mark>own) moves down -> steps on the <u>next</u> stack frame (enter function)
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td>
        q
      </td>
      <td>
        - (<mark>q</mark>uit) exits the program
      </td>
    </tr>
    <tr>
      <td colspan="2"> setting breakpoints </td>
    </tr>
    <tr>
      <td>
        b
      </td>
      <td>
        - prints all breakpoints <u>(breakpoints that are managed by this <mark>b</mark> command)</u>
      </td>
    </tr>
    <tr>
      <td>
        b <small><i>file<i>:</small><strong>line:int</strong>
      </td>
      <td>
        - (<mark>b</mark>reakpoint) sets a new breakpoint on the specified line
      </td>
    </tr>
    <tr>
      <td>
        b <strong>fn</strong>
      </td>
      <td>
        - (<mark>b</mark>reakpoint) sets a new breakpoint on the <strong>fn</strong>
      </td>
    </tr>
    <tr>
      <td>|</td>
      <td></td>
    </tr>
    <tr>
      <td>
        cl <strong>breakpointId:int</strong>
      </td>
      <td>
        - (<mark>cl</mark>ear) clears (removes) the specified breakpoint
      </td>
    </tr>
    <tr>
      <td>
        disable <strong>breakpointId:int</strong>
      </td>
      <td>
        - disables the specified breakpoint (program won't stop on breakpoint)
      </td>
    </tr>
    <tr>
      <td>
        enable <strong>breakpointId:int</strong>
      </td>
      <td>
        - enables the specified breakpoint (program stops on breakpoint)
      </td>
    </tr>
  </table>
  <br>
  <details class="example" id="notes">
    <summary> Notes :</summary>
    <!-- <p> - paragraph removes the 'empty' message from the detail TAG -->
  </details>
  <h2 class="headerSection"> Useful Links : </h2>
  <p><a href="https://realpython.com/python-debugging-pdb/" target="_blank"> python debugger (realpython.com) </a></p>
  <p><a href="https://docs.python.org/3/library/pdb.html" target="_blank"> bdb (docs.python.org) </a></p>
  <h2 class="headerSection"> Remember This : </h2>

  <h2 class="headerSection"> Description and Demonstration : </h2>
  <p> - python debugger (pdb) provides a great tool to suspend the program execution in a set position and perform
    various debugging operations </p>
  <p> - while the program is suspended at a breakpoint we can:
  <p>
  <p style="text-indent: 30px;"> - execute statements in the debugger (ex log previous variables, etc) </p>
  <p style="text-indent: 30px;"> - continue program execution or exit from the program </p>
  <p style="text-indent: 30px;"> - navigate line by line (further) </p>
  <p style="text-indent: 30px;"> - navigate (up|down) the call stack (not further thent the current breakpoint) </p>
  <p style="text-indent: 30px;"> - manage (set new, remove, etc...) breakpoints </p>
  <pre class="syntax">
    import bdb 
    
    
    <span style="color:darkgray;">// program...</span>
    pdb.set_trace()                // setting a breakpoint (program will stop at the next logical line (non empty line))
    
<span style="color:darkgray;">// -------------------------------- <span id="browserSupport" title="updated : 2023-04-03" style="color:yellow;"><span><i class="fab fa-python"></i> 3.7 </span></span></span> (no need to import the pdb module)
    <span style="color:darkgray;">// program...</span> 
    breakpoint()                   // setting a breakpoint (program will stop at the next logical line (non empty line))
  </pre>
  <p> - pdb cli informations </p>
  <pre class="syntax">
    > <strong>filePath</strong>(<strong>lineNr</strong>)<strong>fn</strong>
    -> <strong>currentLine</strong>                 // line where debugger currenty is standing (but not executed)
    (Pdb)
    
<span style="color:darkgray;">// example: -----------------------</span>
    > ~/test.py(35)test_fn()
    -> a = 21
    (Pdb)
  </pre>
  <p> - environment variables controlling python debugger </p>
  <pre class="cmd">
    PYTHONBREAKPOINT=0             // disables the debugger (program will ignore debugger breakpoints)    
    PYTHONBREAKPOINT=''            // enables the debugger
  </pre>
  <details class="example">
    <summary> Example : </summary>
    <p> - commands <mark>w</mark> (where) / <mark>p</mark>, <mark>pp</mark> (print, pretty print) / <mark>l</mark>,
      <mark>ll</mark> (list)
    </p>
    <pre style="margin-bottom: 0;">
    def test_fn():
        a = 21
        breakpoint()
        b = 22
    
    
    test_fn()
  </pre>
    <pre class="cmd" style="margin-top: 0;">
    python main.py 
    > /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py(4)test_fn()
    -> b = 22
    
// <mark>p</mark> -------------------------------------------
    (Pdb) p a                       // checking out variable <mark>a</mark> value 
    21
    (Pdb) p b                       // variable <mark>b</mark> is not available because the program did not yet executed that line 
    *** NameError: name 'b' is not defined
    
// <mark>l</mark> / <mark>ll</mark> --------------------------------------
    (Pdb) l                         // print the next and previous 11 lines arround the debugger
      1  	def test_fn():
      2  	    a = 21
      3  	    breakpoint()
      4  ->	    b = 22
      5
      6
      7  	test_fn()
      8
      9
      10
      11 
    (Pdb) ll                        // prints the body of the current function (this would be the entire file on top level)
      1  	def test_fn():
      2  	    a = 21
      3  	    breakpoint()
      4  ->	    b = 22 
    
// <mark>w</mark> -------------------------------------------
    (Pdb) w                         // prints the debugger position with stack trance information 
    > /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py(7)&lt;module&gt;()
    -> test_fn()
    > /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py(4)test_fn()
    -> b = 22                       // latest is the closest frame 
    (Pdb)  
  </pre>
    <p> - commands <mark>c</mark> (continue) / <mark>q</mark> (quit) </p>
    <pre style="margin-bottom: 0;">
    for i in range(10):
        breakpoint()
        i
    </pre>
    <pre style="margin-top: 0;" class='cmd'>
    python main.py 
    > /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py(3)&lt;module&gt;()
    -> i
    
// <mark>c</mark> -------------------------------------------
    (Pdb) c                         // continue program execution
    > /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py(3)&lt;module&gt;()
    -> i
    (Pdb) c                         // program stops at the next breakpoint 
    > /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py(3)&lt;module&gt;()
    -> i
    
// <mark>q</mark> -------------------------------------------
    (Pdb) q                         // exits the program 
    Traceback (most recent call last):
      File "/Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py", line 3, in &lt;module&gt;
      ...
  </pre>
    <p> - commands <mark>n</mark> (next) / <mark>unt</mark> (until) / <mark>s</mark> (step) </p>
    <pre style="margin-bottom: 0;">
    x = 1
    breakpoint()
    y = 2
    
    def my_fn():
        a = 11
    
    my_fn()
    end = 'end'
    </pre>
    <pre style="margin-top: 0;" class="cmd">
// <mark>n</mark> -------------------------------------------
    python main.py
    > /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py(3)&lt;module&gt;()
    -> y = 2
    (Pdb) n                         // steps on the next logical line (does not execute the current line)
    > /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py(5)&lt;module&gt;()
    -> def my_fn():
    (Pdb) n                         // steps through the function (does not enter because the current line is not executed)
    > /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py(8)&lt;module&gt;()
    -> end = 'end'
    (Pdb) n
    --Return--
    > /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py(8)&lt;module&gt;()->None
    -> end = 'end'
    (Pdb) p end                     // before the breakpoint the program is executed, so variables can be executed in the debugger
    'end'
    
    
// <mark>unt</mark> -----------------------------------------
    python main.py
    > /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py(3)&lt;module&gt;()
    -> y = 2
    (Pdb) unt 8                     // steps on the specified line 
    > /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py(8)&lt;module&gt;()
    -> end = 'end'
    (Pdb)    
    
    
// <mark>s</mark> -------------------------------------------
    python main.py
    > /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py(3)&lt;module&gt;()
    -> y = 2
    (Pdb) s
    > /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py(5)&lt;module&gt;()
    -> def my_fn():
    (Pdb) s
    > /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py(8)&lt;module&gt;()
    -> my_fn()
    (Pdb) s
    --Call--                        // -! executes the current line = enters the fuction (opens a new call stack)
    > /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py(5)my_fn()
    -> def my_fn():
    (Pdb) s
    > /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py(6)my_fn()
    -> a = 11
    (Pdb) s
    --Return--
    > /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py(6)my_fn()->None
    -> a = 11
    (Pdb) s
    > /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py(9)&lt;module&gt;()
    -> end = 'end'
    (Pdb) s
    --Return--
    > /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py(9)&lt;module&gt;()->None
    -> end = 'end'
    (Pdb) s    
    </pre>
    <p> - commands <mark>d</mark> (down) / <mark>u</mark> (up) </p>
    <pre style="margin-bottom: 0;">
    def child():
        x = 21
        breakpoint()
    
    def main():
        child()
    
    main()
    </pre>
    <pre style="margin-top: 0;" class="cmd">
    python main.py
    --Return--
    > /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py(3)child()->None
    -> breakpoint()
    (Pdb) p x
    21
    (Pdb) u                         // moving up on the call stack 
    > /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py(6)main()
    -> child()
    (Pdb) p x                       // variable not available because we moved up on the call stack 
    *** NameError: name 'x' is not defined
    (Pdb) d                         // moving down the call stack
    > /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py(3)child()->None
    -> breakpoint()
    (Pdb) p x                       // variable available because we moved on the top on the call stack 
    21
    (Pdb) 
    </pre>
    <p> - commands <mark>b</mark> (breakpoint) / <mark>disalbe</mark> / <mark>enable</mark> </p>
    <pre style="margin-bottom: 0;">
    x = 21
    breakpoint()
    
    y = 22
    z = 23
    </pre>
    <pre style="margin-top: 0;" class="cmd">
    python main.py
    > /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py(5)&lt;module&gt;()
    -> y = 22
    (Pdb) b 5                       // setting breakpoints
    Breakpoint 1 at /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py:5
    (Pdb) b 6
    Breakpoint 2 at /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py:6
    (Pdb) b                         // display all breakpoints
    Num Type         Disp Enb   Where
    1   breakpoint   keep yes   at /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py:5
    2   breakpoint   keep yes   at /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py:6
    (Pdb) disable 2                 // disable breakpoint
    Disabled breakpoint 2 at /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py:6
    (Pdb) b
    Num Type         Disp Enb   Where
    1   breakpoint   keep yes   at /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py:5
    2   breakpoint   keep no    at /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py:6
    (Pdb) enable 2                  // enable breakpoint
    Enabled breakpoint 2 at /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py:6
    (Pdb) b
    Num Type         Disp Enb   Where
    1   breakpoint   keep yes   at /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py:5
    2   breakpoint   keep yes   at /Users/apall/Documents/my_knowledge_code_base/My Site/Python/Built-in Modules/pdb (debugger)/TEST/main.py:6
    (Pdb)    
</pre>
    <p> - debugger in async code </p>
    <pre>
    import asyncio
    
    
    async def coro_1():
        print('Entering coro_1...')
        await asyncio.sleep(1)
        breakpoint()                    // program will stop and opens debugger     // -! async tasks are continued on the background  
        
        x = 22
        print('EXIT coro_1')
    
    async def coro_2():
        print('Entering coro_1...')
        await asyncio.sleep(10)
        print('EXIT coro_2')
    
    async def main():
        await asyncio.gather(coro_1(), coro_2())
    
    asyncio.run(main())
    </pre>
  </details>


  <br><br>
</body>

</html>